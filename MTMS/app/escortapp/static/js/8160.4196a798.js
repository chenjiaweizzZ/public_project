"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[8160],{22760:function(e,t,i){i.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header",attrs:{id:"header"}},[e._t("headerLeft",(function(){return[t("a",{staticClass:"header-back-btn",on:{click:function(t){return e.back()}}},[t("img",{attrs:{src:i(88579)}})])]})),t("div",{staticClass:"header-center-blank"}),t("div",{staticClass:"header-center"},[e._t("default",(function(){return[e._v(e._s(e.title))]}))],2),e._t("headerRight")],2)},c=[],a=(i(77387),i(68934)),n=i(63822),o={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,n.rn)(["loginUser"]),methods:{...(0,n.nv)(["showAlert","showLoading","hideLoading","toast"]),...a.Z,back(){this.$router.go(-1)}}},h=o,l=i(1001),r=(0,l.Z)(h,s,c,!1,null,null,null),d=r.exports},28160:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-wrapper"},[t("c-header",[t("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[t("a",{staticClass:"header-back-btn",on:{click:function(t){return e.back()}}},[t("img",{attrs:{src:i(88579)}})])]),e._v("轮转手册审核 "),t("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[e.allCheckFlag?t("button",{staticStyle:{"font-size":"0.3rem"},on:{click:e.handleHistory}},[e._v("历史")]):t("button",{staticStyle:{"font-size":"0.3rem"},on:{click:e.handleCancel}},[e._v("取消")])])]),t("div",{staticClass:"search-box"},[t("form",{attrs:{action:"/"}},[t("van-search",{attrs:{placeholder:"请输入学员姓名模糊查询","show-action":"",shape:"round"},on:{cancel:e.onCancel,search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[t("div",{attrs:{slot:"action"},on:{click:e.onSearch},slot:"action"},[e._v("搜索")])])],1)]),t("div",{staticClass:"g-main container"},[t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.checkForm.isLoading,callback:function(t){e.$set(e.checkForm,"isLoading",t)},expression:"checkForm.isLoading"}},[t("van-list",{attrs:{"loading-text":e.text,finished:e.checkForm.finished,"finished-text":"没有更多了",offset:10},on:{load:e.onLoad},model:{value:e.checkForm.loading,callback:function(t){e.$set(e.checkForm,"loading",t)},expression:"checkForm.loading"}},[t("ul",e._l(e.checkForm.items,(function(i,s){return t("li",{key:s},[t("div",{class:[e.allCheckFlag?"checked-left-box":"check-left-box"]},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.checked,expression:"item.checked"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(i.checked)?e._i(i.checked,null)>-1:i.checked},on:{change:[function(t){var s=i.checked,c=t.target,a=!!c.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);c.checked?o<0&&e.$set(i,"checked",s.concat([n])):o>-1&&e.$set(i,"checked",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(i,"checked",a)},function(t){return t.stopPropagation(),e.selectIt(i.checked,s)}]}})]),t("div",{class:[e.allCheckFlag?"checked-right-box":"check-right-box","check-box"],on:{click:function(t){return t.preventDefault(),e.choose(i)}}},[t("div",{staticClass:"check-title"},[e._v(e._s(i.userinfo[0].turnManualName))]),t("div",{staticClass:"check-content"},e._l(i.iteminfo,(function(i,s){return t("div",[3==i.type?[t("span",{staticClass:"lableTxt"},[e._v(e._s(i.writeInfo)+":")]),0==i.content?t("span",{staticClass:"contentTxt"},[e._v("否")]):e._e(),1==i.content?t("span",{staticClass:"contentTxt"},[e._v("是")]):e._e()]:[t("span",{staticClass:"lableTxt"},[e._v(e._s(i.writeInfo)+":")]),t("span",{staticClass:"contentTxt"},[e._v(e._s(i.content))])]],2)})),0),t("div",{staticClass:"check-footer"},[t("span",[e._v(e._s(i.userinfo[0].stdInfo))]),t("span",[e._v(e._s(i.userinfo[0].createTime))])])])])})),0)])],1)],1),t("div",{staticClass:"footer-box"},[e.isChecked?t("div",{staticClass:"operation-box"},[t("div",{staticClass:"footer-left-box"},[e.checkAll?t("van-checkbox",{on:{click:e.allCheck},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("全选")]):t("van-checkbox",{on:{click:e.allNoCheck},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("取消全选")])],1),t("div",{staticClass:"footer-right-box"},[t("van-button",{staticStyle:{color:"#323232",border:"1px solid #323232"},attrs:{square:"",type:"primary"},on:{click:e.noPass}},[e._v("不通过")]),t("van-button",{attrs:{square:"",type:"primary"},on:{click:e.pass}},[e._v("通过")])],1)]):t("div",{staticClass:"all-check-box"},[t("van-button",{attrs:{square:"",type:"primary"},on:{click:e.batchCheck}},[e._v("批量审核")])],1)]),t("reason",{attrs:{"show-flag":e.show},on:{cancel:e.cancelSubmit,save:e.saveSubmit,click:function(t){return t.stopPropagation(),e.cstop.apply(null,arguments)}}})],1)},c=[],a=(i(70560),i(77387)),n=i.n(a),o=i(68934),h=i(63822),l=i(22760),r=i(8914),d=i(71038),u={data(){return{show:!1,searchValue:"",pagenum:1,pagesize:20,text:"加载中",checkForm:{isLoading:!1,loading:!1,items:[],finished:!1},checkAll:!0,allCheckFlag:!0,allChecked:!1,isChecked:!1,curIdList:[],validateList:[],check:"",noPassText:""}},filters:{},watch:{},components:{cHeader:l.Z,reason:r.Z},computed:{},methods:{...o.Z,...(0,h.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),cstop(){console.log(111)},getCheckItems(e){this.curIdList=[],this.validateList=[],e.forEach((e=>{e.checked&&(this.curIdList.push(e.iteminfo[0].id),this.validateList.push({id:e.iteminfo[0].id,createTime:e.userinfo[0].createTime}))})),this.curIdList.length>0?(1==this.check&&this.showConfirm({title:"温馨提示",msg:"是否确认通过该审核记录？",theme:"modal-confirm modal-white",cancel:function(){},ok:()=>{this.checkCase(this.check)}}),2==this.check&&this.showConfirm({title:"温馨提示",msg:"是否确认不通过该审核记录？",theme:"modal-confirm modal-white",cancel:function(){},ok:()=>{this.checkCase(this.check)}})):this.$toast("请至少选择一项")},allNoCheck(){this.curIdList=[],this.validateList=[],this.checkAll=!0,this.checkForm.items.forEach((e=>{e.checked=!1}))},allCheck(){this.allCheckFlag=!1,this.checkAll=!1,this.validateList=[],this.checkForm.items.forEach((e=>{e.checked=!0,this.validateList.push({id:e.iteminfo[0].id,createTime:e.userinfo[0].createTime})})),d.Z.validateCheck(this.validateList).then((e=>{})).catch((e=>{e.forEach((e=>{this.$nextTick((()=>{this.checkForm.items.forEach(((t,i)=>{t.iteminfo[0].id==e&&(t.checked=!1)}))}))})),this.$forceUpdate(),this.$toast("时间已过的审核项已去除勾选")}))},selectIt(e,t){this.validateList=[],e&&(this.validateList.push({id:this.checkForm.items[t].iteminfo[0].id,createTime:this.checkForm.items[t].userinfo[0].createTime}),d.Z.validateCheck(this.validateList).then((e=>{})).catch((e=>{this.$nextTick((()=>{this.checkForm.items[t].checked=!1})),this.$toast("当前审核项已过审核时间")})))},pass(){this.check=1,this.getCheckItems(this.checkForm.items)},noPass(){let e=!1;for(var t=0,i=this.checkForm.items.length;t<i;t++)if(this.checkForm.items[t].checked){e=!0;break}e?(this.check=2,this.show=!0):this.$toast("请至少选择一项")},cancelSubmit(){this.show=!1},saveSubmit(e){this.show=!1,this.noPassText=e,this.getCheckItems(this.checkForm.items)},checkCase(e){this.post("/turnManual/turnManualCheck",{command:"turnManual/turnManualCheck",sessionid:n().cookie("sid"),loginid:n().cookie("uid"),uid:n().cookie("uid"),checksuggestion:this.noPassText,checkType:e,list:this.curIdList}).done((e=>{e&&0==e.errcode&&(this.allChecked=!1,this.checkAll=!0,this.$toast("通过审核"),this.onSearch())}))},queryCheckList(){return new Promise(((e,t)=>{this.post("/turnManual/turnManualCheckList",{command:"turnManual/turnManualCheckList",sessionid:n().cookie("sid"),loginid:n().cookie("uid"),uid:n().cookie("uid"),check:0,isdisplay:1,serchInfo:this.searchValue,pagenum:this.pagenum,pagesize:this.pagesize}).done((t=>{t&&0==t.errcode&&e(t)})).fail((e=>{t(e)}))}))},onSearch(){this.pagenum=1,this.queryCheckList().then((e=>{for(var t in this.checkForm.items=[],this.checkForm.finished=!1,e.list)this.checkForm.items.push(e.list[t])}))},onCancel(){this.searchValue="",this.onSearch()},handleHistory(){this.$router.push({name:"historyCheckTeaList",query:{}})},handleCancel(){this.allCheckFlag=!0,this.isChecked=!1,this.checkAll=!0,this.allChecked=!1,this.checkForm.items.forEach((e=>{e.checked=!1}))},batchCheck(){this.isChecked=!0,this.allCheckFlag=!1},onRefresh(){console.log("cjw12138"),this.pagenum=1,this.checkForm.isLoading=!0,this.checkForm.finished=!1,this.queryCheckList().then((e=>{if(this.checkForm.items=[],this.checkForm.isLoading){this.checkForm.isLoading=!1;let i=[];for(var t in e.list)i.push(e.list[t]);this.checkForm.items=i}}))},onLoad(){this.queryCheckList().then((e=>{this.pagenum++;let t=0,i=[];for(var s in e.list)t+=1,i.push(e.list[s]);this.checkForm.items=i,this.checkForm.loading=!1,this.checkForm.items.length>=e.count&&(this.checkForm.finished=!0),t<this.pagesize&&(this.checkForm.finished=!0)}))},choose(e){this.$router.push({name:"checkTeaDetail",query:{id:e.iteminfo[0].id,name:e.userinfo[0].turnManualName,check:0,createTime:e.userinfo[0].createTime}})},back(){window.location.href="/pages/futuredoctorapp/index.html/#/wxIndex"}},mounted(){let e=this;this.registerToNative("goBack",(function(t){e.back()})),this.$route.query.predefine5&&(this.searchValue=this.$route.query.predefine5)}},k=u,m=i(1001),p=(0,m.Z)(k,s,c,!1,null,"71d86c00",null),v=p.exports},8914:function(e,t,i){i.d(t,{Z:function(){return l}});var s=function(){var e=this,t=e._self._c;return t("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.showFlag,callback:function(t){e.showFlag=t},expression:"showFlag"}},[t("div",{staticClass:"popup-box"},[t("div",{staticClass:"popup-title"},[e._v("不通过原因")]),t("div",{staticClass:"popup-content"},[t("div",{staticClass:"reason-list"},[t("van-button",{class:[0==e.type?"current":""],attrs:{plain:"",hairline:"",type:"primary"},on:{click:function(t){return e.reason(0)}}},[e._v("与事实不符")]),t("van-button",{class:[1==e.type?"current":""],attrs:{plain:"",hairline:"",type:"primary"},on:{click:function(t){return e.reason(1)}}},[e._v("填写不规范")]),t("van-button",{class:[2==e.type?"current":""],attrs:{plain:"",hairline:"",type:"primary"},on:{click:function(t){return e.reason(2)}}},[e._v("其他")])],1),t("div",{staticClass:"reason-box self-style"},[t("van-field",{attrs:{disabled:e.disabled,label:"不通过原因:",type:"textarea",placeholder:"请输入不通过理由",rows:"3",autosize:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)]),t("div",{staticClass:"popup-footer"},[t("van-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.cancelBtn}},[e._v("取消")]),t("van-button",{attrs:{plain:"",hairline:"",type:"primary"},on:{click:e.saveBtn}},[e._v("确认")])],1)])])},c=[],a={name:"noPassReason",props:{showFlag:Boolean},data(){return{message:"",disabled:!1,type:4}},methods:{reason(e){this.disabled=!0,0==e&&(this.type=e,this.message="与事实不符"),1==e&&(this.type=e,this.message="填写不规范"),2==e&&(this.type=e,this.message="",this.disabled=!1)},cancelBtn(){this.message="",this.$emit("cancel","")},saveBtn(){this.$emit("save",this.message)}}},n=a,o=i(1001),h=(0,o.Z)(n,s,c,!1,null,"3117f204",null),l=h.exports},71038:function(e,t,i){i(70560);var s=i(77387),c=i.n(s),a=i(68934);const n={validateCheck(e){return new Promise(((t,i)=>{a.Z.post("/turnManual/validateCheck",{command:"turnManual/validateCheck",sessionid:c().cookie("sid"),loginid:c().cookie("uid"),beanList:e}).done((e=>{if(e&&0==e.errcode)if(e.itemList.length>0){let t=[];e.itemList.map(((e,i)=>{let s=Object.keys(e);t.push(s[0])})),i(t)}else t(e)}))}))}};t.Z=n},88579:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=8160.4196a798.js.map