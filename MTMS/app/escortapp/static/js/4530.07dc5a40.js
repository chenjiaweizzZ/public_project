"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[4530],{62266:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(i,s){return e("li",{domProps:{innerHTML:t._s(i.txt)}})})),0)])])])])},n=[],a=(i(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((i=>{if("string"===e)i.txt=i[this.config.valueKey],t.push(i);else if("function"===e){let e=this.config.valueKey(i);i.txt=e,t.push(i)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,i)=>{e==(t||this.config.defaultVal)&&(this.activeItem=i,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,i=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=i&&(this.Y=i,this.eY=i,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let s=Math.abs((this.eY-e)/45);this.activeItem=Math.round(s),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),o=a,r=i(1001),c=(0,r.Z)(o,s,n,!1,null,"e3fc68ee",null),h=c.exports},97756:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" "+t._s(t.caseName)+" "),0==t.isInter?e("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[e("button",{staticStyle:{"font-size":"0.3rem"},on:{click:t.addCase}},[t._v("添加")])]):t._e()]),e("div",{staticClass:"finish-detail"},[e("div",[t._v(" 要求例数: "),e("span",[t._v(t._s(t.totalCount))])]),e("div",[t._v(" 已完成例数: "),e("span",[t._v(t._s(t.finishCount))])])]),e("div",{staticClass:"g-main"},[e("van-tabs",{staticClass:"reset-style",on:{change:t.onClick}},[e("van-tab",{attrs:{title:"待审核"}},[e("van-pull-refresh",{on:{refresh:function(e){return t.onRefresh(0)}},model:{value:t.checkList[0].isLoading,callback:function(e){t.$set(t.checkList[0],"isLoading",e)},expression:"checkList[0].isLoading"}},[e("van-list",{attrs:{"finished-text":"没有更多了",finished:t.checkList[0].finished,"loading-text":t.text,offset:10},on:{load:function(e){return t.onLoad(0)}},model:{value:t.checkList[0].loading,callback:function(e){t.$set(t.checkList[0],"loading",e)},expression:"checkList[0].loading"}},[e("div",{staticClass:"case-detail-list"},[e("ul",t._l(t.checkList[0].items,(function(i,s){return e("li",{key:s,on:{click:function(e){return e.stopPropagation(),t.queryDetails(i,s)},touchstart:function(e){return t.touchIn(i,s)},touchend:function(e){return t.cleartime(s)}}},[t._l(i.iteminfo,(function(i,s){return e("div",{key:s},[e("span",[t._v(t._s(i.writeInfo)+":")]),e("span",[t._v(t._s(i.content))])])})),e("div",{class:[0==i.userinfo[0].check?"":"no-pass","case-tip"]},[e("span",[t._v(t._s(i.userinfo[0].checkName))])])],2)})),0)])])],1)],1),e("van-tab",{attrs:{title:"已审核"}},[e("van-pull-refresh",{on:{refresh:function(e){return t.onRefresh(1)}},model:{value:t.checkList[1].isLoading,callback:function(e){t.$set(t.checkList[1],"isLoading",e)},expression:"checkList[1].isLoading"}},[e("van-list",{attrs:{"loading-text":t.text,"finished-text":"没有更多了",finished:t.checkList[1].finished,offset:10},on:{load:function(e){return t.onLoad(1)}},model:{value:t.checkList[1].loading,callback:function(e){t.$set(t.checkList[1],"loading",e)},expression:"checkList[1].loading"}},[e("div",{staticClass:"case-detail-list"},[e("ul",t._l(t.checkList[1].items,(function(i,s){return e("li",{key:s,on:{click:function(e){return e.stopPropagation(),t.queryDetails(i,s)}}},[t._l(i.iteminfo,(function(i,s){return e("div",{key:s},[e("span",[t._v(t._s(i.writeInfo)+":")]),e("span",[t._v(t._s(i.content))])])})),e("div",{staticClass:"case-pass case-tip"},[e("span",[t._v(t._s(i.userinfo[0].checkName))])])],2)})),0)])])],1)],1)],1)],1)],1)},n=[],a=(i(70560),i(77387)),o=i.n(a),r=i(68934),c=i(63822),h=i(22760),u=i(49931),l=i(62266),d={data(){return{isInter:this.$route.query.user,isdoctor:"",caseName:"",totalCount:"",finishCount:"",currentId:0,baseId:"",text:"加载中",checkList:[{items:[],isLoading:!1,loading:!1,error:!1,finished:!1},{items:[],isLoading:!1,loading:!1,error:!1,finished:!1}],pagenum:1,pagesize:10}},components:{cHeader:h.Z,cDatepicker:u.Z,cPicker:l.Z},computed:{...(0,c.rn)(["turnManual"])},methods:{...r.Z,...(0,c.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),queryList(t,e,i,s){let n=0==e?this.$route.query.baseId:this.$route.query.caseId;return new Promise(((e,a)=>{this.post("/turnManual/queryTurnManualDiseaseStdDetail",{command:"turnManual/queryTurnManualDiseaseStdDetail",sessionid:o().cookie("sid"),loginid:o().cookie("uid"),type:s,stdId:t,baseId:n,check:i,isdisplay:1,pagenum:this.pagenum,pagesize:this.pagesize}).done((t=>{t&&0==t.errcode&&e(t)})).fail((t=>{a(data)}))}))},onClick(t){this.currentId=t,this.pagenum=1,this.checkList[t].isLoading=!1,this.checkList[t].finished=!1,this.checkList[t].items=[]},queryDetails(t,e){let i=t.iteminfo[0].id,s=t.userinfo[0].check;this.$router.push({name:"createCaseInfo",query:{id:this.$route.query.id,type:this.$route.query.type,check:s,detailId:i}})},onRefresh(t){this.pagenum=1;const e=this.checkList[t];e.isLoading=!0,this.queryList(this.turnManual.stdId,this.$route.query.type,t,0).then((t=>{if(e.items=[],this.pagenum++,e.finished=!1,e.isLoading){for(var i in t.list)e.items.push(t.list[i]);e.isLoading=!1}}))},onLoad(t){this.queryList(this.turnManual.stdId,this.$route.query.type,t,0).then((e=>{this.pagenum++;const i=this.checkList[t];for(var s in e.list)i.items.push(e.list[s]);i.loading=!1,i.items.length>=e.count&&(i.finished=!0)}))},delcaseItem(t){this.post("/turnManual/deleteTurnManualStdItem",{command:"turnManual/deleteTurnManualStdItem",sessionid:o().cookie("sid"),loginid:o().cookie("uid"),id:t}).done((t=>{t&&0==t.errcode&&this.onClick(this.currentId)})).fail((t=>{}))},touchIn(t,e){let i=t.iteminfo[0].id;var s=this;clearInterval(this.Loop),this.Loop=setTimeout((()=>{this.showConfirm({title:"温馨提示",msg:"是否删除？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){s.delcaseItem(i)}})}),1e3)},cleartime(t){clearInterval(this.Loop)},addCase(){1==this.$route.query.validate?0==this.$route.query.type?this.$router.push({name:"createCaseInfo",query:{id:this.$route.query.id,type:this.$route.query.type,baseId:this.$route.query.baseId,businessid:this.$route.query.businessid}}):this.$router.push({name:"createCaseInfo",query:{id:this.$route.query.id,type:this.$route.query.type,baseId:this.$route.query.caseId,nameFlag:0,businessid:this.$route.query.businessid}}):this.$toast("您已不在当前科室轮转")},back(){this.$router.go(-1)}},mounted(){let t=this,e=JSON.parse(localStorage.getItem("caseDetail"));0==this.$route.query.type?(this.totalCount=e.count,this.finishCount=e.baseCount,this.caseName=this.turnManual.caseName):(this.totalCount=e.count,this.finishCount=e.alreadyCheck,this.caseName=this.turnManual.caseDetailName),this.registerToNative("goBack",(function(e){t.back()}))}},f=d,m=i(1001),p=(0,m.Z)(f,s,n,!1,null,"4a8d93dc",null),v=p.exports}}]);
//# sourceMappingURL=4530.07dc5a40.js.map