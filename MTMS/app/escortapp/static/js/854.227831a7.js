"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[854],{60854:function(t,i,s){s.r(i),s.d(i,{default:function(){return d}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"g-wrapper"},[i("c-header",[i("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[i("a",{staticClass:"header-back-btn",on:{click:function(i){return i.stopPropagation(),t.back()}}},[i("img",{attrs:{src:s(88579)}})])]),t._v(" 签名 "),i("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[i("span",{staticStyle:{"font-size":"0.3rem"},on:{click:function(i){return i.stopPropagation(),t.submit.apply(null,arguments)}}},[t._v("提交")])])]),i("iframe",{staticStyle:{display:"none"},attrs:{name:"iframe"}}),i("div",{staticClass:"g-main"},[i("ul",{staticClass:"top"},[i("li",[t._v("学员："+t._s(t.datalist.name))]),i("li",[t._v("得分："+t._s(t.datalist.score))])]),i("div",{staticClass:"signature-c"},[i("p",{staticClass:"sign-p",on:{click:t.signatureFn}},[t._v("此处签名")]),i("div",{ref:"canvas",attrs:{id:"canvas"}})]),i("div",{staticClass:"signature-btn"},[i("button",{ref:"clearCanvas",staticStyle:{"margin-left":"0.2rem"},attrs:{id:"clearCanvas"}},[t._v("清除签名")])])])],1)},e=[],n=s(22760),c=s(68934),h=(s(63822),{name:"signature",props:{datalist:{defalut(){return{}}}},data(){return{isSign:!1,url:""}},components:{cHeader:n.Z},mounted(){this.registerToNative("goBack",(function(t){this.back()})),this.$nextTick((()=>{this.lineCanvas({el:this.$refs.canvas,clearEl:this.$refs.clearCanvas,saveEl:this.$refs.saveCanvas})}))},watch:{datalist(t){console.log(t)}},methods:{...c.Z,submit(){this.isSign?this.$emit("getsubmit",this.canvas.toDataURL()):this.$toast("请留下您的签名")},save(){this.url=this.canvas.toDataURL();var t=new FormData;t.append("file",this.url),console.log(t.get("file")),$.ajax({url:"/file/upload",type:"post",data:{formdata:t},processData:!1,contentType:!1,success:function(t){console.log(t)}})},lineCanvas(t){for(var i in this.linewidth=1,this.color="#000000",this.background="#ffffff",t)this[i]=t[i];this.canvas=document.createElement("canvas"),this.el.appendChild(this.canvas),this.cxt=this.canvas.getContext("2d"),this.canvas.width=this.el.clientWidth,this.canvas.height=this.el.clientHeight,this.cxt.fillStyle=this.background,this.cxt.fillRect(0,0,this.canvas.width,this.canvas.width),this.cxt.strokeStyle=this.color,this.cxt.lineWidth=this.linewidth,this.cxt.lineCap="round",this.canvas.addEventListener("touchstart",function(t){$(".sign-p").css("display","none"),this.cxt.beginPath(),this.cxt.moveTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY-$(".signature-c").offset().top)}.bind(this),!1),this.canvas.addEventListener("touchmove",function(t){this.cxt.lineTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY-$(".signature-c").offset().top),this.isSign=!0,this.cxt.stroke()}.bind(this),!1),this.canvas.addEventListener("touchend",function(){this.cxt.closePath()}.bind(this),!1),this.clearEl.addEventListener("click",function(){this.cxt.clearRect(0,0,this.canvas.width,this.canvas.height),this.isSign=!1}.bind(this),!1)},signatureFn(t){$(".sign-p").html("")},back(){this.$emit("getInfo",!1)}}}),l=h,r=s(1001),o=(0,r.Z)(l,a,e,!1,null,"d9710f5e",null),d=o.exports},22760:function(t,i,s){s.d(i,{Z:function(){return d}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"header",attrs:{id:"header"}},[t._t("headerLeft",(function(){return[i("a",{staticClass:"header-back-btn",on:{click:function(i){return t.back()}}},[i("img",{attrs:{src:s(88579)}})])]})),i("div",{staticClass:"header-center-blank"}),i("div",{staticClass:"header-center"},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2),t._t("headerRight")],2)},e=[],n=(s(77387),s(68934)),c=s(63822),h={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,c.rn)(["loginUser"]),methods:{...(0,c.nv)(["showAlert","showLoading","hideLoading","toast"]),...n.Z,back(){this.$router.go(-1)}}},l=h,r=s(1001),o=(0,r.Z)(l,a,e,!1,null,null,null),d=o.exports},88579:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=854.227831a7.js.map