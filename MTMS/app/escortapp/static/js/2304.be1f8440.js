"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[2304],{62266:function(t,e,s){s.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(s,i){return e("li",{domProps:{innerHTML:t._s(s.txt)}})})),0)])])])])},a=[],n=(s(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((s=>{if("string"===e)s.txt=s[this.config.valueKey],t.push(s);else if("function"===e){let e=this.config.valueKey(s);s.txt=e,t.push(s)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,s)=>{e==(t||this.config.defaultVal)&&(this.activeItem=s,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,s=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=s&&(this.Y=s,this.eY=s,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let i=Math.abs((this.eY-e)/45);this.activeItem=Math.round(i),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),r=n,c=s(1001),o=(0,c.Z)(r,i,a,!1,null,"e3fc68ee",null),l=o.exports},25623:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:s(88579)}})])]),t._v(" "+t._s(t.caseName)+" "),e("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[0==t.caseCheck?[e("button",{staticStyle:{"font-size":"0.3rem"},on:{click:t.submitInfo}},[t._v("提交")])]:t._e(),2==t.caseCheck?[t.reEditFlag?t._e():e("button",{staticStyle:{"font-size":"0.3rem"},on:{click:t.reEdit}},[t._v("重新编辑")]),t.reEditFlag?e("button",{staticStyle:{"font-size":"0.3rem"},on:{click:t.submitInfo}},[t._v("提交")]):t._e()]:t._e()],2)]),e("div",{staticClass:"g-main"},[1!=t.caseCheck?e("ul",[1==t.type&&t.addOrEdit&&t.hasItemsFlag?e("li",{staticClass:"item-box",on:{click:t.selectCase}},[e("div",{staticClass:"required item-name"},[t._v(t._s(t.caseNames))]),e("div",{staticClass:"item-content"},[t._v(t._s(t.virusName))]),e("div",{staticClass:"right-arrow"})]):t._e(),t._l(t.fillList,(function(s,i){return e("li",{key:s.id,staticClass:"item-box",on:{click:function(e){return t.select(s,i)}}},[s.type?e("div",{class:[1==s.iswrite?"required":"","item-name"]},[t._v(t._s(s.writeInfo))]):t._e(),1==s.type?e("div",{staticClass:"item-content"},[t._v(t._s(t.submitArr[i].content))]):t._e(),3==s.type&&"0"==t.submitArr[i].content?e("div",{staticClass:"item-content"},[t._v("否")]):t._e(),3==s.type&&"1"==t.submitArr[i].content?e("div",{staticClass:"item-content"},[t._v("是")]):t._e(),2==s.type?e("div",{staticClass:"item-content"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitArr[i].content,expression:"submitArr[index].content"}],attrs:{placeholder:"请输入"},domProps:{value:t.submitArr[i].content},on:{input:function(e){e.target.composing||t.$set(t.submitArr[i],"content",e.target.value)}}})]):t._e(),4==s.type?e("div",{staticClass:"item-content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.submitArr[i].content,expression:"submitArr[index].content"}],attrs:{placeholder:"请输入"},domProps:{value:t.submitArr[i].content},on:{input:function(e){e.target.composing||t.$set(t.submitArr[i],"content",e.target.value)}}})]):t._e(),s.checkType?e("div",{staticClass:"item-name"},[t._v("审核意见")]):t._e(),s.checkType?e("div",{staticClass:"item-content check-tip"},[e("div",[t._v(t._s(s.checksuggestion))])]):t._e(),1==s.type||3==s.type?e("div",{staticClass:"right-arrow"}):t._e()])}))],2):e("ul",t._l(t.fillList,(function(s,i){return e("li",{key:s.id,staticClass:"item-box"},[s.type?e("div",{class:[1==s.iswrite?"required":"","item-name"]},[t._v(t._s(s.writeInfo))]):t._e(),1==s.type?e("div",{staticClass:"item-content"},[t._v(t._s(t.submitArr[i].content))]):t._e(),3==s.type&&"0"==t.submitArr[i].content?e("div",{staticClass:"item-content"},[t._v("否")]):t._e(),3==s.type&&"1"==t.submitArr[i].content?e("div",{staticClass:"item-content"},[t._v("是")]):t._e(),2==s.type?e("div",{staticClass:"item-content"},[e("span",[t._v(t._s(t.submitArr[i].content))])]):t._e(),4==s.type?e("div",{staticClass:"item-content"},[e("span",[t._v(t._s(t.submitArr[i].content))])]):t._e(),s.checkType?e("div",{staticClass:"item-name"},[t._v("审核意见")]):t._e(),s.checkType?e("div",{staticClass:"item-content check-tip"},[e("div",[t._v(t._s(s.checksuggestion))])]):t._e()])})),0)]),e("transition",{attrs:{"enter-active-class":"animated slideInRight","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.chooseCaseName,expression:"chooseCaseName"}],staticClass:"g-wrapper case-list"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){t.chooseCaseName=!1}}},[e("img",{attrs:{src:s(88579)}})])]),t._v(" 选择"+t._s(t.caseName)+" "),e("div",{attrs:{slot:"headerRight"},slot:"headerRight"})]),e("van-search",{staticClass:"search-box",attrs:{placeholder:"请输入搜索关键词","show-action":"",shape:"round"},on:{search:t.onSearch},model:{value:t.searchvalue,callback:function(e){t.searchvalue=e},expression:"searchvalue"}},[e("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])]),e("div",{staticClass:"g-main container"},[e("ul",t._l(t.allvirusList,(function(s){return e("li",{key:s.id,on:{click:function(e){return t.chooseCase(s)}}},[t._v(t._s(s.content))])})),0)])],1)]),e("cDatepicker",{attrs:{config:t.setSelectRule},on:{confirm:t.selectDates}}),e("c-picker",{attrs:{config:t.seltype},on:{confirm:t.selecttype}})],1)},a=[],n=(s(70560),s(77387)),r=s.n(n),c=s(68934),o=s(63822),l=s(22760),u=s(49931),h=s(62266),d={data(){return{caseName:"添加病例",caseNames:"",hasItemsFlag:!0,addOrEdit:!0,caseCheck:"",reEditFlag:!1,type:"",fillList:[],virusName:"",virusId:"",chooseCaseName:!1,allvirusList:[],searchvalue:"",currentIndex:"",setSelectRule:{show:!1,istime:!1,isday:!0},seltype:{show:!1,mainlist:[{id:0,name:"否"},{id:1,name:"是"}],valueKey:"name"},submitArr:[]}},components:{cHeader:l.Z,cDatepicker:u.Z,cPicker:h.Z},computed:{...(0,o.rn)(["turnManual"])},watch:{},methods:{...c.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),queryAllInfo(){this.submitArr=[],this.post("/turnManual/queryTurnStdDisease",{command:"turnManual/queryTurnStdDisease",sessionid:r().cookie("sid"),loginid:r().cookie("uid"),deptId:this.turnManual.deptId,turnManualId:this.$route.query.id}).done((t=>{t&&0==t.errcode&&(t.result.map((t=>{this.submitArr.push({iswrite:t.iswrite,itemId:t.id,content:""})})),this.fillList=t.result)})).fail((t=>{}))},editCaseInfo(){this.post("/turnManual/queryturnManualItemDetail",{command:"turnManual/queryturnManualItemDetail",sessionid:r().cookie("sid"),loginid:r().cookie("uid"),detailId:this.$route.query.detailId,check:this.$route.query.check}).done((t=>{t&&0==t.errcode&&(t.itemList.map((t=>{t.type&&this.submitArr.push({iswrite:t.iswrite,id:t.id,itemId:t.itemId,content:t.content})})),this.fillList=t.itemList)})).fail((t=>{}))},selectCase(){this.chooseCaseName=!0,this.getAllCaseName()},getAllCaseName(){this.post("/turnManual/queryTurnStdDiseaseContent",{command:"turnManual/queryTurnStdDiseaseContent",sessionid:r().cookie("sid"),loginid:r().cookie("uid"),turnTrainId:this.turnManual.turnTrainId,turnId:this.turnManual.turnId,deptId:this.turnManual.deptId,stage:this.turnManual.stage,turnManualId:this.$route.query.id,serchInfo:this.searchvalue}).done((t=>{t&&0==t.errcode&&(this.allvirusList=t.result)})).fail((t=>{}))},onSearch(){this.getAllCaseName()},chooseCase(t){this.virusName=t.content,this.virusId=t.id,this.chooseCaseName=!1},select(t,e){1!=this.caseCheck&&(this.currentIndex=e,1==t.type&&(this.setSelectRule.show=!0),3==t.type&&(this.seltype.show=!0))},selectDates(t){this.submitArr[this.currentIndex].content=t},selecttype(t){this.seltype.show=!1,this.submitArr[this.currentIndex].content=t.id},reEdit(){this.reEditFlag=!0},submitInfo(){let t=!1;if(this.addOrEdit&&1==this.type&&this.hasItemsFlag?this.submitArr.forEach((e=>{(1==e.iswrite&&0==String(e.content).trim().length||""==this.virusId)&&(t=!0)})):this.submitArr.forEach((e=>{1==e.iswrite&&0==String(e.content).trim().length&&(t=!0)})),t)this.$toast("请将必填项填写完");else{var e=this;this.showConfirm({title:"温馨提示",msg:"提交后信息不会更改，是否确认提交？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){if(e.addOrEdit){let t=0==e.type?e.$route.query.baseId:e.virusId;e.post("/turnManual/turnStdAddDisease",{command:"turnManual/turnStdAddDisease",sessionid:r().cookie("sid"),loginid:r().cookie("uid"),deptId:e.turnManual.deptId,stdId:e.turnManual.stdId,baseId:t,detailList:e.submitArr,businessId:e.$route.query.businessid}).done((t=>{t&&0==t.errcode?(e.$toast("新增成功"),e.$router.go(-1)):e.$toast(t.errdesc)})).fail((t=>{}))}else e.post("/turnManual/editTurnManualItemDetail",{command:"turnManual/editTurnManualItemDetail",sessionid:r().cookie("sid"),loginid:r().cookie("uid"),detailId:e.$route.query.detailId,check:e.$route.query.check,beanList:e.submitArr}).done((t=>{t&&0==t.errcode&&(e.$toast("编辑成功"),e.$router.go(-1))})).fail((t=>{}))}})}},back(){var t=this;1==this.caseCheck?t.$router.go(-1):this.showConfirm({title:"温馨提示",msg:"你当前操作尚未提交保存，是否确认返回？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){t.$router.go(-1)}})}},mounted(){this.type=this.$route.query.type,this.$route.query.detailId?(this.addOrEdit=!1,this.caseCheck=this.$route.query.check,this.editCaseInfo(),0==this.type?this.caseName=this.turnManual.caseName:this.caseName=this.turnManual.caseDetailName):(this.addOrEdit=!0,this.caseName="添加病例",1==this.$route.query.type&&(this.caseNames=this.$route.query.name),0==this.$route.query.nameFlag&&(this.hasItemsFlag=!1,this.caseName=this.turnManual.caseDetailName,this.virusId=this.$route.query.baseId),this.queryAllInfo())}},m=d,p=s(1001),v=(0,p.Z)(m,i,a,!1,null,"1676a6c2",null),f=v.exports}}]);
//# sourceMappingURL=2304.be1f8440.js.map