"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[9637],{85965:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"addcontent"},[e("i",{staticClass:"shade",on:{click:t.close}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"select",staticStyle:{"animation-duration":".1s"},style:{top:t.config.fixedtop,right:t.config.fixedright},attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},t._l(t.list,(function(i,s){return 1==i.isused?e("li",{on:{click:function(e){return t.select(i)}}},[t._v(" "+t._s(i.name)+" ")]):t._e()})),0)])},n=[],a={name:"addselect",props:{showAdd:{type:Boolean,default:!1},config:{default:function(){return{show:!1,label:"",fixedright:0,fixedtop:0}}},dataList:{type:Array,default:function(){return[]}}},data(){return{addButton:!1}},mounted:function(){this.addButton=this.showAdd},methods:{close(){this.config.show=!1},select(t){this.$emit("confirm",t)}},watch:{showAdd(t,e){this.addButton=t}},computed:{list(){let t=this.config.label||"";return this.dataList.length>0?(this.stopclick=!1,this.dataList.map((e=>{e.name=e[t],e.isused="fdAction_add"==e.router?this.addButton:e.isused})),this.dataList):(this.stopclick=!0,[{name:"当前暂无数据"}])}}},c=a,o=i(1001),l=(0,o.Z)(c,s,n,!1,null,"04a28040",null),h=l.exports},62266:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(i,s){return e("li",{domProps:{innerHTML:t._s(i.txt)}})})),0)])])])])},n=[],a=(i(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((i=>{if("string"===e)i.txt=i[this.config.valueKey],t.push(i);else if("function"===e){let e=this.config.valueKey(i);i.txt=e,t.push(i)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,i)=>{e==(t||this.config.defaultVal)&&(this.activeItem=i,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,i=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=i&&(this.Y=i,this.eY=i,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let s=Math.abs((this.eY-e)/45);this.activeItem=Math.round(s),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),c=a,o=i(1001),l=(0,o.Z)(c,s,n,!1,null,"e3fc68ee",null),h=l.exports},88461:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{attrs:{id:"select-group"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"shade",on:{click:function(e){t.config.show=!1}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"select",staticStyle:{"animation-duration":".5s"},style:{top:t.config.fixedvalue},attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},[e("div",{staticClass:"select-content"},[e("ul",{staticClass:"left-part"},t._l(t.list.childlist,(function(i,s){return e("li",{class:{noclick:t.stopclick,active:s==t.i},style:{"text-align":t.config.textposition},on:{click:function(e){return t.choiceleft(i.id,s)}}},[t._v(t._s(i.txt))])})),0),e("ul",{staticClass:"right-part"},[e("li",{directives:[{name:"show",rawName:"v-show",value:t.listchild.childlist&&t.listchild.childlist.length>1,expression:"listchild.childlist && listchild.childlist.length > 1"}],class:{active:t.checkedall},style:{"text-align":t.config.textposition},on:{click:t.choiceall}},[t._v("全部")]),t._l(t.listchild.childlist,(function(i,s){return e("li",{key:i.id,class:{noclick:t.stopclick,active:i.checkflag},style:{"text-align":t.config.textposition},on:{click:function(e){return t.check(i.id)}}},[t._v(" "+t._s(i.txt))])}))],2)]),e("div",{staticClass:"select-bottom"},[e("span",{on:{click:t.close}},[t._v("取消")]),e("span",{on:{click:t.select}},[t._v("确定")])])])])])},n=[],a={props:{config:{default:function(){return{show:!1,label:"",fixedvalue:0,textposition:"center"}}},dataList:{type:[Array,Object],default:function(){return{}}}},data(){return{stopclick:!1,normallist:"",listchild:[],i:-1,checkedall:!1}},mounted:function(){},methods:{close(){this.config.show=!1},choiceleft(t,e){let i=this;this.i=e,this.checkedall=!1,i.listchild=[],this.dataList.childlist.map((t=>{t.childlist.map((t=>{t.checkflag=!1}))})),this.dataList.childlist.map((e=>{e.id==t&&(i.listchild=e)}))},select(){let t=!1;this.listchild.childlist&&this.listchild.childlist.length>0&&this.listchild.childlist.map((e=>{1==e.checkflag&&(t=!0)})),1==this.checkedall||1==t?this.$emit("confirm",this.listchild):this.config.show=!1},choiceall(){this.checkedall=!this.checkedall,this.listchild.checkall="true",this.listchild.childlist.map((t=>{t.checkflag=!1}))},check(t){this.checkedall=!1,this.listchild.checkall="false",this.listchild.childlist.map((e=>{e.id==t&&(e.checkflag=1!=e.checkflag)}))}},watch:{},computed:{list(){let t=this.config.label||"";return this.dataList.childlist?(this.dataList.childlist.map(((t,e)=>{0==e&&-1==this.i&&(this.i=e,this.listchild=t)})),this.normallist=this.dataList,this.stopclick=!1,this.dataList.childlist.map(((e,i)=>{e.txt=e[t],e.childlist.map((e=>{e.txt=e[t],this.$set(e,"checkflag",!1)}))})),this.dataList):(this.stopclick=!0,[{txt:"当前暂无数据"}])}}},c=a,o=i(1001),l=(0,o.Z)(c,s,n,!1,null,"da4249de",null),h=l.exports},12053:function(t,e,i){i.r(e),i.d(e,{default:function(){return D}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),e("span",{staticClass:"deptname",on:{click:t.showPop}},[t._v(" "+t._s(t.tatistcal.deptname)+" "),[1==t.seldept.show?e("img",{attrs:{src:i(19590)}}):e("img",{attrs:{src:i(15002)}})]],2)]),e("div",{staticClass:"top-slider"},[1==t.tatistcal.systype?e("ul",{staticClass:"uulldja"},t._l(t.sliderlist,(function(i,s){return e("li",{key:s,class:{active:t.i==s},on:{click:function(e){return t.changeTab(s)}}},[t._v(t._s(i.name))])})),0):e("ul",{attrs:{uulldja:""}},t._l(t.tainee_sliderlist,(function(i,s){return e("li",{key:s,class:{active:t.i==s},on:{click:function(e){return t.changeTab(s)}}},[t._v(t._s(i.name))])})),0)]),e("div",{staticClass:"g-main"},[e("c-owner",{attrs:{code:t.i}})],1),e("c-picker",{attrs:{config:t.seldept},on:{confirm:t.selectdept}}),e("div",{staticClass:"rotationh"},[e("van-popup",{attrs:{"lazy-render":!1,"close-on-click-overlay":!1,position:"bottom"},model:{value:t.popShow,callback:function(e){t.popShow=e},expression:"popShow"}},[e("van-picker",{ref:"pick",attrs:{"show-toolbar":"",title:"请选择",columns:t.columnsc,"value-key":"name"},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1)],1),e("div",{staticClass:"rotationc"},[e("van-popup",{attrs:{"lazy-render":!1,"close-on-click-overlay":!1,position:"bottom"},model:{value:t.popShow2,callback:function(e){t.popShow2=e},expression:"popShow2"}},[e("van-nav-bar",{attrs:{title:"请选择","left-text":"取消","right-text":"确定","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),e("van-toast"),e("div",{staticClass:"popCK"},[e("div",{staticClass:"popCBox"},[e("van-sidebar",{on:{change:t.onChange},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.columns,(function(t,i){return e("van-sidebar-item",{key:i,attrs:{title:t.name}})})),1)],1),e("div",{staticClass:"popKBox"},[e("el-tree",{ref:"tree",attrs:{"show-checkbox":"","check-strictly":!0,data:t.treeList,props:t.defaultProps,"node-key":"id","default-checked-keys":t.deptnameidList,"default-expanded-keys":t.deptnameidList},on:{"check-change":t.checkClick,check:t.changetree}})],1)])],1)],1)],1)},n=[],a=i(88848),c=i(68934),o=i(63822),l=i(22760),h=i(62266),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-main"},[0==t.code||1==t.code?e("div",[e("div",{staticClass:"master-office"},[e("p",[e("span",[t._v(t._s(t.selecttime))]),e("span",{staticStyle:{color:"#3499db"},on:{click:function(e){t.monthconfig.show=!0}}},[t._v("日期")])]),0==t.code&&t.ranking?e("p",[e("span",[t._v(t._s(t.selecttime)+" 全院排名: "+t._s(t.ranking))])]):t._e(),e("div",{staticClass:"echarts-content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.code,expression:"code == 0"}],attrs:{id:"echarts-trend"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.code,expression:"code !== 0"}],attrs:{id:"echarts-rate"}})])])]):t._e(),2==t.code?e("div",{staticClass:"master-office"},[e("p",[e("span",[t._v(t._s(t.selecttime))]),e("span",{staticStyle:{color:"#3499db"},on:{click:function(e){t.monthconfig.show=!0}}},[t._v("日期")])]),t._m(0)]):t._e(),3==t.code?e("div",[e("div",{staticClass:"trend"},[e("p",[e("span"),e("span",{staticClass:"trend-select",on:{click:function(e){t.typeconfig.show=!0}}},[t._v(" "+t._s(t.trendSelect)+" ")])]),t._m(1)]),e("div",{staticClass:"rate"},[e("p",[e("span",[t._v(" "+t._s(t._f("substr")(t.currentmonth,0,4))+"年"+t._s(t._f("substr")(t.currentmonth,5,2))+"月 ")]),e("span",{staticClass:"rate-select",on:{click:function(e){t.monthconfig.show=!0}}},[e("img",{attrs:{src:i(18885),alt:""}})])]),t._m(2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.code,expression:"code !== 3"}],staticClass:"tatistical"},[e("div",{staticClass:"tatistical-improve"},[t._m(3),e("ul",[t._l(t.improvelist,(function(i,s){return e("li",[t._v(t._s(s+1)+"."+t._s(i))])})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.improvelist.length,expression:"improvelist.length == 0"}],staticStyle:{"text-align":"center"}},[t._v("当前月暂无内容")])],2)]),e("div",{staticClass:"tatistical-advice"},[e("p",[t._v("学员建议")]),e("ul",[t._l(t.advicelist,(function(i,s){return e("li",[t._v(t._s(s+1)+"."+t._s(i))])})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.advicelist.length,expression:"advicelist.length == 0"}],staticStyle:{"text-align":"center"}},[t._v("当前月暂无内容")])],2)])]),e("add-group",{attrs:{config:t.typeconfig,"data-list":t.typelist},on:{confirm:t.typeselect}}),e("c-timepicker",{attrs:{config:t.monthconfig,year:t.year,month:t.month},on:{confirm:t.timeselect}})],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts-content-plan"},[e("div",{attrs:{id:"echarts-rate-plan"}}),e("div",{attrs:{id:"echarts-trend-plan"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"trend-content"},[e("div",{attrs:{id:"echarts-trends"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"rate-content"},[e("div",{attrs:{id:"echarts-rates"}})])},function(){var t=this,e=t._self._c;return e("p",[e("span",[t._v("需要改进的地方（评分3分以下）")]),e("span",{staticClass:"show-icon"})])}],p=(i(70560),i(85965)),m=i(49931),u=i(39405),v=i.n(u),g=(i(63604),i(4358),i(89174),i(44440),{props:["code"],data(){return{dept:"",improvelist:"",advicelist:"",selecttime:"",ranking:"",currentmonth:"",trendSelect:"签到率",rateOpinion:[],rateOpinionData:[],lineXdata:[],linedata:[],typeconfig:{show:!1,label:"name",fixedtop:"2.46rem",fixedright:".1rem"},typelist:[{isused:1,name:"签到率",type:"signpercent"},{isused:1,name:"缺勤率",type:"absencepercent"},{isused:1,name:"早退率",type:"earlyleavepercent"},{isused:1,name:"迟到率",type:"latepercent"},{isused:1,name:"请假率",type:"leavepercent"}],attendancelist:"",monthconfig:{show:!1,istime:!1,custom:!0},year:[2018],month:[1,12]}},components:{cPicker:h.Z,addGroup:p.Z,cTimepicker:m.Z},watch:{code:function(t,e){let i=this;!t&&0!=t||t===e||(i.normalmonth(),1==this.tatistcal.systype?0===t||"0"===t?(i.initOffice(5),i.initOfficeAdvance(5)):1==t?(i.initTeaching(1),i.initTeachingImprove(1),i.initTeachingAdvance(1)):2==t?(i.initActionplanSis(),i.initActionplan(),i.initOfficeAdvance(6)):3==t&&(i.trendSelect=i.typelist[0].name,i.initAttendance(),i.initAttendanceRate()):0===t||"0"===t?1==this.$route.query.menutype?(i.initOffice(18),i.initOfficeAdvance(18)):(i.initOffice(8),i.initOfficeAdvance(8)):1==t?1==this.$route.query.menutype?(i.initTeaching(18),i.initTeachingImprove(18),i.initTeachingAdvance(18)):(i.initTeaching(8),i.initTeachingImprove(8),i.initTeachingAdvance(8)):2==t?(i.initActionplanSis(),i.initActionplan(),i.initOfficeAdvance(6)):3==t&&(i.trendSelect=i.typelist[0].name,i.initAttendance(),i.initAttendanceRate()))},"tatistcal.dept":function(t,e){t!==e&&(this.dept=this.tatistcal.dept,1==this.tatistcal.systype?0===this.code||"0"===this.code?(this.initOffice(5),this.initOfficeAdvance(5)):1==this.code?(this.initTeaching(1),this.initTeachingImprove(1),this.initTeachingAdvance(1)):2==this.code?(this.initActionplanSis(),this.initActionplan(),this.initOfficeAdvance(6)):3==this.code&&(this.initAttendance(),this.initAttendanceRate()):0===this.code||"0"===this.code?1==this.$route.query.menutype?(this.initOffice(18),this.initOfficeAdvance(18)):(this.initOffice(8),this.initOfficeAdvance(8)):1==this.code?1==this.$route.query.menutype?(this.initTeaching(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeaching(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):2==this.code?(this.initActionplanSis(),this.initActionplan(),this.initOfficeAdvance(6)):3==this.code&&(this.initAttendance(),this.initAttendanceRate()))}},filters:{},computed:{...(0,o.rn)(["tatistcal"])},created(){this.dept=this.tatistcal.dept,this.deptname=this.tatistcal.deptname,this.normalmonth()},mounted(){1==this.tatistcal.systype?(this.initOffice(5),this.initOfficeAdvance(5)):1==this.$route.query.menutype?(this.initTeaching(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeaching(8),this.initTeachingImprove(8),this.initTeachingAdvance(8))},methods:{...c.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),normalmonth(){let t=(new Date).getFullYear(),e=(new Date).getMonth()+1,i=e<10?"0"+e:e;this.year.push(t),t>2018&&this.yearconfig.mainlist.push(t),this.selecttime=(new Date).getFullYear()+"-"+i,this.currentmonth=(new Date).getFullYear()+"-"+i},initOffice(t){let e=this;this.post("/turnevaluate/querydeptavgscorestats",{command:"turnevaluate/querydeptavgscorestats",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),deptid:this.dept,evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype}).done((t=>{t&&0==t.errcode?(e.lineXdata=[],e.linedata=[],t.deptavgscorelist.map((t=>{e.lineXdata.push(t.month),e.linedata.push(t.avgscore)})),e.$nextTick((function(){e.drawLine("echarts-trend","科室评分趋势统计")}))):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initOfficeAdvance(t){let e=this;this.post("/turnevaluate/queryscoreanalysis",{command:"turnevaluate/queryscoreanalysis",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),deptid:this.dept,evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype}).done((t=>{t&&0==t.errcode?(t.adviselist?e.advicelist=t.adviselist:e.advicelist=[],e.improvelist=t.improveinfo,e.ranking=t.ranking):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initTeaching(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;this.post("/turnevaluate/queryscorestats",{command:"turnevaluate/queryscorestats",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,...i}).done((t=>{t&&0==t.errcode?(e.rateOpinionData=[],e.rateOpinion=[],t.scorestats.map((t=>{e.rateOpinionData.push({value:t.percent,name:t.graderange}),e.rateOpinion.push(t.graderange)})),e.$nextTick((function(){e.drawGraph("echarts-rate","带教评分比例分析")}))):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initTeachingImprove(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;this.post("/turnevaluate/queryadviselist",{command:"turnevaluate/queryadviselist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype,pagenum:"",pagepersize:"",...i}).done((t=>{t&&0==t.errcode?t.adviselist?e.advicelist=t.adviselist:e.advicelist=[]:t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initTeachingAdvance(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;this.post("/turnevaluate/queryimproveinfolist",{command:"turnevaluate/queryimproveinfolist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype,pagenum:"",pagepersize:"",...i}).done((t=>{t&&0==t.errcode?t.improveinfolist?e.improvelist=t.improveinfolist:e.improvelist=[]:t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initActionplan(){let t=this;this.post("/turnanalysismanager/actionmonthanalysispic",{command:"turnanalysismanager/actionmonthanalysispic",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),deptid:this.dept}).done((e=>{e&&0==e.errcode?(t.lineXdata=[],t.linedata=[],e.beanlist.map((e=>{t.lineXdata.push(e.yearmonth),t.linedata.push(e.actionplancount)})),t.$nextTick((function(){t.drawLine("echarts-rate-plan","近6个月教学活动数量趋势")}))):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},initActionplanSis(){let t=this;this.post("/turnanalysismanager/actionmonthsignanalysispic",{command:"turnanalysismanager/actionmonthsignanalysispic",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),deptid:this.dept,systype:this.tatistcal.systype}).done((e=>{e&&0==e.errcode?(t.lineXdata=[],t.linedata=[],e.beanlist.map((e=>{t.lineXdata.push(e.yearmonth),t.linedata.push(e.signpercent||0)})),t.$nextTick((function(){t.drawLine("echarts-trend-plan","近6个月教学活动签到率趋势")}))):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},initAttendance(){let t=this;this.post("/turnanalysismanager/workanalysispicnormal",{command:"turnanalysismanager/workanalysispicnormal",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),systype:this.tatistcal.systype,deptid:this.dept}).done((e=>{e&&0==e.errcode?(t.attendancelist=e.beanlist,t.lineXdata=[],t.linedata=[],e.beanlist.length>0&&e.beanlist.map((e=>{t.lineXdata.push(e.yearmonth),t.linedata.push(e.signpercent)})),t.$nextTick((function(){t.drawLine("echarts-trends","近六个月"+t.trendSelect+"趋势")}))):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},initAttendanceRate(){let t=this;this.post("/turnanalysismanager/monthworanalysispicnormal",{command:"turnanalysismanager/monthworanalysispicnormal",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),systype:this.tatistcal.systype,deptid:this.dept,yearmonth:this.currentmonth}).done((e=>{e&&0==e.errcode?(t.rateOpinionData=[],t.rateOpinion=[],t.rateOpinionData=[{value:e.bean.signpercent,name:"签到"},{value:e.bean.leavepercent,name:"请假"},{value:e.bean.absencepercent,name:"缺勤"},{value:e.bean.latepercent,name:"迟到"},{value:e.bean.earlyretreatpercent,name:"早退"},{value:e.bean.otherpercent,name:"其他"}],t.rateOpinion=["签到","请假","缺勤","迟到","早退","其他"],t.$nextTick((function(){t.drawGraph("echarts-rates","考勤分析")}))):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},drawGraph:function(t,e){var i=this;i.chart=v().init(document.getElementById(t)),this.chart.showLoading(),i.chart.setOption({title:{text:e,x:"center"},tooltip:{trigger:"item",show:!1,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:0,left:"center",data:i.rateOpinion,itemHeight:10,itemWidth:10,itemGap:6,textStyle:{fontSize:12}},series:[{type:"pie",center:["50%","50%"],radius:["35%","50%"],data:i.rateOpinionData,label:{normal:{formatter:"{b}：{d}%  "}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#c7f316","#38ce9b","#ebb600","#00b4f4","#f97a1c","#a550f5"]}),this.chart.hideLoading()},drawLine:function(t,e){var i=this;i.chart=v().init(document.getElementById(t));let s="",n="";"echarts-trends"==t?(s="{value}%",n="{c}%"):(s="{value}",n="{c}"),this.chart.showLoading(),i.chart.setOption({title:{text:e,left:"center"},xAxis:{type:"category",data:i.lineXdata,axisLine:{lineStyle:{color:"#666"}},axisLabel:{rotate:30,interval:0}},yAxis:[{type:"value",axisLabel:{formatter:s}}],series:[{data:i.linedata,type:"line",color:["#3499db"],itemStyle:{normal:{label:{show:!0,formatter:n}}}}]}),this.chart.hideLoading()},typeselect(t){let e=this;this.trendSelect=t.name,this.lineXdata=[],this.linedata=[],this.attendancelist.map((i=>{e.lineXdata.push(i.yearmonth),e.linedata.push(i[t.type])})),e.$nextTick((function(){e.drawLine("echarts-trends","近六个月"+e.trendSelect+"趋势")})),this.typeconfig.show=!1},timeselect(t){this.currentmonth=t,this.selecttime=t,1==this.tatistcal.systype?0==this.code?(this.initOfficeAdvance(5),this.initOffice(5)):1==this.code?(this.initTeachingImprove(1),this.initTeachingAdvance(1),this.initTeaching(1)):2==this.code?(this.initOfficeAdvance(6),this.initActionplan(),this.initActionplanSis()):3==this.code&&(this.initAttendanceRate(),this.initAttendance()):0==this.code?1==this.$route.query.menutype?(this.initOfficeAdvance(18),this.initOffice(18)):(this.initOfficeAdvance(8),this.initOffice(8)):1==this.code?1==this.$route.query.menutype?(this.initTeachingImprove(18),this.initTeachingAdvance(18),this.initTeaching(18)):(this.initTeachingImprove(8),this.initTeachingAdvance(8),this.initTeaching(8)):2==this.code?(this.initOfficeAdvance(6),this.initActionplan(),this.initActionplanSis()):3==this.code&&(this.initAttendanceRate(),this.initAttendance())}}}),f=g,y=i(1001),A=(0,y.Z)(f,d,r,!1,null,"7f174c4c",null),k=A.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("ul",{staticClass:"select"},[e("li",{staticClass:"open-deptlist",class:{active:1==t.k},on:{click:function(e){t.k=1,t.monthconfig.show=!0}}},[t._v("日期")]),e("li",{class:{active:2==t.k},on:{click:function(e){t.k=2,t.normal()}}},[t._v("默认")])]),e("div",{staticClass:"g-main"},[0==t.code||1==t.code?e("div",[t._m(0)]):t._e(),2==t.code?e("div",[t._m(1)]):t._e(),3==t.code?e("div",[t._m(2)]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.code,expression:"code !== 3"}],staticClass:"tatistical"},[e("div",{staticClass:"tatistical-improve"},[t._m(3),e("ul",[t._l(t.improvelist,(function(i,s){return e("li",[t._v(t._s(s+1)+"."+t._s(i))])})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.improvelist.length,expression:"improvelist.length == 0"}],staticStyle:{"text-align":"center"}},[t._v("当前月暂无内容")])],2)]),e("div",{staticClass:"tatistical-advice"},[e("p",[t._v("学员建议")]),e("ul",[t._l(t.advicelist,(function(i,s){return e("li",[t._v(t._s(s+1)+"."+t._s(i))])})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.advicelist.length,expression:"advicelist.length == 0"}],staticStyle:{"text-align":"center"}},[t._v("当前月暂无内容")])],2)])]),e("select-group",{attrs:{config:t.baseconfig,"data-list":t.basetree},on:{confirm:t.baseselect}}),e("c-timepicker",{attrs:{config:t.monthconfig,year:t.year,month:t.month},on:{confirm:t.timeselect}})],1)])},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts-content"},[e("div",{attrs:{id:"echarts-rate"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts-content"},[e("div",{attrs:{id:"echarts-rate-plan"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts-content-plan"},[e("div",{attrs:{id:"echarts-trends"}}),e("div",{attrs:{id:"echarts-rates"}})])},function(){var t=this,e=t._self._c;return e("p",[e("span",[t._v("需要改进的地方（评分3分以下）")]),e("span",{staticClass:"show-icon"})])}],b=i(88461),I={props:["code"],data(){return{dept:"",deptList:[],k:null,improvelist:"",advicelist:"",selecttime:"",currentmonth:"",trendSelect:"签到率",rateOpinion:[],rateOpinionData:[],lineXdata:[],linedata:[],attendancelist:"",monthconfig:{show:!1,istime:!1,custom:!0},year:[2023],month:[1,12],baseconfig:{show:!1,label:"deptname",fixedvalue:"1.52rem",textposition:"center"},basetree:[],normalId:"",hospital:"哈医大附四院"}},components:{cTimepicker:m.Z,selectGroup:b.Z},watch:{code:function(t,e){let i=this;!t&&0!=t||t===e||(i.normalmonth(),1==this.tatistcal.systype?0===t||"0"===t?(i.initOffice(5),i.initTeachingImprove(5),i.initTeachingAdvance(5)):1==t?(i.initTeaching(1),i.initTeachingImprove(1),i.initTeachingAdvance(1)):2==t?(i.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==t&&(i.initAttendanceRate(),i.initAttendanceTrend()):0===t||"0"===t?1==this.$route.query.menutype?(i.initOffice(18),i.initTeachingImprove(18),i.initTeachingAdvance(18)):(i.initOffice(8),i.initTeachingImprove(8),i.initTeachingAdvance(8)):1==t?1==this.$route.query.menutype?(i.initTeaching(18),i.initTeachingImprove(18),i.initTeachingAdvance(18)):(i.initTeaching(8),i.initTeachingImprove(8),i.initTeachingAdvance(8)):2==t?(i.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==t&&(i.initAttendanceRate(),i.initAttendanceTrend()))},"tatistcal.dept":function(t,e){t!==e&&(1==this.tatistcal.systype?0===this.code||"0"===this.code?(this.initOffice(5),this.initTeachingImprove(5),this.initTeachingAdvance(5)):1==this.code?(this.initTeaching(1),this.initTeachingImprove(1),this.initTeachingAdvance(1)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&(this.initAttendanceRate(),this.initAttendanceTrend()):0===this.code||"0"===this.code?1==this.$route.query.menutype?(this.initOffice(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initOffice(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):1==this.code?(this.initTeaching(1),1==this.$route.query.menutype?(this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeachingImprove(8),this.initTeachingAdvance(8))):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&(this.initAttendanceRate(),this.initAttendanceTrend()))}},filters:{},computed:{...(0,o.rn)(["tatistcal"])},created(){this.dept=this.tatistcal.dept,this.deptname=this.tatistcal.deptname,this.role=this.tatistcal.role,this.normalmonth(),this.initrole()},mounted(){this.tatistcal.systype=Number(this.$route.query.systype),1==this.tatistcal.systype?(this.initOffice(5),this.initTeachingImprove(5),this.initTeachingAdvance(5)):1==this.$route.query.menutype?(this.initTeaching(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeaching(8),this.initTeachingImprove(8),this.initTeachingAdvance(8))},methods:{...c.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast","setTatistical"]),normalmonth(){let t=(new Date).getFullYear()+20,e=(new Date).getMonth()+1,i=e<10?"0"+e:e;this.year.push(t),this.selecttime=(new Date).getFullYear()+"-"+i,this.currentmonth=(new Date).getFullYear()+"-"+i},initrole(){let t=this;this.post("/turnbaseinfo/querydeptnodebyuid",{command:"turnbaseinfo/querydeptnodebyuid",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid")}).done((e=>{if(e&&e.errcode)if(0==e.errcode){if(this.dept||(t.deptname=e.depttreelist[0].deptname,t.dept=e.depttreelist[0].id,t.normalId=e.depttreelist[0].id,t.setTatistical({k:"dept",v:e.depttreelist[0].id}),t.setTatistical({k:"deptname",v:t.deptname})),"hospital"!==e.depttreelist[0].deptcode){let i=[];i.push(e.depttreelist[0]),t.basetree={id:99,pid:0,deptname:t.hospital,deptlevel:null,deptcode:"hospital",childlist:i}}else t.basetree=e.depttreelist[0];0!==this.role&&1!==this.role&&("office"==e.depttreelist[0].deptcode?(t.role=0,t.setTatistical({k:"role",v:t.role})):(t.role=1,t.setTatistical({k:"role",v:t.role}))),1==this.tatistcal.systype?0==this.code?(this.initOffice(1),this.initTeachingImprove(5),this.initTeachingAdvance(5)):1==this.code?(this.initTeaching(1),this.initTeachingImprove(1),this.initTeachingAdvance(1)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate():0==this.code||1==this.code?1==this.$route.query.menutype?(this.initTeaching(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeaching(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate()}else t.toast(e.errdesc);else t.toast("系统错误，请联系管理员~")}))},initOffice(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;i.deptidlist&&i.deptidlist.length>0&&this.post("/turnevaluate/queryscorestats",{command:"turnevaluate/queryscorestats",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,...i}).done((t=>{t&&0==t.errcode?(e.rateOpinionData=[],e.rateOpinion=[],t.scorestats.map((t=>{e.rateOpinionData.push({value:t.percent,name:t.graderange}),e.rateOpinion.push(t.graderange)})),e.$nextTick((function(){e.drawGraph("echarts-rate","科室评分比例分析")}))):t.errdesc&&e.toast(t.errdesc)}))},initTeaching(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;i.deptidlist&&i.deptidlist.length>0&&this.post("/turnevaluate/queryscorestats",{command:"turnevaluate/queryscorestats",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,...i}).done((t=>{t&&0==t.errcode?(e.rateOpinionData=[],e.rateOpinion=[],t.scorestats.map((t=>{e.rateOpinionData.push({value:t.percent,name:t.graderange}),e.rateOpinion.push(t.graderange)})),e.$nextTick((function(){e.drawGraph("echarts-rate","带教评分比例分析")}))):t.errdesc&&e.toast(t.errdesc)}))},initTeachingImprove(t){let e=this,i={};if("number"===typeof this.dept){let t=[];t.push(this.dept),i.deptidlist=t}else i.deptidlist=this.dept;i.deptidlist&&i.deptidlist.length>0&&this.post("/turnevaluate/queryadviselist",{command:"turnevaluate/queryadviselist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype,pagenum:"",pagepersize:"",...i}).done((t=>{t&&0==t.errcode?t.adviselist?e.advicelist=t.adviselist:e.advicelist=[]:t.errdesc&&e.toast(t.errdesc)}))},initTeachingAdvance(t){console.log("heiheihe",t);let e=this,i={};if("number"===typeof this.tatistcal.dept){let t=[];t.push(this.tatistcal.dept),i.deptidlist=t}else i.deptidlist=this.dept;i.deptidlist&&i.deptidlist.length>0&&this.post("/turnevaluate/queryimproveinfolist",{command:"turnevaluate/queryimproveinfolist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),evaluationmonth:e.selecttime,evaluationtype:t,systype:this.tatistcal.systype,pagenum:"",pagepersize:"",...i}).done((t=>{t&&0==t.errcode?t.improveinfolist?e.improvelist=t.improveinfolist:e.improvelist=[]:t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initActionplan(){let t=this,e={};if("number"===typeof this.dept){let t=[];t.push(this.dept),e.deptidlist=t}else e.deptidlist=this.dept;e.deptidlist&&e.deptidlist.length>0&&this.post("/turnanalysismanager/actioncountmonthanalysispicadmin",{command:"turnanalysismanager/actioncountmonthanalysispicadmin",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),systype:this.tatistcal.systype,yearmonth:this.selecttime,...e}).done((e=>{e&&0==e.errcode?(t.rateOpinionData=[],t.rateOpinion=[],e.beanlist.map((e=>{t.rateOpinionData.push({value:e.count,name:e.circlename}),t.rateOpinion.push(e.circlename)})),t.$nextTick((function(){t.drawGraph("echarts-rate-plan","教学活动次数比例分析")}))):e.errdesc&&t.toast(e.errdesc)}))},initAttendanceTrend(){let t=this,e={};if("number"===typeof this.dept){let t=[];t.push(this.dept),e.deptidlist=t}else e.deptidlist=this.dept;e.deptidlist&&e.deptidlist.length>0&&this.post("/turnanalysismanager/workattendadminpic",{command:"turnanalysismanager/workattendadminpic",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),systype:this.tatistcal.systype,...e}).done((e=>{e&&0==e.errcode?(t.attendancelist=e.beanlist,t.lineXdata=[],t.linedata=[],e.beanlist.length>0&&e.beanlist.map((e=>{t.lineXdata.push(e.yearmonth),t.linedata.push(e.signpercent)})),t.$nextTick((function(){t.drawLine("echarts-trends","近六个月签到率趋势")}))):e.errdesc&&t.toast(e.errdesc)}))},initAttendanceRate(){let t=this,e={};if("number"===typeof this.dept){let t=[];t.push(this.dept),e.deptidlist=t}else e.deptidlist=this.dept;e.deptidlist&&e.deptidlist.length>0&&this.post("/turnanalysismanager/monthworanalysispicadmin",{command:"turnanalysismanager/monthworanalysispicadmin",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),systype:this.tatistcal.systype,yearmonth:this.selecttime,...e}).done((e=>{e&&0==e.errcode?(t.rateOpinionData=[],t.rateOpinion=[],t.rateOpinionData=[{value:e.bean.signpercent,name:"签到"},{value:e.bean.leavepercent,name:"请假"},{value:e.bean.absencepercent,name:"旷工"},{value:e.bean.latepercent,name:"迟到"},{value:e.bean.earlyretreatpercent,name:"早退"}],t.rateOpinion=["签到","请假","旷工","迟到","早退"],t.$nextTick((function(){t.drawGraph("echarts-rates","考勤分析")}))):e.errdesc&&t.toast(e.errdesc)}))},drawGraph:function(t,e){var i=this;i.chart=v().init(document.getElementById(t)),this.chart.showLoading(),i.chart.setOption({title:{text:e,x:"center"},tooltip:{trigger:"item",show:!1,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:0,left:"center",data:i.rateOpinion,itemHeight:10,itemWidth:10,itemGap:6,textStyle:{fontSize:12}},series:[{type:"pie",center:["50%","50%"],radius:["35%","50%"],data:i.rateOpinionData,label:{normal:{formatter:"{b}：{d}%  "}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#c7f316","#38ce9b","#ebb600","#00b4f4","#f97a1c","#a550f5"]}),this.chart.hideLoading()},drawLine:function(t,e){var i=this;i.chart=v().init(document.getElementById(t));let s="",n="";s="{value}",n="{c}",this.chart.showLoading(),i.chart.setOption({title:{text:e,left:"center"},xAxis:{type:"category",data:i.lineXdata,axisLine:{lineStyle:{color:"#666"}},axisLabel:{rotate:30,interval:0}},yAxis:[{type:"value",axisLabel:{formatter:s}}],series:[{data:i.linedata,type:"line",color:["#3499db"],itemStyle:{normal:{label:{show:!0,formatter:n}}}}]}),this.chart.hideLoading()},timeselect(t){this.currentmonth=t,this.selecttime=t,1==this.tatistcal.systype?0==this.code?(this.initOffice(5),this.initTeachingImprove(5),this.initTeachingAdvance(5)):1==this.code?(this.initTeaching(1),this.initTeachingImprove(1),this.initTeachingAdvance(1)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate():0==this.code?1==this.$route.query.menutype?(this.initOffice(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initOffice(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):1==this.code?1==this.$route.query.menutype?(this.initTeaching(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeaching(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate()},baseselect(t){let e=[];"true"==t.checkall?this.dept=t.id:t.childlist&&t.childlist.length>0&&(t.childlist.map((t=>{1==t.checkflag&&e.push(t.id)})),this.dept=e),this.setTatistical({k:"dept",v:this.dept}),this.dept=this.tatistcal.dept,this.tatistcal.systype?0==this.code?(this.initOffice(1),this.initTeachingImprove(5),this.initTeachingAdvance(5)):1==this.code?(this.initTeaching(1),this.initTeachingImprove(1),this.initTeachingAdvance(1)):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate():0==this.code?1==this.$route.query.menutype?(this.initOffice(18),this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initOffice(8),this.initTeachingImprove(8),this.initTeachingAdvance(8)):1==this.code?(this.initTeaching(1),1==this.$route.query.menutype?(this.initTeachingImprove(18),this.initTeachingAdvance(18)):(this.initTeachingImprove(8),this.initTeachingAdvance(8))):2==this.code?(this.initActionplan(),this.initTeachingImprove(6),this.initTeachingAdvance(6)):3==this.code&&this.initAttendanceRate(),this.baseconfig.show=!1},normal(){console.log(111),this.k=2;let t=(new Date).getMonth()+1,e=t<10?"0"+t:t;this.selecttime=(new Date).getFullYear()+"-"+e,this.initrole()}}},O=I,x=(0,y.Z)(O,T,w,!1,null,"d550a1ce",null),N=x.exports,L={data(){return{i:0,role:"",deptname:"",seldept:{show:!1,mainlist:[],valueKey:"deptname"},sliderlist:[{name:"科室评分"},{name:"带教评分"},{name:"教学活动"},{name:"考勤统计"}],tainee_sliderlist:[{},{name:"带教评分"},{name:"教学活动"},{name:"考勤统计"}],selecttime:"",indexList:[0,0,0],columnsc:[],popShow:!1,popShow2:!1,columns:[],oriactiveKey:0,activeKey:0,treeList:[],defaultProps:{children:"childrens",label:"name",disabled:function(t,e){return 1!=t.havePermission}},orideptnameidList:[],deptnameidList:[]}},components:{cPicker:h.Z,cHeader:l.Z,cMaster:k,cOwner:N},watch:{},filters:{},computed:{...(0,o.rn)(["tatistcal"])},created(){1==this.tatistcal.systype?this.i=0:this.i=1,this.role=this.tatistcal.role,this.deptname=this.tatistcal.deptname;let t=(new Date).getMonth()+1;this.inselecttime=(new Date).getFullYear()+"-"+t},mounted(){this.initrole(),this.getTree()},methods:{...c.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast","setTatistical"]),changeTab(t){this.i=t},back(){window.history.back()},initrole(){let t=this;this.post("/turnbaseinfo/querydeptnodebyuid",{command:"turnbaseinfo/querydeptnodebyuid",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid")}).done((e=>{e&&e.errcode?0==e.errcode?(t.seldept.mainlist=e.depttreelist,0!==this.role&&1!==this.role&&("office"==e.depttreelist[0].deptcode?(t.role=0,t.setTatistical({k:"role",v:t.role})):(t.role=1,t.setTatistical({k:"role",v:t.role})))):t.toast(e.errdesc):t.toast("系统错误，请联系管理员~")}))},selectdept(t){console.log("thissss",t),this.deptname=t.deptname,this.dept=t.id,this.setTatistical({k:"normal",v:t.id}),this.setTatistical({k:"dept",v:t.id}),this.setTatistical({k:"deptname",v:t.deptname}),3==t.deptlevel?this.role=0:this.role=1,this.setTatistical({k:"role",v:this.role}),this.seldept.show=!1},showPop(){let t=this;t.$route.query.systype,t.popShow2=!0},getTree(){let t=this;(1==t.$route.query.systype||2==t.$route.query.systype)&&t.post("/base/dept/getMyDeptTree",{showHospital:1,showNoDeptHospital:0,needBaseDept:0,hospitalId:""}).done((e=>{t.columns=e.model,t.treeList=e.model[t.$route.query.activeKey].childrens,t.deptnameidList=[t.$route.query.deptid],t.orideptnameidList=[t.$route.query.deptid],t.activeKey=t.$route.query.activeKey,t.oriactiveKey=t.$route.query.activeKey}))},onConfirm(t,e){let i=this;console.log(e),i.indexList=e,console.log(i.columnsc[e[0]].children[e[1]].children[e[2]]),i.deptname=i.columnsc[e[0]].children[e[1]].children[e[2]].name,i.deptid=i.columnsc[e[0]].children[e[1]].children[e[2]].id,this.popShow=!1;let s={deptname:i.deptname,id:i.deptid,deptlevel:i.columnsc[e[0]].children[e[1]].children[e[2]].deptlevel};console.log(s),i.selectdept(s)},onCancel(){let t=this;t.popShow=!1,console.log(this.indexList),t.$refs.pick.setColumnIndex(0,this.indexList[0]),t.$refs.pick.setColumnIndex(1,this.indexList[1]),t.$refs.pick.setColumnIndex(2,this.indexList[2])},handleNodeClick(t){console.log(t)},onChange(t){let e=this;e.treeList=e.columns[t].childrens},onClickLeft(){let t=this;t.popShow2=!1,t.activeKey=t.oriactiveKey,t.deptnameidList=t.orideptnameidList,this.$refs.tree.setCheckedKeys(t.orideptnameidList)},onClickRight(){let t=this;if(this.$refs.tree.getCheckedKeys()[0]&&this.$refs.tree.getCheckedNodes()[0]){console.log("22222222222",this.$refs.tree.getCheckedNodes()[0]),t.deptid=this.$refs.tree.getCheckedKeys()[0],t.deptname=this.$refs.tree.getCheckedNodes()[0].name,t.deptnameid=this.$refs.tree.getCheckedKeys()[0],t.deptid=this.$refs.tree.getCheckedKeys()[0],t.deptnameidList=this.$refs.tree.getCheckedKeys();let e={deptname:t.deptname,id:t.deptid,deptlevel:3};console.log("thisisobj",e),console.log(t.deptid,t.deptname),this.setTatistical({k:"normal",v:t.deptid}),this.setTatistical({k:"dept",v:t.deptid}),this.setTatistical({k:"deptname",v:t.deptname}),console.log(this.tatistcal.dept,this.tatistcal.deptname,this.tatistcal.role),t.selectdept(e),t.popShow2=!1}else(0,a.Z)({message:"请选择科室",position:"bottom"}),(0,a.Z)({message:"请选择科室",position:"bottom"}),(0,a.Z)({message:"请选择科室",position:"bottom"}),(0,a.Z)({message:"请选择科室",position:"bottom"})},checkClick(t,e,i){e&&this.$refs.tree.setCheckedKeys([t.id])},changetree(t,e){0==e.checkedKeys.length&&this.$refs.tree.setCheckedKeys([t.id])}}},R=L,C=(0,y.Z)(R,s,n,!1,null,"cea81dc8",null),D=C.exports},15002:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAUCAYAAADoZO9yAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADIWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NEMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NFMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjc3MUFDQ0IwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjc3MUFDQ0MwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5cvzW3AAABuUlEQVRIS73UMUtbYRjF8ZsUhSIdioNDB8HBQaR06VAQ3JwcWsiki5NjKTg0X0EQ/AKdOnUqdHFyc+nQIdihg0OhFAVBHaSItDT9n5uc8ObNkxhN7IEf3Pvc8z5vFi2azWYNh3gNvf9PulN31/TSgLOJvHxfdJfT0KDeei7zB6+QHxo33aG7nLqGFbwrX1u5wjLyw+OyBN3h6O6KPz7AJzgXeIp0wTgs4hyO7tTdRVp6iAM4x5hF2hmFdv2Eo7t0Z/k9Lz/GVzjfMI28d1vaoV2O7tBdnU5atif4AeczphB1h6Gz2uFot+7o6nW9JBZwBmcPE4i6g+iMzjraqd093Z5B4gV+wXkP/YVF3Yi6OuNol3ZG3YE/RFbxG84Ool5kG452aFfUK4XDzAb+wtlC1Eu9gaOz2hH1OsJh4C0cLV5H1JM1pD9cZ6Nel3DYxy6ca6wg72imb47O5J1QOOyjig9wLvEc/q5nzRx1dSbd0Vc4HGAS+3BOMd+mZ0cddaMdoXB4g0f4Aud7m6Nv6kRn+wqHQ5jBEfJopm/RmYHC4ZDmcAJHz5pF3RuV/ylHyDN8RBUv0cAdUhT/APlSFUw/IopPAAAAAElFTkSuQmCC"},18885:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozMDZEMjI2MTNFRDcxMUU3OEZGRThFMDRFNjdCQUFGNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMDZEMjI2MjNFRDcxMUU3OEZGRThFMDRFNjdCQUFGNiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMwNkQyMjVGM0VENzExRTc4RkZFOEUwNEU2N0JBQUY2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMwNkQyMjYwM0VENzExRTc4RkZFOEUwNEU2N0JBQUY2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ROy+jgAAAqhJREFUeNrsmE1IFVEUx8dXoAuzDw0i8hW5UMSNYGRBRC1ChAwKiVLBog+M2gQRilH2QW0qWokYBQoPWrSosIUEfpJBtWpVbUJbCQn2RHJR9r/xv4/D5c7oHcIZZA78uG/ePXfuf+bOPefM5NX0fPUc7A64BM6CZ56bHQe94BG4ttxBKcdJToB1oMFztwaObXIZtNY4zgN7wS6Qb/HfyLYSXHUUWCnOYRu7AN6Dt2AxJ0gs8Q6QAXu8aG0CnATf5BJvAsMxEOdRg9JSLAW2g+38/Rikudwmk/TJ+PQHkeHYSZ/+NDeRRy3tUuAxth/BOTDlc3XTbGdD3JmfxjlMU3OeBx+kJr1J0mxH5QNqsWZQD/pCCOwEX8DrAB819xioAaVS4Bqxk4LsMwljP8DDZfgtSE0pL+amw8xiXPXF/g6ameQdGIlY035Q6ydwWMefCO2uFBj7JU4E/u9NYpoquw4wVyqbAy/Ad8OvHBwWAf83eGUJ6tvAEVAoMscQyyxngadYOKQsVfU+8InHh8BLS/14m0XqII+rwDhYb/j9AWfAU9cl7vDpVxO0iePLPsVtPvu0XbCI0xo6wjyDm9l2W8otOdFWtgPCb8Dok2NkudVtzLW6NskvXnW1eIcosvjNsy0TfmVGn7Qi4Ve9VBUVJFDVho2M6rVG37iRfXaDCnDP8Bsyxqh3jQ0Wv5EwAi/yQVe7tID/zYAnoEf43QRbwFG+VirLgufglvBTY3aC03wH0qs0yLmcBU4zZi1lahlbSZCpcHKFJJkkySRJJkkySZJJVlsmyfLkJTHIJCUi5uY2iQ6UjQy6UVk5NeQ06Tv4ABzkplCfv/oZDlbqk4j+Ptgissx9KVDFrS5wnQ5tEUeXLh1LZRy8AerAGz6TK21Zzl1HLf/srwADAIqGr7nYD0lLAAAAAElFTkSuQmCC"},19590:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAUCAYAAADoZO9yAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADIWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NEMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NFMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjc3MUFDQ0IwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjc3MUFDQ0MwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5cvzW3AAABr0lEQVRIS7XUvyvtcRzHcYfckgwyGAzKYJBkMShlM92FTCwmo5SBf0Ep/4DJZGQx2Sx3uMPp3uEOd1ASpTBIEjmer+85L33Px/t7HByvetT3vL/vH99BSpVKpe0LGcc+njGHMj4XfcgnDeECjp5Vi3rfFRab0I//SKOa3kUzDYXFd/TgN5yTGkfv1BPNFgqLDfzAEZxLDNfo2VGPeqMdobBYoB17cG4xAb/Xs2qOejWT31EoLBbYhvOAGaQ9qumdo5m0JxQWA+twnrGAqE8WoR5Hs1FfnbCYWEJ+8Sqivrw1OJrVjqjvVVjM+YlHOJuI+iJbcLRDu6K+TFismcQdnF1k/4mbpF7NONqlnVFv4YeM4ArOIToR9TaiGc062qndb3rfFDCAUzi/0I2otxma1Q5Hu3Wjrq/uB3rxF84/9CHt+yjt0C5HN3TrtSff3IVjOGcYRL7nK7TrHI5u6Wb23k0dOIBzjVH4fauM4QaObup29iH6696Bc48ppEtaZRq64eh2SS82sp/VPGEW6XCr6YZuORsqlqvPWZaRDn0X3XLKKszjD1aQNn833eR2Zf4F8EEWTAoG/0kAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=9637.560d0b5f.js.map