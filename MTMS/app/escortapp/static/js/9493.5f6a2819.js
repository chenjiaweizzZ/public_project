"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[9493],{85965:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"addcontent"},[e("i",{staticClass:"shade",on:{click:t.close}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"select",staticStyle:{"animation-duration":".1s"},style:{top:t.config.fixedtop,right:t.config.fixedright},attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},t._l(t.list,(function(i,s){return 1==i.isused?e("li",{on:{click:function(e){return t.select(i)}}},[t._v(" "+t._s(i.name)+" ")]):t._e()})),0)])},a=[],n={name:"addselect",props:{showAdd:{type:Boolean,default:!1},config:{default:function(){return{show:!1,label:"",fixedright:0,fixedtop:0}}},dataList:{type:Array,default:function(){return[]}}},data(){return{addButton:!1}},mounted:function(){this.addButton=this.showAdd},methods:{close(){this.config.show=!1},select(t){this.$emit("confirm",t)}},watch:{showAdd(t,e){this.addButton=t}},computed:{list(){let t=this.config.label||"";return this.dataList.length>0?(this.stopclick=!1,this.dataList.map((e=>{e.name=e[t],e.isused="fdAction_add"==e.router?this.addButton:e.isused})),this.dataList):(this.stopclick=!0,[{name:"当前暂无数据"}])}}},l=n,o=i(1001),r=(0,o.Z)(l,s,a,!1,null,"04a28040",null),c=r.exports},62266:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(i,s){return e("li",{domProps:{innerHTML:t._s(i.txt)}})})),0)])])])])},a=[],n=(i(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((i=>{if("string"===e)i.txt=i[this.config.valueKey],t.push(i);else if("function"===e){let e=this.config.valueKey(i);i.txt=e,t.push(i)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,i)=>{e==(t||this.config.defaultVal)&&(this.activeItem=i,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,i=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=i&&(this.Y=i,this.eY=i,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let s=Math.abs((this.eY-e)/45);this.activeItem=Math.round(s),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),l=n,o=i(1001),r=(0,o.Z)(l,s,a,!1,null,"e3fc68ee",null),c=r.exports},30908:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.btn.active,expression:"btn.active"}]},[t._t("default")],2)},a=[],n={props:{defaultCls:{type:String,default:"tab"},title:{type:String,require:!0},active:{type:Boolean,default:!1},className:{type:String,default:""},data:{},bus:{}},data(){return{btn:{title:"",active:!1}}},watch:{title:function(t){this.btn.title=t}},created(){this.btn.title=this.title,this.btn.active=!!this.active,this.btn.data=this.data},mounted(){this.bus.$emit("addtabbtn",this.btn)},computed:{}},l=n,o=i(1001),r=(0,o.Z)(l,s,a,!1,null,null,null),c=r.exports},53003:function(t,e,i){i.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabs-container",class:{"g-wrapper":"pin"===t.mode}},[e("div",{staticClass:"tabs",class:t.className},t._l(t.tabBtns,(function(i,s){return e("div",{staticClass:"tab",class:{active:i.active},attrs:{tapmode:""},on:{click:function(e){return t.activeTab(s)}}},[e("label",[t._v(t._s(i.title))]),s<=0?[e("div",{staticClass:"tab-current-bg"})]:t._e()],2)})),0),e("div",{staticClass:"tabs-content",class:t.contentclass},[t._t("default")],2)])},a=[],n=(i(70560),i(77387)),l=i.n(n),o={props:{active:{type:Number,default:0},type:{type:String,require:!0},shape:{type:String,default:""},className:{type:String,default:""},contentClassName:{type:String,default:""},bus:{},mode:{type:String,default:""}},data(){return{tabBtns:[],activeSS:this.active}},events:{},computed:{contentclass:function(){return this.contentClassName+" "+("pin"===this.mode?"g-main":"")}},components:{},created(){let t=!0;this.bus.$on("addtabbtn",(e=>{this.tabBtns.push(e);for(let t=0;t<this.tabBtns.length;t++)this.tabBtns[t].active&&(this.activeSS=t);t&&0===this.activeSS&&(t=!1,this.$emit("change-tab",this.tabBtns[0])),this.$nextTick((function(){this.moveBg(this.activeSS)}))}))},mounted(){},watch:{activeSS:function(t,e){console.log(t,789),this.moveBg(t),this.$emit("change-tab",this.tabBtns[t])}},methods:{activeTab:function(t){this.activeSS=t;for(let e=0;e<this.tabBtns.length;e++)this.tabBtns[e].active=t===e},moveBg(t){let e=l()(this.$el),i=e.find(".tabs"),s=i.find(`.tab:eq(${t})`),a=i.find(".tab-current-bg"),n=s.find("label"),o=a.closest(".tab").offset(),r=n.offset(),c=(r&&r.left||0)-(o&&o.left||0);a.css({width:n.outerWidth(),"-webkit-transform":"translate3d("+c+"px,0,0)",transform:"translate3d("+c+"px,0,0)"})}}},r=o,c=i(1001),d=(0,c.Z)(r,s,a,!1,null,null,null),u=d.exports},39493:function(t,e,i){i.r(e),i.d(e,{default:function(){return et}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" 统计 "),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.istemporarysave&&t.isshow&&1==t.cansubmit,expression:" istemporarysave == 0  && isshow && cansubmit == 1 "}],attrs:{slot:"headerRight"},on:{click:function(e){t.submitsaveflag=1,t.submit()}},slot:"headerRight"},[e("span",[t._v("提交")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.istemporarysave&&t.isshow&&1==t.cansubmit,expression:" istemporarysave == 1  && isshow && cansubmit == 1"}],attrs:{slot:"headerRight"},on:{click:function(e){t.submitconfig.show=!0}},slot:"headerRight"},[e("img",{staticStyle:{width:"25px",height:"25px"},attrs:{src:i(57501)}})])]),e("add-group",{attrs:{config:t.submitconfig,"data-list":t.submitlist},on:{confirm:t.submitselect}}),e("c-tabs",{attrs:{bus:t.bus},on:{"change-tab":t.changeTab}},[e("c-tab",{attrs:{title:"签到",active:1==t.type,bus:t.bus,data:"1"}}),e("c-tab",{attrs:{title:"现场记录",active:2==t.type,bus:t.bus,data:"2"}}),e("c-tab",{attrs:{title:"意见反馈",active:3==t.type,bus:t.bus,data:"3"}})],1),e("div",{staticClass:"g-main"},[1==t.type?e("div",[e("census-signin",{attrs:{active:1==t.type}})],1):t._e(),2==t.type?e("div",[e("census-record",{attrs:{active:2==t.type,refs:t.uploadpiclist,cansubmit:t.cansubmit,issubmit:t.submitok},on:{getlist:t.getimages,getremark:t.getremark,caseinfo:t.getcaseinfo,maindiagnosis:t.getmaindiagnosis,bedno:t.getbedno,inpatientno:t.getinpatientno,maxrole:t.maxrole,ckkey:t.chuketypekey,projectname:t.getpjname}})],1):t._e(),3==t.type?e("div",[e("census-tickling",{attrs:{active:3==t.type}})],1):t._e()])],1)},a=[],n=(i(70560),i(3032)),l=i(68934),o=i(22760),r=i(84622),c=i(85965),d=i(30908),u=i(53003),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-main"},[[e("div",{staticClass:"census-content"},[t._m(0),e("div",[e("ul",[e("li",[t._v("签到率："+t._s(t.signinfo.signpercent||0)+"%")]),e("li",[t._v("应到人数："+t._s(t.signinfo.signnormalcount))]),e("li",[t._v("实到人数："+t._s(t.signinfo.signincount))]),e("li",[t._v("缺勤人数："+t._s(t.signinfo.signabsencecount))]),e("li",[t._v("请假人数："+t._s(t.signinfo.signleavecount))]),e("li",[t._v("计划外签到人数："+t._s(t.signinfo.signoutcount))])])])])],e("div",{staticClass:"info"},[e("p",[t._v(" 参与人员 "),e("img",{staticClass:"search",attrs:{src:i(17561)},on:{click:function(e){t.showsearch=!0}}})]),e("ul",{staticClass:"getinfo"},[e("li",[e("span",{class:{active:0==t.i},on:{click:function(e){t.i=0,t.list=t.signinfo.signinlist}}},[t._v("已签到("+t._s(t.signinfo.signinlist&&t.signinfo.signinlist.length)+")")])]),e("li",[e("span",{class:{active:1==t.i},on:{click:function(e){t.i=1,t.list=t.signinfo.notsignlist}}},[t._v("未签到("+t._s(t.signinfo.notsignlist&&t.signinfo.notsignlist.length)+")")])]),e("li",[e("span",{class:{active:2==t.i},on:{click:function(e){t.i=2,t.list=t.signinfo.signoutlist}}},[t._v("计划外签到("+t._s(t.signinfo.signoutlist&&t.signinfo.signoutlist.length)+")")])])]),e("ul",{staticClass:"stu-list"},[t._l(t.list,(function(i,s){return t.list&&t.list.length>0?e("li",{class:{choice:1==t.signinfo.changestatusflag,nochoice:0==t.signinfo.changestatusflag},on:{click:function(e){t.stusts.show=!0,t.uid=i.uid}}},[e("span",[t._v(t._s(i.uname))]),e("span",[t._v(t._s(i.username))]),e("span",[t._v(t._s(i.statusstr))])]):t._e()})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"list.length == 0"}]},[e("span",[t._v(" 暂无内容 ")])])],2)]),e("c-picker",{attrs:{config:t.stusts},on:{confirm:t.selectstusu}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showsearch,expression:"showsearch"}],staticClass:"search-content g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){t.showsearch=!1}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" 参与人员 ")]),e("div",{staticClass:"search-icon"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchname,expression:"searchname"}],attrs:{type:"text",placeholder:"请输入姓名模糊搜索"},domProps:{value:t.searchname},on:{input:function(e){e.target.composing||(t.searchname=e.target.value)}}}),e("i",{on:{click:function(e){return t.searchstudent()}}})]),e("div",{staticClass:"g-main"},[e("ul",{staticClass:"stu-list"},[t._l(t.searchlist,(function(i,s){return t.searchlist&&t.searchlist.length>0?e("li",{class:{choice:1==t.signinfo.changestatusflag,nochoice:0==t.signinfo.changestatusflag},on:{click:function(e){t.stusts.show=!0,t.uid=i.id}}},[e("span",[t._v(t._s(i.uname||i.name))]),e("span",[t._v(t._s(i.username))]),e("span",[t._v(t._s(i.statusstr))])]):t._e()})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.searchlist.length,expression:"searchlist.length == 0"}]},[e("span",[t._v(" 暂无内容 ")])])],2)])],1)],2)},p=[function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"echart"}})])}],m=i(63822),f=i(62266),g=i(39405),v=i.n(g),b=(i(63604),i(4358),i(89174),{props:["active"],data(){return{detailid:"",opinion:["签到人数","缺勤人数"],opinionData:"",signinfo:"",i:0,list:"",stusts:{show:!1,mainlist:[{name:"已签到",status:10},{name:"请假",status:2},{name:"缺勤",status:1}],valueKey:"name"},searchlist:"",showsearch:!1,searchname:""}},components:{cPicker:f.Z,cHeader:o.Z},watch:{active:function(t,e){t&&this.init()}},filters:{rate:function(t){return Number(t).toFixed(2)}},created(){this.detailid=this.$route.query.id},mounted(){this.init()},methods:{...l.Z,...(0,m.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),init(){let t=this;this.post("/actionplan/signinfo",{command:"actionplan/signinfo",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),actionplanid:t.detailid}).done((e=>{t.signinfo="",t.signinfo=e.bean,t.opinionData="",t.opinionData=[{value:e.bean.signpercent||0,name:"签到率"},{value:100-Number(e.bean.signpercent),name:"缺勤率"}],t.list=0==t.i?e.bean.signinlist:1==t.i?e.bean.notsignlist:2==t.i?e.bean.signoutlist:e.bean.signinlist,t.$nextTick((function(){t.drawGraph("echart")}))}))},drawGraph:function(t){var e=this;e.chart=v().init(document.getElementById(t)),this.chart.showLoading(),e.chart.setOption({title:{text:"签到情况",x:"center"},tooltip:{trigger:"item",show:!1,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:10,left:"center",data:["签到率","缺勤率"],itemHeight:10,itemWidth:10,itemGap:6,textStyle:{fontSize:12}},series:[{type:"pie",center:["50%","50%"],radius:[0,"70%"],data:e.opinionData,label:{normal:{position:"inner",formatter:"{d}%"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#00b4f4","#f7c416"]}),this.chart.hideLoading()},selectstusu(t){let e=this;this.post("/actionplan/updatesign",{command:"actionplan/updatesign",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanid:e.detailid,uid:e.uid,status:t.status}).done((t=>{t&&0==t.errcode?(e.toast("修改成功"),e.stusts.show=!1,1==e.showsearch?e.searchstudent():e.init()):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},searchstudent(){let t=this;""!=t.searchname?(this.searchlist="",this.post("/actionplanbase/getactionplanuser",{command:"actionplanbase/getactionplanuser",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanid:t.detailid,name:t.searchname}).done((e=>{e&&0==e.errcode?t.searchlist=e.beanlist:e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))):t.toast("请输入搜索内容")}}}),y=b,w=i(1001),k=(0,w.Z)(y,h,p,!1,null,"22d14964",null),x=k.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-main"},[0==t.cansubmit&&t.notshow?e("no-content"):e("div",[1==t.ckexamshowflag?e("div",[e("ul",{staticClass:"main"},[e("li",{on:{click:function(e){1==t.cansubmit&&(t.seltype.show=!0)}}},[e("label",[e("span",{staticClass:"red"},[t._v("*")]),t._v("出科考核类型 : ")]),e("span",{staticClass:"choice"},[t._v(t._s(t.typename.name))])]),e("li",{directives:[{name:"show",rawName:"v-show",value:1==t.typename.order,expression:"typename.order == 1 "}]},[e("label",[e("span",{staticClass:"red"},[t._v("*")]),t._v("考核项目 : ")]),e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.projectname,expression:"projectname"}],attrs:{maxlength:"99",type:"text",placeholder:"请输入考核项目",autofocus:"",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.projectname},on:{input:function(e){e.target.composing||(t.projectname=e.target.value)}}})])]),e("li",{on:{click:function(e){t.selectteacher.show=!0}}},[e("label",[t._v("考核老师 : ")]),t._v(" "),e("span",{staticClass:"choice"},[t._v(t._s(t.actiondetail.speakerlist.length)+"人")])]),e("li",{on:{click:function(e){t.selectDoctor.show=!0}}},[e("label",[t._v("被考核学员 : ")]),t._v(" "),e("span",{staticClass:"choice"},[t._v(t._s(t.actiondetail.attendercount)+"人")])]),e("li",[e("label",[t._v("考核时间 : ")]),t._v(" "+t._s(t.actiondetail.starttimestr)+" - "+t._s(t.actiondetail.endtimestr)+" ")]),e("li",[e("label",[t._v("考核地点 : ")]),t._v(" "+t._s(t.actiondetail.place)+" ")]),e("li",[e("p",[t._v("成绩汇总表")]),1==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:4,uploadIndex:4,uploadflag:t.uploadflag,newtype:t.newtype},on:{getFilelist:t.getFilelist}}):t._e(),0==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:4,uploadIndex:4,uploadflag:t.uploadflag,newtype:t.newtype,isupload:!1,isuploadflag:!1},on:{getFilelist:t.getFilelist}}):t._e()],1),e("li",[1==t.typename.order?e("p",[t._v("技能考核评分原始表")]):e("p",[t._v("综合面对面考核评分原始表")]),1==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:5,uploadIndex:5,uploadflag:t.uploadflag,newtype:t.newtype},on:{getFilelist:t.getFilelist}}):t._e(),0==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:5,uploadIndex:5,uploadflag:t.uploadflag,newtype:t.newtype,isupload:!1,isuploadflag:!1},on:{getFilelist:t.getFilelist}}):t._e()],1),e("li",[1==t.typename.order?e("p",[t._v("技能考核现场图片")]):e("p",[t._v("综合面对面考核现场图片")]),1==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:6,uploadIndex:6,uploadflag:t.uploadflag,newtype:t.newtype},on:{getFilelist:t.getFilelist}}):t._e(),0==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:6,uploadIndex:6,uploadflag:t.uploadflag,newtype:t.newtype,isupload:!1,isuploadflag:!1},on:{getFilelist:t.getFilelist}}):t._e()],1),e("li",[e("div",{staticClass:"remark"},[e("p",[e("span",{staticClass:"red"}),t._v("活动纪要：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{cols:"30",maxLength:"180",placeholder:"请输入现场记录",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.remark},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])])]):e("div",{staticClass:"seance"},[0!=t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:2,uploadIndex:2,uploadflag:t.uploadflag,newtype:t.newtype},on:{getFilelist:t.getFilelist}}):t._e(),0==t.cansubmit?e("div",[e("p",[t._v("现场图片：")]),e("div",[e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:2,uploadIndex:2,uploadflag:t.uploadflag,newtype:t.newtype,isupload:!1,isuploadflag:!1},on:{getFilelist:t.getFilelist}})],1)]):t._e(),e("div",{staticClass:"remark"},[e("p",{directives:[{name:"show",rawName:"v-show",value:0!=t.cansubmit,expression:"cansubmit != 0"}]},[e("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("请注意：上传的图片中必须包含主讲的PPT和主讲人，至少上传一张图片。")]),e("p",["小讲课"!==t.actiondetail.typename?e("span",{staticClass:"red"}):t._e(),t._v("活动纪要：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{cols:"30",maxLength:"180",placeholder:"请输入现场记录",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.remark},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.remark=e.target.value)}}})]),e("s",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"shade",on:{click:function(e){t.nowurl=" ",t.show=!1}}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.caseinfoshowflag,expression:"caseinfoshowflag == 1"}],staticClass:"case"},[e("p",[t._v("病例资料简介（若活动为病例讨论和教学查房，请填写以下信息）")]),e("ul",[e("li",[e("label",[e("span",{staticClass:"red"},[t._v("*")]),t._v("住院号：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inpatientno,expression:"inpatientno"}],attrs:{type:"text",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.inpatientno},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.inpatientno=e.target.value)}}})]),e("li",[e("label",[e("span",{staticClass:"red"},[t._v("*")]),t._v("床号：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.bedno,expression:"bedno"}],attrs:{type:"text",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.bedno},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.bedno=e.target.value)}}})]),e("li",[e("label",[e("span",{staticClass:"red"},[t._v("*")]),t._v("主要诊断：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.maindiagnosis,expression:"maindiagnosis"}],attrs:{type:"text",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.maindiagnosis},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.maindiagnosis=e.target.value)}}})])]),e("p",[e("span",{staticClass:"red"},[t._v("*")]),t._v("病情简介")]),e("div",{staticClass:"text-bottom remark"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.caseinfo,expression:"caseinfo"}],attrs:{cols:"30",placeholder:"请输入主要讨论记录及住院医发言",disabled:1!=t.cansubmit&&"disabled"},domProps:{value:t.caseinfo},on:{focus:t.textareaFocus,blur:t.textareaBlur,input:function(e){e.target.composing||(t.caseinfo=e.target.value)}}}),0!=t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:3,uploadIndex:3}}):t._e(),0==t.cansubmit?e("vue-cuploader",{staticClass:"add_picture",attrs:{imgList:t.filelist,fdfsurl:t.fdfsurl,type:3,uploadIndex:3,isupload:!1,isuploadflag:!1}}):t._e()],1)]),e("c-modal",{attrs:{config:t.selectteacher}},[e("div",{staticClass:"flex-item class-sel-list"},[e("div",{staticClass:"list info-list list-inner"},[e("ul",{staticClass:"doctorupdata"},t._l(t.actiondetail.speakerlist,(function(i,s){return e("li",[e("span",[[t._v(" "+t._s(i.uname)+" ")]],2)])})),0)])])]),e("c-modal",{attrs:{config:t.selectDoctor}},[e("div",{staticClass:"flex-item class-sel-list"},[e("div",{staticClass:"list info-list list-inner"},[e("ul",{staticClass:"doctorupdata"},[t._l(t.actiondetail.attendinfolist,(function(i,s){return"hospital"!=t.actiondetail.actionplanlevel?e("li",[e("span",[[t._v(" "+t._s(i.attendbusinfo)+" ")]],2)]):t._e()})),"hospital"==t.actiondetail.actionplanlevel?e("li",[t._v(" "+t._s(t.actiondetail.attendercount)+"人 ")]):t._e()],2)])])])],1),e("t-picker",{attrs:{config:t.seltype},on:{confirm:t.selecttype}})],1)},_=[],C=i(77387),I=i.n(C),N=i(93830),L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vue-uploader"},[t.sliderVisible?e("vue-cslider",{attrs:{filelist:t.fileItemList,fdfsurl:t.fdfsurl,index:t.index,typeL:t.typeL},on:{getSlider:t.getSlider}}):t._e(),e("div",{staticClass:"upload"},[e("div",{staticClass:"imglist"},[t._l(t.fileItemList,(function(i,s){return i.type==t.type?e("div",{staticClass:"imgitem",on:{click:function(e){return t.deletepic(i.fileurl,s,t.type)}}},[e("img",{staticClass:"photos",attrs:{src:t.fdfsurl+i.fileurl}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.isupload,expression:"isupload"}],staticClass:"del",on:{click:function(e){return e.stopPropagation(),t.deleteitems(i.fileurl)}}})]):t._e()})),t.fileItemList.length<9?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isuploadflag&&t.isupload&&t.type==t.type,expression:"isuploadflag&&isupload&&type==type"}],on:{click:function(e){return t.uploadimg(t.uploadIndex)}}},[t._m(0)]):t._e()],2)])],1)},Z=[function(){var t=this,e=t._self._c;return e("div",[e("i",{staticClass:"icon"})])}],B=function(){var t=this,e=t._self._c;return e("div",{ref:"canvas",attrs:{id:"canvas"},on:{click:t.cancelPic}},[e("ul",{attrs:{id:"outer"}},t._l(t.filelist,(function(i,s){return i.type==t.typeL?e("li",[e("img",{attrs:{src:t.fdfsurl+i.fileurl,alt:""}})]):t._e()})),0)])},S=[],Y={name:"vue_slide",props:{filelist:{type:Array,default(){return[]}},fdfsurl:{type:String,default:"http://"},sliderVisible:{type:Boolean,default:!1},index:{default:0},typeL:{type:Number,default:2}},data(){return{wrap:"",radio:"",scaleW:"",idx:0,isSlide:!1}},mounted(){this.slider()},components:{},watch:{filelist(t,e){console.log(e),console.log(t),this.filelist=t},typeL(t,e){console.log(e),console.log(t)}},methods:{slider(t){this.init(),this.renderDom(),this.bindDOM()},cancelPic(){this.$emit("getSlider",!1)},init(){this.radio=window.innerHeight/window.innerWidth,this.scaleW=window.innerWidth,this.idx=0,this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer");let t=this.outer.getElementsByTagName("li"),e=t.length;for(let i=0;i<e;i++)t[i].style.width=window.innerWidth+"px",t[i].style.webkitTransform="translate3d("+i*this.scaleW+"px, 0, 0)",t[i].style.transform="translate3d("+i*this.scaleW+"px, 0, 0)",t[i].style.MozTransform="translate3d("+i*this.scaleW+"px, 0, 0)"},renderDom(){this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer"),this.outer.style.width=window.innerWidth+"px",this.moveIndex(this.index)},moveIndex(t){let e=this;this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer"),e.idx=t;let i=this.filelist.length,s=this.outer.getElementsByTagName("li");for(let a=0;a<i;a++)s[a]&&(s[a].style.webkitTransform="translate3d("+(a-e.idx)*e.scaleW+"px, 0, 0)"),s[a]&&(s[a].style.transform="translate3d("+(a-e.idx)*e.scaleW+"px, 0, 0)")},goIndex(t){let e,i=this.outer.getElementsByTagName("li"),s=i.length;"number"==typeof t?e=t:"string"==typeof t&&(e=this.idx+1*t),e>s-1?e=s-1:e<0&&(e=0),this.idx=e,i[e].style.webkitTransition="-webkit-transform 0.2s ease-out",i[e-1]&&(i[e-1].style.webkitTransition="-webkit-transform 0.2s ease-out"),i[e+1]&&(i[e+1].style.webkitTransition="-webkit-transform 0.2s ease-out"),i[e].style.transition="-webkit-transform 0.2s ease-out",i[e-1]&&(i[e-1].style.transition="-webkit-transform 0.2s ease-out"),i[e+1]&&(i[e+1].style.transition="-webkit-transform 0.2s ease-out"),i[e].style.webkitTransform="translate3d(0,0,0)",i[e-1]&&(i[e-1].style.webkitTransform="translate3d(-"+this.scaleW+"px,0,0)"),i[e+1]&&(i[e+1].style.webkitTransform="translate3d(+"+this.scaleW+"px,0,0)"),i[e].style.transform="translate3d(0,0,0)",i[e-1]&&(i[e-1].style.transform="translate3d(-"+this.scaleW+"px,0,0)"),i[e+1]&&(i[e+1].style.transform="translate3d(+"+this.scaleW+"px,0,0)")},bindDOM(){let t=this,e=function(e){t.startTime=1*new Date,t.startX=e.touches[0].pageX,t.offsetX=0;let i=e.target;while("LI"!=i.nodeName&&"BODY"!=i.nodeName)i=i.parentNode;t.target=i},i=function(e){t.isSlide=!0,t.offsetX=e.targetTouches[0].pageX-t.startX;let i=t.outer.getElementsByTagName("li"),s=t.idx-1,a=s+3;for(s;s<a;s++)i[s]&&(i[s].style.webkitTransition="-webkit-transform 0s ease-out"),i[s]&&(i[s].style.transition="-webkit-transform 0s ease-out"),i[s]&&(i[s].style.webkitTransform="translate3d("+((s-t.idx)*t.scaleW+t.offsetX)+"px, 0, 0)"),i[s]&&(i[s].style.transform="translate3d("+((s-t.idx)*t.scaleW+t.offsetX)+"px, 0, 0)")},s=function(e){let i=t.scaleW/6,s=1*new Date;t.outer.getElementsByTagName("li");s-t.startTime>300?t.offsetX>=i?t.goIndex("-1"):t.offsetX<0&&t.offsetX<-i?t.goIndex("1"):t.goIndex("0"):t.offsetX>50?t.goIndex("-1"):t.offsetX<-50?t.goIndex("+1"):t.goIndex("0")};this.outer.addEventListener("touchstart",e),this.outer.addEventListener("touchmove",i),this.outer.addEventListener("touchend",s)}}},D=Y,E=(0,w.Z)(D,B,S,!1,null,"bd36eec0",null),R=E.exports,T={name:"vue-cupload",props:{hehe:{},fdfsurl:{type:String,default:"http://"},isupload:{type:Boolean,default:!0},imgList:{type:Array,default(){return[]}},imgMax:{type:Number,default:9},type:{type:Number,default:2},uploadIndex:{type:Number,default:1},uploadflag:{default:1},newtype:{},isuploadflag:{type:Boolean,default:!0}},data(){return{isWeixin:!1,size:0,filelist:this.imgList,show:!1,nowurl:"",picShow:!1,sliderVisible:!1,typeL:"",fileItemList:[],index:""}},components:{vueCslider:R},methods:{...l.Z,...(0,m.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),getSlider(t){this.sliderVisible=t},handClick(){},callback(){},uploadimg(t){1==this.uploadflag?1==t?this.invokeNative("TakeAndUploadPhoto",{imgMax:this.imgMax,currentImg:this.filelist.length},this.geturl):this.invokeNative("TakeAndUploadPhoto",{imgMax:this.imgMax,currentImg:this.filelist.length},this.geturlcase):2==this.uploadflag?this.toast("当前计划尚未到记录时间~"):3==this.uploadflag&&this.toast("当前计划已超过记录时间~")},imgLength(){},deleteitems(t){let e=this;this.showConfirm({title:"温馨提示",msg:"您是否要删除当前上传的图片？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){e.filelist&&e.filelist.map(((i,s)=>{i.fileurl==t&&(e.filelist.splice(s,1),e.imgLength())}))}})},deletepic(t,e,i){this.nowurl=t,this.sliderVisible=!0,this.typeL=i,this.index=e},geturl(t){let e=this,i=JSON.parse(t);i.data instanceof Array?i.data.forEach((t=>{e.filelist.push({fileurl:t.uri,type:this.type})})):e.filelist.push({fileurl:i.data.uri,type:this.type}),this.fileItemList=this.filelist,this.$emit("getFilelist",this.filelist)},geturlcase(t){let e=this,i=JSON.parse(t);i.data instanceof Array?i.data.forEach((t=>{e.filelist.push({fileurl:t.uri,type:this.type})})):e.filelist.push({fileurl:i.data.uri,type:this.type}),this.fileItemList=this.filelist,this.$emit("getFilelist",this.filelist)}},mounted(){this.filelist=this.imgList,this.fileItemList=this.filelist.filter((t=>t.type==this.type))},watch:{show(t,e){t?$(".__panel").css({height:"100%"}):$(".__panel").css({height:"auto"})},imgList(t,e){this.filelist=this.imgList,this.fileItemList=this.filelist.filter((t=>t.type==this.type))},fdfsurl(t,e){this.fdfsurl=t}}},j=T,J=(0,w.Z)(j,L,Z,!1,null,"efe0e38a",null),G=J.exports,M={props:["active","issubmit","cansubmit"],components:{cHeader:o.Z,cModal:N.Z,noContent:r.Z,tPicker:f.Z,vueCuploader:G},data(){return{fdfsurl:"",detailid:"",remark:"",nowurl:"",show:!1,filelist:[],isupload:!0,isupload2:!0,uploadflag:"",len:"",len2:"",lenresult:"",lenresult2:"",description:!1,notshow:!0,caseinfoshowflag:"",maindiagnosis:"",bedno:"",inpatientno:"",caseinfo:"",filelistattend1:"",filelistattend2:"",typename:{name:"",order:0},projectname:"",actiondetail:[],seltype:{show:!1,mainlist:[],valueKey:"name"},selectteacher:{show:!1,title:"查看考核老师"},selectDoctor:{show:!1,title:"查看被考核人员"},student:[],uploadlist:[],newtype:"",ckexamshowflag:"",sliderImg:{},index:"",sliderVisible:"",isinputsubmit:!1,isteacherspeak:""}},watch:{active:function(t,e){t&&this.init()},issubmit:function(t,e){1==t&&(this.init(),this.filelist=[])},filelist:function(t,e){if(t){let e=[],i=[];t&&t.length>0&&t.map((t=>{2==t.type?e.push(t):3==t.type&&i.push(t)})),this.lenresult=Number(e.length),this.lenresult2=Number(i.length),this.$emit("getlist",t,this.caseinfoshowflag,this.ckexamshowflag,this.isteacherspeak)}},lenresult:function(t,e){this.isupload=30!=t},lenresult2:function(t,e){this.isupload2=5!=t},remark:function(t,e){t?this.$emit("getremark",t):this.$emit("getremark","")},inpatientno:function(t,e){t?this.$emit("inpatientno",t):this.$emit("inpatientno","")},bedno:function(t,e){t?this.$emit("bedno",t):this.$emit("bedno","")},maindiagnosis:function(t,e){t?this.$emit("maindiagnosis",t):this.$emit("maindiagnosis","")},caseinfo:function(t,e){t?this.$emit("caseinfo",t):this.$emit("caseinfo","")},student:function(t,e){0==t.length&&(this.selectDoctor.show=!1)},"typename.order":function(t,e){e&&t!=e&&(this.filelist=[]),t?this.$emit("ckkey",t):this.$emit("ckkey","")},projectname:function(t,e){t&&1==this.typename.order&&(t?this.$emit("projectname",t):this.$emit("projectname",""))}},created(){this.detailid=this.$route.query.id},mounted(){this.initactionplandetail(),this.init(),this.inittypelist()},methods:{...l.Z,...(0,m.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),inittypelist(){let t=this;this.post("/turnbaseinfo/turnbaseinfolevel",{command:"turnbaseinfo/turnbaseinfolevel",sessionid:I().cookie("sid"),loginid:I().cookie("uid"),code:"actionplancktype"}).done((e=>{e&&0==e.errcode?t.seltype.mainlist=JSON.parse(e.baseinfolevellist):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},selecttype(t){this.typename=t,this.seltype.show=!1},initactionplandetail(){let t=this;this.post("/actionplan/getactionplandetail",{command:"actionplan/getactionplandetail",sessionid:I().cookie("sid"),loginid:I().cookie("uid"),uid:I().cookie("uid"),actionplanid:t.detailid,clientflag:1}).done((e=>{t.actiondetail=e.bean,610==e.bean.type&&(t.isteacherspeak=1)}))},init(){let t=this,e="";this.post("/actionplan/getuploadpicinfo",{command:"actionplan/getuploadpicinfo",sessionid:I().cookie("sid"),loginid:I().cookie("uid"),actionplanid:t.detailid}).done((i=>{if(t.fdfsurl=i.fdfsurl,t.caseinfoshowflag=i.bean.caseinfoshowflag,t.ckexamshowflag=i.bean.ckexamshowflag,t.filelist=[],t.filelistattend1=[],t.filelistattend2=[],t.len="",t.len2="",t.description=!1,t.uploadflag=i.bean.uploadflag,t.remark=i.bean.description,t.inpatientno=i.bean.inpatientno,t.bedno=i.bean.bedno,t.maindiagnosis=i.bean.maindiagnosis,t.caseinfo=i.bean.caseinfo,t.typename.order=i.bean.cktype,t.typename.name=i.bean.cktypename,t.projectname=i.bean.ckproname,t.notshow=!(i.bean.description||i.bean.inpatientno||i.bean.bedno||i.bean.maindiagnosis||i.bean.caseinfo||i.bean.piclist),e=i.bean.temporarystorageflag,i.bean.piclist&&i.bean.piclist.length>0){let e=i.bean.piclist;e.map((e=>{t.filelist.push({fileurl:e.fileurl,type:e.type}),2==e.type?t.filelistattend1.push({fileurl:e.fileurl,type:e.type}):3==e.type&&t.filelistattend2.push({fileurl:e.fileurl,type:e.type})}))}t.len=t.filelistattend1.length,t.len2=t.filelistattend2.length,t.len>=30&&(this.isupload=!1),t.len2>=5&&(this.isupload2=!1),1!=t.uploadflag&&(t.description=!0),this.$nextTick((function(){I()("textarea").each((function(){I()(this).css("height",I()(this).prop("scrollHeight")+"px"),I()(this).on("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}))}))})),this.$emit("maxrole",{uploadflag:t.uploadflag,temporarysave:e})}))},deletepic(t){this.sliderVisible=!0},deleteitems(t){let e=this;this.showConfirm({title:"温馨提示",msg:"您是否要删除当前上传的图片？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){e.filelist&&e.filelist.map(((i,s)=>{i.fileurl==t&&e.filelist.splice(s,1)}))}})},getFilelist(t){this.filelist=t},uploadimg(t){console.log("1111111"),1==this.uploadflag?1==t?this.invokeNative("TakeAndUploadPhoto",{currentImg:this.filelist.length},this.geturl):(this.newtype=t,this.invokeNative("TakeAndUploadPhoto",{currentImg:this.filelist.length},this.geturlcase)):2==this.uploadflag?this.toast("当前计划尚未到记录时间~"):3==this.uploadflag&&this.toast("当前计划已超过记录时间~")},geturl(t){let e=JSON.parse(t);1==e.status?this.filelist.push({fileurl:e.uri,type:2}):0==e.status&&this.toast("上传失败！")},geturlcase(t){let e=JSON.parse(t);1==e.status?this.filelist.push({fileurl:e.uri,type:this.newtype}):0==e.status&&this.toast("上传失败！")},textareaFocus(){I()(".g-main").css("padding-bottom","6rem")},textareaBlur(){I()(".g-main").css("padding-bottom","0")}}},F=M,U=(0,w.Z)(F,A,_,!1,null,"4665187f",null),X=U.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-main"},[t.flag?[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.nocontent,expression:"!nocontent"}],staticClass:"title"},[e("span",[t._v("得分："+t._s(t.list.avgScore)+"分/总分"+t._s(t.list.totalScore)+"分")]),e("span",[t._v("反馈人数："+t._s(t.list.hasScoreCount)+"人/总人数"+t._s(t.list.totalScoreCount)+"人")])]),t._l(t.list.scoreSubmitRecordDetails,(function(i,s){return e("van-cell",{key:s,attrs:{title:i.uname,"is-link":"",value:t.getFen(i.score)},on:{click:function(e){return t.getDetail(i)}}})}))]:[e("div",{staticClass:"g-wrapper itemlist"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"g-main"},[e("div",{staticClass:"item"},t._l(t.list2,(function(i,s){return e("p",[e("span",[t._v(t._s(i.name))]),e("span",[t._v(t._s(i.score)+"分")])])})),0)]),0==t.list2.length?e("no-content"):t._e()],1)],t.nocontent?e("no-content"):t._e()],2)},W=[],P={props:["active"],data(){return{detailid:"",list:"",nocontent:!1,flag:!0,title:"",list2:""}},components:{noContent:r.Z,cHeader:o.Z},watch:{active:function(t,e){t&&this.init()}},filters:{rate:function(t){return Number(t).toFixed(1)}},created(){this.detailid=this.$route.query.id},mounted(){this.init()},methods:{...l.Z,...(0,m.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),getFen(t){return t+"分"},getDetail(t){let e=this;e.$router.push({name:"scoreDetail",query:{routeTitleName:"评分详情",id:t.id,category:"",type:""}})},init(){let t=this;this.post("/teachingactivityplan/teachingactionplancountV2",{command:"teachingactivityplan/teachingactionplancountV2",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),teachingPlanId:t.detailid,type:6}).done((e=>{e&&0==e.errcode?(t.list=e,0==e.evaluatepeopletotalcount&&(t.nocontent=!0)):(t.toast(e.errdesc),t.nocontent=!0)})).fail((function(e){t.nocontent=!0}))},showdetail(t,e){let i=this;i.title=e,this.post("/teachingactivityplan/getturnevadetailscore",{command:"teachingactivityplan/getturnevadetailscore",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),turnevaluateid:i.detailid,itemid:t}).done((t=>{t&&0==t.errcode&&(i.list2=t.detailscore,i.flag=!1)}))},back(){this.flag=!0}}},O=P,Q=(0,w.Z)(O,V,W,!1,null,"2ca560b8",null),z=Q.exports;let H=new n["default"];var K={data(){return{type:1,detailid:"",bus:H,from:"",list:[],remark:"",submitok:0,isshow:!1,cansubmit:0,caseinfo:"",maindiagnosis:"",bedno:"",inpatientno:"",examstatusname:"",cktype:"",pjname:"",piclist:"",ckexamshowflag:"",caseinfostandard:!1,isteacherspeak:"",istemporarysave:"",submitconfig:{show:!1,label:"name",fixedtop:".8rem",fixedright:".1rem"},submitlist:[{name:"暂存",key:1,isused:!0},{name:"提交",key:2,isused:!0}],submitsaveflag:""}},components:{cHeader:o.Z,noContent:r.Z,cTab:d.Z,cTabs:u.Z,censusSignin:x,censusRecord:X,censusTickling:z,addGroup:c.Z},computed:{},watch:{},created(){this.detailid=this.$route.query.id},mounted(){let t=this;this.initcodelist(),this.registerToNative("goBack",(function(e){t.back()}))},methods:{...l.Z,...(0,m.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),initcodelist(){let t=this;this.post("/actionplanbase/getjurisdictionbycoode",{command:"actionplanbase/getjurisdictionbycoode",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),beanlist:[{uid:$.cookie("uid"),jurisdiccode:"uploadpic",id:t.detailid}]}).done((e=>{e&&0==e.errcode?t.cansubmit=e.jurisdiclist[0].jurisdicvalue:e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},back(){let t=this;t.$route.query.isOverseer?this.$router.push({name:"activity_detail",query:{id:t.$route.query.id,ishistory:!1,isOverseer:!0,grade:t.$route.query.grade}}):t.$route.query.message?location.href="/pages/futuredoctorapp/todo.html?view=task":t.$router.push({name:"fdAction_detail",query:{id:t.detailid,ishistory:t.$route.query.ishistory}})},chuketypekey(t){this.cktype=t},getimages(t,e,i,s){this.list=t,this.examstatusname=e,this.ckexamshowflag=i,this.isteacherspeak=s},getremark(t){this.remark=t},getpjname(t){this.pjname=t},getcaseinfo(t){this.caseinfo=t},getmaindiagnosis(t){this.maindiagnosis=t},getbedno(t){this.bedno=t},getinpatientno(t){this.inpatientno=t},maxrole(t){this.isshow=1==t.uploadflag&&2==Number(this.type)?1:0,this.istemporarysave=t.temporarysave},uploadpiclist(){},submit(){let t=this;t.submitok=0;let e=[],i=[];if(t.list.map((t=>{3==t.type?e.push(t):2==t.type&&i.push(t)})),1==this.examstatusname)0==t.list.length||0==i.length?t.toast("请上传现场图片！"):1!=this.examstatusname||t.inpatientno?1!=this.examstatusname||t.bedno?1!=this.examstatusname||t.maindiagnosis?this.realsubmit():t.toast("请填写主要诊断！"):t.toast("请填写床号！"):t.toast("请填写住院号！");else if(1==this.ckexamshowflag)if(t.cktype)if(t.pjname||1!=t.cktype){if(0==t.list.length||t.list.length>0){let e=0,i=0,s=0;for(let a=0;a<t.list.length;a++)4==t.list[a].type?e+=1:5==t.list[a].type?i+=1:6==t.list[a].type&&(s+=1);0==e?t.toast("请上传成绩汇总表！"):0==i?1==t.cktype?t.toast("请上传技能考核评分原始表！"):t.toast("请上传面对面考核评分原始表！"):0==s?1==t.cktype?t.toast("请上传技能考核现场图片！"):t.toast("请上传面对面考核现场图片！"):t.remark?this.realsubmit():t.toast("请填写活动纪要！")}}else t.toast("请填写考核项目！");else t.toast("请选择出科考核类型！");else 1!=this.examstatusname&&1!=this.ckexamshowflag&&(t.remark||1==t.isteacherspeak?this.realsubmit():t.toast("请填写活动纪要！"))},realsubmit(){let t=this,e=[];t.submitok=0,t.list.length>0&&t.list.map((i=>{1==t.ckexamshowflag?4!=i.type&&5!=i.type&&6!=i.type||e.push({uid:$.cookie("uid"),actionplanid:t.detailid,fileurl:i.fileurl,type:i.type}):1==t.examstatusname?2!=i.type&&3!=i.type||e.push({uid:$.cookie("uid"),actionplanid:t.detailid,fileurl:i.fileurl,type:i.type}):2==i.type&&e.push({uid:$.cookie("uid"),actionplanid:t.detailid,fileurl:i.fileurl,type:i.type})})),this.showLoading("正在提交记录，请稍候~"),this.post("/actionplan/uploadpic",{command:"actionplan/uploadpic",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanid:t.detailid,description:t.remark,caseinfo:t.caseinfo,maindiagnosis:t.maindiagnosis,bedno:t.bedno,inpatientno:t.inpatientno,piclist:e,cktype:t.cktype,ckproname:t.pjname,deltypelist:[2,3,4,5,6],subflag:t.submitsaveflag}).done((e=>{e&&0==e.errcode?(t.hideLoading(),0==t.submitsaveflag&&t.toast("暂存成功！"),1==t.submitsaveflag&&t.toast("保存成功！"),t.submitok=1):data.errdesc?(t.hideLoading(),t.toast(data.errdesc)):(t.hideLoading(),t.toast("服务器错误，请联系管理员。"))})).fail((e=>{t.hideLoading()})),t.submitconfig.show=!1},changeTab(t){this.type=t.data,2!==Number(this.type)&&(this.isshow=!1)},submitselect(t){if(t)if(1==t.key)this.submitsaveflag=0,this.realsubmit();else{if(2!=t.key)return;this.submitsaveflag=1,this.submit()}}}},q=K,tt=(0,w.Z)(q,s,a,!1,null,null,null),et=tt.exports},22760:function(t,e,i){i.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header",attrs:{id:"header"}},[t._t("headerLeft",(function(){return[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]})),e("div",{staticClass:"header-center-blank"}),e("div",{staticClass:"header-center"},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2),t._t("headerRight")],2)},a=[],n=(i(77387),i(68934)),l=i(63822),o={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,l.rn)(["loginUser"]),methods:{...(0,l.nv)(["showAlert","showLoading","hideLoading","toast"]),...n.Z,back(){this.$router.go(-1)}}},r=o,c=i(1001),d=(0,c.Z)(r,s,a,!1,null,null,null),u=d.exports},84622:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"no_content"}},[e("img",{attrs:{src:i(10745),alt:""}}),e("span",{domProps:{textContent:t._s(t.txtdescription||"当前没有内容哦~")}})])},a=[],n={props:["txtdescription"]},l=n,o=i(1001),r=(0,o.Z)(l,s,a,!1,null,null,null),c=r.exports},10745:function(t,e,i){t.exports=i.p+"static/img/icon-renwu.b85b73a3.png"},88579:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="},57501:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA2UlEQVRYR+2XQQ0CMRBF31cAEpCABCygABwACgAFIIF1gAPAARKQgIMhs+nCHji028Ne5ic9NOnM/Lxm+7NiZKlmvpnNvV7Sc2ifwQbMbAHc0uClpOsQEzUGDsA+DT1K8n2xwkAQCAJBIAh8CZjZGlgVvKUzwJfrlVZueSPp0gZZV2Fmb2CS26H2nKR2dt/AGdjUNs6sf0jyNP0Z8E2K2Mwe9K+sAVqkOZJ0787FVxAEgkAQCAI1BLbAKT2pO0meJcUabCBlh/8NTYGDJE/TYlUZKJ72p2B0Ax+fNZIhXRCdnwAAAABJRU5ErkJggg=="},17561:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAjCAYAAADxG9hnAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFOUJDMjEyNzIxQjAxMUU3QjQwNEVCREVBQjQ4NzJDQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFOUJDMjEyODIxQjAxMUU3QjQwNEVCREVBQjQ4NzJDQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU5QkMyMTI1MjFCMDExRTdCNDA0RUJERUFCNDg3MkNCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU5QkMyMTI2MjFCMDExRTdCNDA0RUJERUFCNDg3MkNCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AOZtuQAAAtNJREFUeNq8l1uITVEYx/cZYxq3XKZBDGnSNCkeiNFMkolyHaPEg0ZTCnmhhEYT4UEeFF7cGkoUSQoZdCaXk6KUSzKUlwkxjFsNuQ3+X/13nVbf3mvtvc85X/3qnG+tvfu31nfbqUwm44VYCswCS0EtqARl4Cd4B56CNDjP/7EtFSKkEewGkx3e8xucAa3gTRwhRYpvEDgLLjqKEOsPmkEnWJULIWPAbbAy5gkPAafBriRChoJrYJqX3HaAdVEeKM76fTTkKp7xuuS03oLB3LsMLDbe49shPpeJImRhwHX0gk3gJPhrrD0Ep8Ak0AZmGusl4BiYwmB2upo9ytoHpm6bIsI8rTlMYdOqXYNXhNSAqYb/H1gBHjle8Q/QBJ4oa+tdhTQqfqkJtyIGqBS5zYq/htloFVIXEGhxLM3YMa3ORUiV4fsEHiRI3RuKr8pFyAjD18UYiWtdim+4ixAzI74lLGZfA3qRVUiP4RuVUMhYxdfjIqTT8E1MKKY2oNZYhdxRZpCmmCJGgvmGrw/cdxFyQfFvBeUxhEiFLjV815mJViFybB2Gv5xNriSCCDnFtYr/cJQxoFVJ2XqOBWUO79nIxmiaXPuVKELugYPKujSz52ALGG+syRU0sBUcAP2U5ysY/JFmVrmGdp5EkL0G3RwnJyjxoJkM1QtsDTR7QvvFaf1yyP4KTnDVjiLERoObYHaUmbWX3Xgv+OPlzobxtBuiTPFS8reDGeCSZSjyrZspvzNkzwCWimbbzOopo6Bc1TiwhK28kk3yO3jPe+8gfXxuINgWMpqeYCbud/3Aiv3RBo4E1JRs2wda/LJR5OXe5MUbwDnLPjm1437a50OI319WM0DDbA2H7tJ8CfHLwXJw17JPvo2u5lOIx6BeBB5b9k3PtxB/YpsHXobs+VIIIf7HWj1bhGYfCyVE7BWYS1FmYLcUe4W1F5zg0hTwmSnc/l+AAQDhZ5VLrpP6nwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=9493.5f6a2819.js.map