"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[2436],{42436:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-wrapper"},[t("c-header",[t("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[t("a",{staticClass:"header-back-btn",on:{click:function(t){return e.back()}}},[t("img",{attrs:{src:i(88579)}})])]),t("span",{staticClass:"deptname",on:{click:e.showPop}},[e._v(" "+e._s(e.deptname)+" "),[1==e.seldept.show?t("img",{attrs:{src:i(19590)}}):t("img",{attrs:{src:i(15002)}})]],2),t("div",{staticClass:"looktable",attrs:{slot:"headerRight"},on:{click:e.totablelist},slot:"headerRight"},[e._v("报表查看")])]),t("c-tabs",{attrs:{bus:e.bus},on:{"change-tab":e.changeTab}},[t("c-tab",{attrs:{title:"轮转中",active:1==e.type,bus:e.bus,data:"1"}}),t("c-tab",{attrs:{title:"待入科",active:2==e.type,bus:e.bus,data:"2"}}),t("c-tab",{attrs:{title:"未轮转",active:3==e.type,bus:e.bus,data:"3"}}),t("c-tab",{attrs:{title:"己轮转",active:5==e.type,bus:e.bus,data:"5"}})],1),t("div",{staticClass:"g-main"},[t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"type == 1"}]},[t("rotation-ready",{attrs:{active:1==e.type,showck:e.showck,titledeptid:e.titledeptid,deptname:e.deptname},on:{savePreId:e.savePreId}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.type,expression:"type == 2"}]},[t("rotation-wating",{attrs:{active:2==e.type,shownotturn:e.shownotturn,titledeptid:e.titledeptid,deptname:e.deptname},on:{savePreId:e.savePreId}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:3==e.type,expression:"type == 3"}]},[t("rotation-notturn",{attrs:{active:3==e.type,titledeptid:e.titledeptid,deptname:e.deptname},on:{savePreId:e.savePreId}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:5==e.type,expression:"type == 5"}]},[t("rotation-already",{attrs:{active:5==e.type,shownotturn:e.shownotturn,titledeptid:e.titledeptid,deptname:e.deptname},on:{savePreId:e.savePreId}})],1)]),t("c-picker",{attrs:{config:e.seldept},on:{confirm:e.selectdept}}),t("div",{staticClass:"rotationc"},[t("van-popup",{attrs:{"lazy-render":!1,"close-on-click-overlay":!1,position:"bottom"},model:{value:e.popShow,callback:function(t){e.popShow=t},expression:"popShow"}},[t("van-nav-bar",{attrs:{title:"请选择","left-text":"取消","right-text":"确定","left-arrow":""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}}),t("van-toast"),t("div",{staticStyle:{"overflow-y":"scroll",height:"304px"}},[t("el-tree",{ref:"tree",attrs:{"show-checkbox":"","check-strictly":!0,data:e.deptList,props:e.defaultProps,"node-key":"id"},on:{"check-change":e.checkClick}})],1)],1)],1)],1)},s=[],d=(i(70560),i(88848)),a=i(3032),n=i(22760),c=i(68934),r=i(30908),l=i(53003),p=i(89262),h=i(36226),u=i(93121),m=i(70241),A=i(62266);let b=new a["default"];var v={name:"rotation_admin",components:{cTab:r.Z,cTabs:l.Z,rotationReady:p.Z,rotationWating:h.Z,rotationNotturn:u.Z,rotationAlready:m.Z,cPicker:A.Z,cHeader:n.Z,methods:c.Z},data(){return{preId:null,type:1,bus:b,showck:!0,shownotturn:!0,seldept:{show:!1,mainlist:[],valueKey:"deptname"},deptname:"",titledeptid:"",popShow:!1,columns:[],deptList:[],hosIdByDeptSave:0,oriactiveKey:0,activeKey:0,deptnameidList:[],orideptnameidList:[],defaultProps:{children:"childrens",label:"name",disabled:function(e,t){return 1!=e.havePermission}}}},created(){4==this.$route.query.where?this.type=3:this.type=this.$route.query.where},mounted(){let e=this;e.preId=e.getPreId(this.$route.name),e.registerToNative("goBack",(function(t){e.back()})),this.initautoturnckconf(),this.initautonotturnconf(),this.getTree()},beforeDestroy(){console.log("destory"),this.savePreId()},methods:{...c.Z,back:function(){this.savePreId(),window.location.href="/pages/futuredoctorapp/index.html/#/wxIndex"},changeTab(e){this.type=e.data},savePreId(){if(console.log("科室ids",this.$refs.tree.getCheckedKeys()),$.cookie("preIdList")){let e=JSON.parse($.cookie("preIdList")),t=e.find((e=>e.route==this.$route.name));t?t.id=this.$refs.tree.getCheckedKeys():e.push({route:this.$route.name,id:this.$refs.tree.getCheckedKeys()}),$.cookie("preIdList",JSON.stringify(e),{expires:30,path:"/"})}else{let e=[{route:this.$route.name,id:this.$refs.tree.getCheckedKeys()}],t=JSON.stringify(e);$.cookie("preIdList",t,{expires:30,path:"/"})}},initautoturnckconf(){let e=this;e.post("/turn/ckparaminfo",{command:"turn/ckparaminfo",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"autoturnckconf",paramvalue:1}).done((function(t){t&&0==t.errcode&&(e.showck=1!=t.value)})).fail((function(e){}))},initautonotturnconf(){let e=this;e.post("/turn/ckparaminfo",{command:"turn/ckparaminfo",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"autonotturnconf",paramvalue:1}).done((function(t){t&&0==t.errcode&&(e.shownotturn=1!=t.value)})).fail((function(e){}))},initdeptname(){let e=this;e.post("/deptinfo/getusermanagerdeptinfoforsysrole",{command:"deptinfo/getusermanagerdeptinfoforsysrole",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),ckrolecode:"turndoctorroles",rolelist:[2]}).done((function(t){t&&0==t.errcode&&(e.seldept.mainlist=t.beanlist.officelist,e.$route.query.deptid?(e.deptname=e.$route.query.deptname,e.titledeptid=e.$route.query.deptid):(e.deptname=t.beanlist.officelist[0].deptname,e.titledeptid=t.beanlist.officelist[0].id))})).fail((function(e){}))},selectdept(e){this.deptname=e.deptname,this.titledeptid=e.id,this.seldept.show=!1},totablelist(){this.$router.push({name:"fdRotation_reportlist",query:{deptid:this.titledeptid,deptname:this.deptname,activeKey:this.activeKey}})},showPop(){let e=this;e.popShow=!0},getTree(){let e=this;e.post("/base/dept/getMyDeptTree",{showBase:!1}).done((t=>{if(t&&200==t.resCode&&Array.isArray(t.model)&&t.model.length>0)if(e.deptList=t.model,e.columns=t.model,e.$route.query.back)console.log("000",this.$route.query.deptid),Array.isArray(this.$route.query.deptid)?e.orideptnameidList=this.$route.query.deptid:e.orideptnameidList=[this.$route.query.deptid],e.deptname=this.$route.query.deptname,e.titledeptid=this.$route.query.deptid,this.$refs.tree.setCheckedKeys(e.orideptnameidList);else if(e.preId){console.log("111",e.preId);let i={},o=[],s=[],d=[];if(e.preId.map((a=>{i=e.findObjectAndIndex(t.model,Number(a)),i&&(o.push(i),s.push(i.object.name),d.push(i.object.id))})),o)e.deptname=s.join(","),e.orideptnameidList=d,e.titledeptid=d,this.$refs.tree.setCheckedKeys(e.orideptnameidList);else{let i=e.findObjectWithDeptLevel3(t.model);e.deptname=i.object.name,e.orideptnameidList=[i.object.id],e.titledeptid=i.object.id,this.$refs.tree.setCheckedKeys(e.orideptnameidList)}}else{console.log("222");let i=e.findObjectWithDeptLevel3(t.model);console.log(i),e.deptname=i.object.name,e.orideptnameidList=[i.object.id],e.titledeptid=i.object.id,this.$refs.tree.setCheckedKeys(e.orideptnameidList)}}))},onChange(e){let t=this;t.hosIdByDeptSave=t.columns[e].id,t.deptList=t.columns[e].childrens},checkClick(e,t,i){console.log(e,t,i)},onClickLeft(){let e=this;e.popShow=!1,e.activeKey=e.oriactiveKey,e.deptnameidList=e.orideptnameidList,this.$refs.tree.setCheckedKeys(e.orideptnameidList)},onClickRight(){let e=this;if(this.$refs.tree.getCheckedKeys()[0]&&this.$refs.tree.getCheckedNodes()[0]){let t=this.$refs.tree.getCheckedNodes(),i=[],o=[];t.map((e=>{i.push(e.name),o.push(e.id)})),e.hosIdByDept=e.hosIdByDeptSave,e.oriactiveKey=e.activeKey,e.deptname=i.join(","),e.titledeptid=o,e.orideptnameidList=this.$refs.tree.getCheckedKeys(),e.popShow=!1,console.log(111,e.titledeptid),this.savePreId()}else(0,d.Z)({message:"请选择科室",position:"bottom"})}}},y=v,I=i(1001),g=(0,I.Z)(y,o,s,!1,null,"1371b2b2",null),k=g.exports},15002:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAUCAYAAADoZO9yAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADIWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NEMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NFMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjc3MUFDQ0IwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjc3MUFDQ0MwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5cvzW3AAABuUlEQVRIS73UMUtbYRjF8ZsUhSIdioNDB8HBQaR06VAQ3JwcWsiki5NjKTg0X0EQ/AKdOnUqdHFyc+nQIdihg0OhFAVBHaSItDT9n5uc8ObNkxhN7IEf3Pvc8z5vFi2azWYNh3gNvf9PulN31/TSgLOJvHxfdJfT0KDeei7zB6+QHxo33aG7nLqGFbwrX1u5wjLyw+OyBN3h6O6KPz7AJzgXeIp0wTgs4hyO7tTdRVp6iAM4x5hF2hmFdv2Eo7t0Z/k9Lz/GVzjfMI28d1vaoV2O7tBdnU5atif4AeczphB1h6Gz2uFot+7o6nW9JBZwBmcPE4i6g+iMzjraqd093Z5B4gV+wXkP/YVF3Yi6OuNol3ZG3YE/RFbxG84Ool5kG452aFfUK4XDzAb+wtlC1Eu9gaOz2hH1OsJh4C0cLV5H1JM1pD9cZ6Nel3DYxy6ca6wg72imb47O5J1QOOyjig9wLvEc/q5nzRx1dSbd0Vc4HGAS+3BOMd+mZ0cddaMdoXB4g0f4Aud7m6Nv6kRn+wqHQ5jBEfJopm/RmYHC4ZDmcAJHz5pF3RuV/ylHyDN8RBUv0cAdUhT/APlSFUw/IopPAAAAAElFTkSuQmCC"},19590:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAUCAYAAADoZO9yAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADIWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NEMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NFMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjc3MUFDQ0IwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjc3MUFDQ0MwNkU0MTFFNzlDMEREQjg0NTZFODU3OTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5cvzW3AAABr0lEQVRIS7XUvyvtcRzHcYfckgwyGAzKYJBkMShlM92FTCwmo5SBf0Ep/4DJZGQx2Sx3uMPp3uEOd1ASpTBIEjmer+85L33Px/t7HByvetT3vL/vH99BSpVKpe0LGcc+njGHMj4XfcgnDeECjp5Vi3rfFRab0I//SKOa3kUzDYXFd/TgN5yTGkfv1BPNFgqLDfzAEZxLDNfo2VGPeqMdobBYoB17cG4xAb/Xs2qOejWT31EoLBbYhvOAGaQ9qumdo5m0JxQWA+twnrGAqE8WoR5Hs1FfnbCYWEJ+8Sqivrw1OJrVjqjvVVjM+YlHOJuI+iJbcLRDu6K+TFismcQdnF1k/4mbpF7NONqlnVFv4YeM4ArOIToR9TaiGc062qndb3rfFDCAUzi/0I2otxma1Q5Hu3Wjrq/uB3rxF84/9CHt+yjt0C5HN3TrtSff3IVjOGcYRL7nK7TrHI5u6Wb23k0dOIBzjVH4fauM4QaObup29iH6696Bc48ppEtaZRq64eh2SS82sp/VPGEW6XCr6YZuORsqlqvPWZaRDn0X3XLKKszjD1aQNn833eR2Zf4F8EEWTAoG/0kAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=2436.5d8ad4b8.js.map