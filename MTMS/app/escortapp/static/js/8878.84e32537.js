"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[8878],{45916:function(t,i,e){e.r(i),e.d(i,{default:function(){return k}});var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"g-wrapper"},[i("c-header",[i("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[i("a",{staticClass:"header-back-btn",on:{click:function(i){return t.back()}}},[i("img",{attrs:{src:e(88579)}})])]),t._v(" 查看历史 ")]),i("ul",{staticClass:"filter"},[i("li",{class:{active:t.typeconfig.show},on:{click:function(i){t.typeconfig.show=!t.typeconfig.show}}},[t._v("活动类型")]),i("li",{class:{active:t.timeconfig.show},on:{click:function(i){t.timeconfig.show=!t.timeconfig.show}}},[t._v("活动日期")]),i("li",{staticClass:"noselect",on:{click:t.noraml}},[t._v("默认")])]),i("select-list",{attrs:{config:t.typeconfig,"data-list":t.typelist},on:{confirm:t.typeselect}}),i("c-timepicker",{attrs:{config:t.timeconfig,year:t.year,month:t.month},on:{confirm:t.timeselect}}),i("div",{class:t.iscontent?"g-main noneContent":"g-main"},[i("load-more",{attrs:{"loading-text":t.loadingText,"infinite-loading":t.isgetmore,"to-top":t.istotop},on:{getmore:function(i){return t.init()}}},[i("actionplanSteps",{attrs:{dataList:t.data,ishistory:t.ishistory}})],1)],1),i("no-content",{directives:[{name:"show",rawName:"v-show",value:t.iscontent,expression:"iscontent"}]})],1)},o=[],n=(e(91719),e(70560),e(68934)),a=e(63822),c=e(22760),r=e(19996),l=e(84014),h=e(81360),m=e(49931),p=e(50070),d=e(84622),f={components:{cHeader:c.Z,actionplan:r.Z,noContent:d.Z,selectList:h.Z,cTimepicker:m.Z,loadMore:p.Z,actionplanSteps:l.Z},data(){return{istotop:!1,reqnum:10,isgetmore:!0,iscontent:!1,loadingText:"加载中~",ishistory:!0,data:[],type:"",selecttime:"",timeconfig:{show:!1,istime:!1,custom:!0},year:[2017,2027],month:[1,12],typeconfig:{show:!1,label:"name",fixedvalue:"1.5rem",textposition:"left"},typelist:[]}},watch:{type:function(t,i){t!==i&&this.setActions({k:"historytype",v:this.type})},selecttime:function(t,i){t!==i&&this.setActions({k:"historydate",v:this.selecttime})},reqnum:function(t,i){t!==i&&this.setActions({k:"historyreqnum",v:this.reqnum})}},filters:{},computed:{...(0,a.rn)(["actionfilters"])},created(){this.selecttime=this.actionfilters.historydate,this.type=this.actionfilters.historytype,this.reqnum=this.actionfilters.historyreqnum},mounted(){let t=this;this.init(),this.inittypelist(),this.registerToNative("goBack",(function(i){t.back()}))},methods:{...n.Z,...(0,a.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast","setActions"]),init(){let t=this;this.isgetmore=!1,this.post("/actionplan/listactionplan",{command:"actionplan/listactionplan",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),clientflag:1,type:t.type,status:"",statuslist:[2],starttime:"",endtime:"",yearmonth:t.selecttime,beforemonthindex:"",isself:1,orderflag:1,historyflag:1,page:1,reqnum:t.reqnum}).done((i=>{i&&0==i.errcode?(t.isgetmore=!0,i.result.beanlist.length>0?(t.iscontent=!1,t.data=i.result.beanlist,t.data.length<t.reqnum&&(t.isgetmore=!1,t.loadingText="没有更多啦~"),t.reqnum+=10):(t.data=[],t.iscontent=!0)):i.errdesc?t.toast(i.errdesc):t.toast("服务器错误，请联系管理员。")}))},inittypelist(){let t=this;this.post("/turnbaseinfo/turnbaseinfolevel",{command:"turnbaseinfo/turnbaseinfolevel",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"teachtype"}).done((i=>{if(i&&0==i.errcode){let e=JSON.parse(i.baseinfolevellist);e.unshift({name:"全部",id:""}),t.typelist=e}else i.errdesc?t.toast(i.errdesc):t.toast("服务器错误，请联系管理员。")}))},timeselect(t){this.timeconfig.show=!1,this.istotop=!this.istotop,this.reqnum=10,this.selecttime=t,this.init()},typeselect(t){this.istotop=!this.istotop,this.typeconfig.show=!1,this.reqnum=10,this.type=t.key,this.init()},noraml(){this.reqnum=10,this.istotop=!this.istotop,this.selecttime="",this.type="",this.init()},back(){this.setActions({k:"historytype",v:""}),this.setActions({k:"historydate",v:""}),this.$router.push({name:"fdAction_list"})}}},u=f,y=e(1001),g=(0,y.Z)(u,s,o,!1,null,"b2b2fe3a",null),k=g.exports}}]);
//# sourceMappingURL=8878.84e32537.js.map