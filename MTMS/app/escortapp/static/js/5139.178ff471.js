"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[5139],{40361:function(e,t,s){s.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"progress",style:{height:e.strokeWidth+"px"}},[t("div",{staticClass:"progress-bar",style:{width:e.percentage+"%",height:e.strokeWidth+"px"}}),t("span",{staticClass:"progress-text",style:{left:(e.percentage>86?86:e.percentage)+"%",height:e.strokeWidth+"px",lineHeight:e.strokeWidth+"px"}},[e._v(e._s(e.percentage)+"%")])])},a=[],n={props:{percentage:{type:Number,default:0},strokeWidth:{type:Number,default:12}},data(){return{}},mounted(){},methods:{}},o=n,r=s(1001),l=(0,r.Z)(o,i,a,!1,null,"c192c8a2",null),c=l.exports},5139:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"case-review-detail"},[t("van-nav-bar",{attrs:{title:"病历审核详情","left-arrow":""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}}),t("div",{staticStyle:{height:"46px"}}),t("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("van-tab",{attrs:{title:"病历详情"}},[t("div",{staticClass:"caseDetail"},[t("div",{staticStyle:{height:"44px"}}),t("div",{staticClass:"case-detail-title"},[t("div",{staticClass:"case-detail-title-top"},[e._v(e._s(e.info.stuName)+" - "+e._s(e.info.stuCode))]),t("div",{staticClass:"case-detail-title-bottom"},[e._v(e._s(e.info.turnDeptName)+" | "+e._s(e.info.createTime))])]),t("div",{staticClass:"caseContent"},[t("div",{staticClass:"score-row"},[e._v(e._s(e.info.name))]),t("div",{staticClass:"pics"},e._l(e.picList,(function(s,i){return t("div",{key:i,staticClass:"pic",on:{click:function(t){return e.viewPic(i)}}},[t("img",{staticClass:"photo",attrs:{src:s}})])})),0)])])]),t("van-tab",{attrs:{title:"病历评分"}},[t("div",{staticClass:"eva-main"},[t("div",{staticStyle:{"min-height":"80px"}},[t("p",{staticClass:"hosName"},[e._v(e._s(e.tempDetail.title))]),e.tempDetail.description?t("div",{staticClass:"tipps"},[e.tempDetail.description?t("span",[e._v("*")]):e._e(),e._v(" "+e._s(e.tempDetail.description)+" ")]):e._e(),t("img",{staticClass:"grade-pic",attrs:{src:s(16545)}})]),e.isDetail?t("div",{staticClass:"ggrade"},[t("div",{staticClass:"ggg"},[t("div",{staticClass:"ggg-before"}),t("div",{staticClass:"ggg-last"},[e._v("审核评分结果："+e._s(e.tempDetail.score))])]),t("div",{staticClass:"ttt"},[e._v("审核人："+e._s(e.tempDetail.evaluator)+"         评价时间："+e._s(e.tempDetail.submitTime))])]):e._e(),e.tempDetail.evaList.length>0?t("div",{staticClass:"evaluateDetail",class:{evaDetail:e.isDetail}},[e._l(e.tempDetail.evaList,(function(s,i){return t("div",{key:i,staticClass:"grade-box"},[t("div",{staticClass:"grade-title"},[e._v(e._s(s.category))]),e._l(s.questionList,(function(s,i){return t("div",{key:i,staticClass:"content-box"},[t("span",{staticClass:"grade-content"},[e._v(e._s(s.content))]),1==s.type?t("span",{staticStyle:{"font-size":"16px",color:"#999999","letter-spacing":"0.2px","font-weight":"400"}},[e._v("(单选题)")]):e._e(),2==s.type?t("span",{staticStyle:{"font-size":"16px",color:"#999999","letter-spacing":"0.2px","font-weight":"400"}},[e._v("(多选题)")]):e._e(),4==s.type?t("span",{staticStyle:{"font-size":"16px",color:"#999999","letter-spacing":"0.2px","font-weight":"400"}},[e._v("(星星等级)")]):e._e(),5==s.type?t("span",{staticStyle:{"font-size":"16px",color:"#999999","letter-spacing":"0.2px","font-weight":"400"}},[e._v("(常用标签)")]):e._e(),1==s.required?t("span",{staticStyle:{"font-size":"16px",color:"#FF5500","font-weight":"500"}},[e._v("*")]):e._e(),1==s.type?t("div",[t("van-radio-group",{attrs:{disabled:e.isDetail},model:{value:s.save,callback:function(t){e.$set(s,"save",t)},expression:"iten.save"}},e._l(s.items,(function(i,a){return t("div",{key:a,staticClass:"dx"},[t("van-radio",{attrs:{name:i.id}},[e._v(e._s(i.content))]),t("van-field",{directives:[{name:"show",rawName:"v-show",value:i.id==s.save&&1==i.reasonStatus,expression:"iteb.id == iten.save && iteb.reasonStatus == 1"}],attrs:{placeholder:"请输入原因",rows:"1",autosize:"",maxlength:50,type:"textarea",readonly:e.isDetail},model:{value:i.reasonComment,callback:function(t){e.$set(i,"reasonComment",t)},expression:"iteb.reasonComment"}})],1)})),0)],1):e._e(),2==s.type?t("div",{staticClass:"dx"},e._l(s.items,(function(i,a){return t("van-checkbox-group",{key:a,attrs:{disabled:e.isDetail},model:{value:s.save,callback:function(t){e.$set(s,"save",t)},expression:"iten.save"}},[t("van-checkbox",{key:i.id,attrs:{name:i.id}},[e._v(e._s(i.content))]),t("van-field",{directives:[{name:"show",rawName:"v-show",value:-1!=s.save.indexOf(i.id)&&1==i.reasonStatus,expression:"iten.save.indexOf(iteb.id) != -1 && iteb.reasonStatus == 1"}],attrs:{placeholder:"请输入原因",rows:"1",autosize:"",maxlength:50,type:"textarea",readonly:e.isDetail},model:{value:i.reasonComment,callback:function(t){e.$set(i,"reasonComment",t)},expression:"iteb.reasonComment"}})],1)})),1):e._e(),3==s.type?t("div",[t("van-cell-group",[t("van-field",{attrs:{type:"textarea",placeholder:"200字以内",size:"large",rows:"1",autosize:"",maxlength:200,"show-word-limit":"",readonly:e.isDetail},model:{value:s.answerContent,callback:function(t){e.$set(s,"answerContent",t)},expression:"iten.answerContent"}})],1)],1):e._e(),4==s.type?t("div",[t("van-rate",{attrs:{readonly:e.isDetail,size:30,color:"#FCB62D","void-color":"#D6D6D6"},model:{value:s.answerStar,callback:function(t){e.$set(s,"answerStar",t)},expression:"iten.answerStar"}})],1):e._e(),5==s.type?t("div",{staticStyle:{"margin-top":"10px"}},[e.isDetail?t("div",e._l(s.items,(function(i,a){return t("span",{key:a,staticClass:"selBox",class:{active:i.id==s.save}},[e._v(e._s(i.content))])})),0):t("div",e._l(s.items,(function(i,a){return t("span",{key:a,staticClass:"selBox",class:{active:i.id==s.save},on:{click:function(t){return e.select(s,i)}}},[e._v(e._s(i.content))])})),0)]):e._e(),6==s.type?t("div",{staticClass:"dx"},[t("div",{staticClass:"scorll-item"},[t("van-slider",{attrs:{step:.5,min:"0",max:s.score,disabled:e.isDetail},model:{value:s.answerScore,callback:function(t){e.$set(s,"answerScore",t)},expression:"iten.answerScore"}}),t("span",{staticStyle:{width:"20px"}}),t("van-stepper",{attrs:{min:"0",max:s.score,step:"0.5","disable-input":"",disabled:e.isDetail},model:{value:s.answerScore,callback:function(t){e.$set(s,"answerScore",t)},expression:"iten.answerScore"}})],1),t("van-field",{directives:[{name:"show",rawName:"v-show",value:!!s.reasonStatus,expression:"!!iten.reasonStatus"}],attrs:{placeholder:"请输入描述",rows:"1",autosize:"",maxlength:50,type:"textarea",readonly:e.isDetail},model:{value:s.answerReasonComment,callback:function(t){e.$set(s,"answerReasonComment",t)},expression:"iten.answerReasonComment"}})],1):e._e()])}))],2)})),t("div",{staticStyle:{height:"44px"}})],2):t("div",{staticClass:"nodata"},[t("img",{attrs:{src:s(55569)}}),t("div",{staticClass:"nodataText"},[e._v("该科室暂无评分表")])]),t("div",{staticStyle:{height:"44px"}})]),e.tempDetail.evaList.length>0&&!e.isDetail?t("div",{staticClass:"btnGroup"},[t("van-button",{attrs:{type:"info"},on:{click:e.submit}},[e._v("提交")])],1):e._e()])],1),t("van-image-preview",{attrs:{images:e.picViewList,startPosition:e.index},on:{change:e.onChange},scopedSlots:e._u([{key:"index",fn:function(){return[e._v("第"+e._s(e.index+1)+"张")]},proxy:!0}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},a=[],n=(s(70560),s(5348)),o=s(88848),r=s(77387),l=s.n(r),c=s(22760),d=s(68934),p=s(63822),u=s(40361),m={name:"rotation_doctor_exam",components:{cHeader:c.Z,cProgress:u.Z},data(){return{show:!1,info:{},picList:[],picViewList:[],index:0,businessId:"",turnPlanDetailId:"",tempDetail:{id:"",title:"",description:"",score:"",submitTime:"",evaluator:"",evaList:[]},targetId:"",isDetail:!1}},computed:{...(0,p.rn)(["turninfo"])},created(){this.getDetail()},mounted(){},methods:{...d.Z,...(0,p.nv)(["setTurninfo","setTurnManual"]),getDetail(){let e=this;e.get("/base/largeMedicalRecord/detail/"+this.$route.query.id).done((t=>{200==t.resCode&&(e.info=t.model,e.picList=t.model.fileList,e.getEvaDetail(t.model.id,t.model.turnDeptId),e.businessId=t.model.id,e.targetId=t.model.stuId,e.turnPlanDetailId=t.model.turnPlanDetailId)}))},getCurrentTime(){const e=new Date,t=e.getFullYear(),s=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),a=("0"+e.getHours()).slice(-2),n=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return`${t}-${s}-${i} ${a}:${n}:${o}`},getEvaDetail(e,t,s){let i=this,a={command:"scoreSubmitRecord/detail",sessionid:l().cookie("sid"),loginid:l().cookie("uid"),businessId:e,category:4,type:1};i.post("/scoreSubmitRecord/detail",a).done((e=>{"0"==e.errcode?(i.tempDetail.id=e.id,i.tempDetail.title=e.name,i.tempDetail.description=e.description,e.questions.forEach((e=>{e.questionList.forEach((e=>{2==e.type?(e.save=[],e.items.forEach((t=>{1==t.selected&&e.save.push(t.id)}))):1==e.type||5==e.type?(e.save=[],e.items.forEach((t=>{1==t.selected&&(e.save=t.id)}))):e.save=""}))})),i.tempDetail.score=Number(e.score),i.tempDetail.submitTime=e.submitTime,i.tempDetail.evaluator=e.evaluator,i.tempDetail.evaList=e.questions,i.isDetail=!0):i.getEvaTemp(t)}))},getEvaTemp(e){let t=this,s={command:"scoreTemplate/getAvailableTemplateDetail",sessionid:l().cookie("sid"),loginid:l().cookie("uid"),category:4,type:1,deptId:e};t.post("/scoreTemplate/getAvailableTemplateDetail",s).done((e=>{t.tempDetail.id=e.id,t.tempDetail.title=e.name,t.tempDetail.description=e.description,e.questions.forEach((e=>{e.questionList.forEach((e=>{2==e.type?(e.save=[],e.items.forEach((t=>{1==t.selected&&e.save.push(t.id)}))):1==e.type||5==e.type?(e.save=[],e.items.forEach((t=>{1==t.selected&&(e.save=t.id)}))):6==e.type?(e.answerScore=e.score,e.answerReasonComment=""):e.save=""}))})),t.tempDetail.evaList=e.questions}))},addCase(){this.$router.push({name:"fdRotation_doctor_addedit_case"})},viewPic(e){console.log(e);let t=this;t.index=e,1!=t.isdel&&(t.picList.forEach((e=>{t.picViewList.push(e)})),t.show=!0)},onChange(e){console.log(e);let t=this;t.index=e},evaDetail(){this.$router.push({name:"fdRotation_doctor_case_eva"})},onClickLeft(){this.$router.push({name:"caseReviewHome"})},select(e,t){let s=this;s.tempDetail.evaList.forEach((s=>{s.questionList.forEach((s=>{s.id==e.id&&(s.save=t.id)}))}))},submit(){let e=this;n.Z.confirm({message:"提交后不可修改，确定要提交吗?",color:"#1989fa"}).then((()=>{let t=0;e.tempDetail.evaList.forEach((e=>{e.questionList.forEach((e=>{1!=e.required||1!=e.type&&2!=e.type&&5!=e.type||""!=e.save&&e.save!=[]?1==e.required&&3==e.type?e.answerContent||(t+=1):1==e.required&&4==e.type&&""==e.answerStar&&(t+=1):(console.log("error"),t+=1)}))})),0==t?e.formSubmit():(0,o.Z)("您还有"+t+"道题没填")})).catch((()=>{}))},formSubmit(){let e=this,t=[];console.log(e.gradeList),e.tempDetail.evaList.forEach((e=>{e.questionList.forEach((e=>{if(2==e.type)e.items.forEach((s=>{if(-1!=e.save.indexOf(s.id)){let e={scoringQuestionId:s.scoringQuestionId,scoringOptionId:s.id,content:"",star:"",reasonComment:s.reasonComment?s.reasonComment:""};t.push(e)}}));else if(1==e.type||5==e.type)e.items.forEach((s=>{if(e.save==s.id){let e={scoringQuestionId:s.scoringQuestionId,scoringOptionId:s.id,content:"",star:"",reasonComment:s.reasonComment?s.reasonComment:""};t.push(e)}}));else if(3==e.type){if(e.answerContent){let s={scoringQuestionId:e.id,scoringOptionId:"",content:e.answerContent?e.answerContent:"",star:"",reasonComment:""};t.push(s)}}else if(4==e.type){let s={scoringQuestionId:e.id,scoringOptionId:"",content:"",star:e.answerStar?e.answerStar:0,reasonComment:""};t.push(s)}else if(6==e.type){let s={scoringQuestionType:6,scoringQuestionId:e.id,scoringOptionId:"",content:"",star:"",reasonComment:"",score:e.answerScore,reasonComment:e.answerReasonComment};t.push(s)}}))})),console.log(t);let s={command:"scoreSubmitRecord/submit",sessionid:l().cookie("sid"),loginid:l().cookie("uid"),scoringTemplateId:e.tempDetail.id,businessId:e.businessId,targetId:e.targetId,submitType:1,answers:t};console.log(s),e.post("/scoreSubmitRecord/submit",s).done((t=>{"0"==t.errcode?((0,o.Z)("保存成功"),e.post("/base/largeMedicalRecord/update",{id:e.businessId,scoringSubmitRecordId:t.id,auditStatus:1,auditor:l().cookie("uid"),auditTime:e.getCurrentTime(),turnPlanDetailId:e.turnPlanDetailId}).done((e=>{console.log(e),this.getDetail()}))):(0,o.Z)("保存失败")}))}}},v=m,g=s(1001),h=(0,g.Z)(v,i,a,!1,null,"3aaecb8a",null),f=h.exports},22760:function(e,t,s){s.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header",attrs:{id:"header"}},[e._t("headerLeft",(function(){return[t("a",{staticClass:"header-back-btn",on:{click:function(t){return e.back()}}},[t("img",{attrs:{src:s(88579)}})])]})),t("div",{staticClass:"header-center-blank"}),t("div",{staticClass:"header-center"},[e._t("default",(function(){return[e._v(e._s(e.title))]}))],2),e._t("headerRight")],2)},a=[],n=(s(77387),s(68934)),o=s(63822),r={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,o.rn)(["loginUser"]),methods:{...(0,o.nv)(["showAlert","showLoading","hideLoading","toast"]),...n.Z,back(){this.$router.go(-1)}}},l=r,c=s(1001),d=(0,c.Z)(l,i,a,!1,null,null,null),p=d.exports},16545:function(e,t,s){e.exports=s.p+"static/img/grade-pic.7832ce8c.png"},88579:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="},55569:function(e,t,s){e.exports=s.p+"static/img/no-grade.dbad279d.png"}}]);
//# sourceMappingURL=5139.178ff471.js.map