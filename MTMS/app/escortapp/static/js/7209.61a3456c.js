"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[7209],{24894:function(t,e,i){i.d(e,{Z:function(){return w}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vue-uploader"},[t.sliderVisible?e("vue-slider",{attrs:{filelist:t.filelist,fdfsurl:t.fdfsurl,index:t.index},on:{getSlider:t.getSlider}}):t._e(),e("div",{staticClass:"upload"},[e("div",{staticClass:"imglist"},[t._l(t.filelist,(function(i,s){return e("div",{staticClass:"imgitem",on:{click:function(e){return t.deletepic(i.fileurl,s)}}},[e("img",{staticClass:"photos",attrs:{src:t.fdfsurl+i.fileurl}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.isupload,expression:"isupload"}],staticClass:"del",on:{click:function(e){return e.stopPropagation(),t.deleteitems(i.fileurl)}}})])})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isuploadflag&&t.isupload,expression:"isuploadflag&&isupload"}]},[e("div",[e("i",{staticClass:"icon",on:{click:function(e){return t.uploadimg(1)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"pic",on:{click:function(e){t.nowurl=" ",t.show=!1}}},[e("img",{attrs:{src:t.fdfsurl+t.nowurl,alt:""}})])],2)])],1)},a=[],l=(i(70560),i(68934)),n=i(63822),o=function(){var t=this,e=t._self._c;return e("div",{ref:"canvas",attrs:{id:"canvas"},on:{click:t.cancelPic}},[e("ul",{attrs:{id:"outer"}},t._l(t.filelist,(function(i,s){return e("li",[e("img",{attrs:{src:t.fdfsurl+i.fileurl,alt:""}})])})),0)])},r=[],d={name:"vue_slide",props:{filelist:{type:Array,default(){return[]}},fdfsurl:{type:String,default:"http://"},sliderVisible:{type:Boolean,default:!1},index:{default:0}},data(){return{wrap:"",radio:"",scaleW:"",idx:0,isSlide:!1}},mounted(){this.slider()},components:{},watch:{filelist(t,e){console.log(t),this.filelist=t,this.slider()}},methods:{slider(t){this.init(),this.renderDom(),this.bindDOM()},cancelPic(){this.$emit("getSlider",!1)},init(){this.radio=window.innerHeight/window.innerWidth,this.scaleW=window.innerWidth,this.idx=0,this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer");let t=this.filelist.length,e=this.outer.getElementsByTagName("li");for(let i=0;i<t;i++)e[i].style.width=window.innerWidth+"px",e[i].style.webkitTransform="translate3d("+i*this.scaleW+"px, 0, 0)",e[i].style.transform="translate3d("+i*this.scaleW+"px, 0, 0)",e[i].style.MozTransform="translate3d("+i*this.scaleW+"px, 0, 0)"},renderDom(){this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer"),this.outer.style.width=window.innerWidth+"px",this.moveIndex(this.index)},moveIndex(t){let e=this;this.canvas=document.getElementById("canvas"),this.outer=document.getElementById("outer"),e.idx=t;let i=this.filelist.length,s=this.outer.getElementsByTagName("li");for(let a=0;a<i;a++)s[a]&&(s[a].style.webkitTransform="translate3d("+(a-e.idx)*e.scaleW+"px, 0, 0)"),s[a]&&(s[a].style.transform="translate3d("+(a-e.idx)*e.scaleW+"px, 0, 0)")},goIndex(t){let e,i=this.outer.getElementsByTagName("li"),s=i.length;"number"==typeof t?e=t:"string"==typeof t&&(e=this.idx+1*t),e>s-1?e=s-1:e<0&&(e=0),this.idx=e,i[e].style.webkitTransition="-webkit-transform 0.2s ease-out",i[e-1]&&(i[e-1].style.webkitTransition="-webkit-transform 0.2s ease-out"),i[e+1]&&(i[e+1].style.webkitTransition="-webkit-transform 0.2s ease-out"),i[e].style.transition="-webkit-transform 0.2s ease-out",i[e-1]&&(i[e-1].style.transition="-webkit-transform 0.2s ease-out"),i[e+1]&&(i[e+1].style.transition="-webkit-transform 0.2s ease-out"),i[e].style.webkitTransform="translate3d(0,0,0)",i[e-1]&&(i[e-1].style.webkitTransform="translate3d(-"+this.scaleW+"px,0,0)"),i[e+1]&&(i[e+1].style.webkitTransform="translate3d(+"+this.scaleW+"px,0,0)"),i[e].style.transform="translate3d(0,0,0)",i[e-1]&&(i[e-1].style.transform="translate3d(-"+this.scaleW+"px,0,0)"),i[e+1]&&(i[e+1].style.transform="translate3d(+"+this.scaleW+"px,0,0)")},bindDOM(){let t=this,e=function(e){t.startTime=1*new Date,t.startX=e.touches[0].pageX,t.offsetX=0;let i=e.target;while("LI"!=i.nodeName&&"BODY"!=i.nodeName)i=i.parentNode;t.target=i},i=function(e){t.isSlide=!0,t.offsetX=e.targetTouches[0].pageX-t.startX;let i=t.outer.getElementsByTagName("li"),s=t.idx-1,a=s+3;for(s;s<a;s++)i[s]&&(i[s].style.webkitTransition="-webkit-transform 0s ease-out"),i[s]&&(i[s].style.transition="-webkit-transform 0s ease-out"),i[s]&&(i[s].style.webkitTransform="translate3d("+((s-t.idx)*t.scaleW+t.offsetX)+"px, 0, 0)"),i[s]&&(i[s].style.transform="translate3d("+((s-t.idx)*t.scaleW+t.offsetX)+"px, 0, 0)")},s=function(e){let i=t.scaleW/6,s=1*new Date;t.outer.getElementsByTagName("li");s-t.startTime>300?t.offsetX>=i?t.goIndex("-1"):t.offsetX<0&&t.offsetX<-i?t.goIndex("1"):t.goIndex("0"):t.offsetX>50?t.goIndex("-1"):t.offsetX<-50?t.goIndex("+1"):t.goIndex("0")};this.outer.addEventListener("touchstart",e),this.outer.addEventListener("touchmove",i),this.outer.addEventListener("touchend",s)}}},c=d,u=i(1001),h=(0,u.Z)(c,o,r,!1,null,"44d41fc3",null),f=h.exports,g={name:"vue-upload",props:{fdfsurl:{type:String,default:"http://"},isupload:{type:Boolean,default:!0},imgList:{type:Array,default(){return[]}},imgMax:{type:Number,default:5}},data(){return{size:0,filelist:this.imgList,show:!1,nowurl:"",isuploadflag:!0,uploadflag:1,picShow:!1,sliderVisible:!1,index:""}},components:{vueSlider:f},created(){navigator.userAgent.toLowerCase();console.log(this.fdfsurl,this.imgList)},methods:{...l.Z,...(0,n.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),getSlider(t){this.sliderVisible=t},handClick(){alert(1)},callback(){},uploadimg(t){this.filelist.length>this.imgMax-1?this.toast("图片不能超过"+this.imgMax+"张"):1==this.uploadflag&&(1==t?this.invokeNative("TakeAndUploadPhoto",{imgMax:this.imgMax,currentImg:this.filelist.length},this.geturl):this.invokeNative("TakeAndUploadPhoto",{imgMax:this.imgMax,currentImg:this.filelist.length},this.geturlcase))},imgLength(){this.filelist.length>this.imgMax&&(this.isuploadflag=!1)},deleteitems(t){let e=this;this.showConfirm({title:"温馨提示",msg:"您是否要删除当前上传的图片？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){e.filelist&&e.filelist.map(((i,s)=>{i.fileurl==t&&(e.filelist.splice(s,1),e.imgLength())}))}})},deletepic(t,e){this.nowurl=t,this.sliderVisible=!0,this.index=e},geturl(t){let e=this,i=JSON.parse(t);i.data instanceof Array?i.data.forEach((t=>{e.filelist.push({fileurl:t.uri})})):e.filelist.push({fileurl:i.data.uri}),console.log(e.filelist,"-----")}},mounted(){this.imgLength()},watch:{show(t,e){t?$(".__panel").css({height:"100%"}):$(".__panel").css({height:"auto"})},imgList(t,e){this.filelist=this.imgList},fdfsurl(t,e){this.fdfsurl=t}}},m=g,p=(0,u.Z)(m,s,a,!1,null,"3c9a0a4e",null),w=p.exports},97209:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" 记录反馈 "),e("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.uploadflag,expression:"uploadflag"}],staticStyle:{"font-size":"0.3rem"},on:{click:t.submit}},[t._v("提交")])])]),e("div",{staticClass:"g-main"},[t.loading?e("van-loading",{attrs:{color:"#1989fa"}}):t._e(),t.loading?t._e():e("div",{staticClass:"inspection_Item"},[e("div",{staticClass:"history_wrap"},[e("vue-uploader",{ref:"add_picture",staticClass:"add_picture",attrs:{imgList:t.pictureList,fdfsurl:t.fdfsurl,imgMax:100,isupload:t.uploadflag}}),e("p",[t._v("上传照片")]),e("div",{staticClass:"textarea_box"},[e("h3",[t._v("备注")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"请记录现场的问题"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])],1)])],1)],1)},a=[],l=(i(70560),i(22760)),n=i(68934),o=(i(63822),i(24894)),r={name:"recordfeedback",components:{cHeader:l.Z,vueUploader:o.Z},data(){return{fdfsurl:"",pictureList:[],content:"",loading:!0,uploadflag:!1,contentId:"",picList:[],pictureListAdd:[],issignatureshow:!1}},methods:{...n.Z,getPicture(){this.pictureListAdd=[];for(let t of this.$refs.add_picture.filelist)this.picList.push({picurl:t.fileurl,tecId:$.cookie("uid"),teId:this.$route.query.teId})},back(){window.history.back()},submit(){let t=this;0!=this.pictureList.length?this.content?(this.getPicture(),this.$toast("正在提交"),this.post("/turnExamInfo/turnExamUploadpic",{command:"turnExamInfo/turnExamUploadpic",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),tecId:$.cookie("uid"),teId:this.$route.query.teId,contentId:this.contentId,picList:this.picList,content:this.content}).done((e=>{this.loading=!1,e&&e.errcode?0==e.errcode?window.history.back():t.toast(e.errdesc):t.toast("系统错误，请联系管理员~")}))):this.$toast("请输入备注"):this.$toast("请上传图片")},init(){let t=this;this.post("/turnExamInfo/queryRecordFeedback",{command:"turnExamInfo/queryRecordFeedback",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),tecId:$.cookie("uid"),teId:this.$route.query.teId,deptList:this.$route.query.deptId}).done((e=>{if(this.loading=!1,e&&e.errcode)if(0==e.errcode){let t=e.dscpdetail;this.uploadflag=0!==e.uploadflag,this.fdfsurl=e.fdfsurl,this.contentId=t.id;for(let i of e.piclist)this.pictureList.push({fileurl:i.picurl});this.content=t.content}else t.$toast(e.errdesc);else t.$toast("系统错误，请联系管理员~")}))}},mounted(){this.registerToNative("goBack",(function(t){this.back()})),this.init()}},d=r,c=i(1001),u=(0,c.Z)(d,s,a,!1,null,"0bc19028",null),h=u.exports},22760:function(t,e,i){i.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header",attrs:{id:"header"}},[t._t("headerLeft",(function(){return[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]})),e("div",{staticClass:"header-center-blank"}),e("div",{staticClass:"header-center"},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2),t._t("headerRight")],2)},a=[],l=(i(77387),i(68934)),n=i(63822),o={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,n.rn)(["loginUser"]),methods:{...(0,n.nv)(["showAlert","showLoading","hideLoading","toast"]),...l.Z,back(){this.$router.go(-1)}}},r=o,d=i(1001),c=(0,d.Z)(r,s,a,!1,null,null,null),u=c.exports},88579:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=7209.61a3456c.js.map