{"version":3,"file":"static/js/854.227831a7.js","mappings":"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","sources":["webpack://app/./src/views/extranceExam/signature.vue","webpack://app/src/views/extranceExam/signature.vue","webpack://app/./src/views/extranceExam/signature.vue?5c97","webpack://app/./src/views/extranceExam/signature.vue?7ebe","webpack://app/./src/views/header.vue","webpack://app/src/views/header.vue","webpack://app/./src/views/header.vue?58fa","webpack://app/./src/views/header.vue?9332"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"g-wrapper\"},[_c('c-header',[_c('div',{attrs:{\"slot\":\"headerLeft\"},slot:\"headerLeft\"},[_c('a',{staticClass:\"header-back-btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.back()}}},[_c('img',{attrs:{\"src\":require(\"../../assets/images/icon_fanhui.png\")}})])]),_vm._v(\" 签名 \"),_c('div',{attrs:{\"slot\":\"headerRight\"},slot:\"headerRight\"},[_c('span',{staticStyle:{\"font-size\":\"0.3rem\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.submit.apply(null, arguments)}}},[_vm._v(\"提交\")])])]),_c('iframe',{staticStyle:{\"display\":\"none\"},attrs:{\"name\":\"iframe\"}}),_c('div',{staticClass:\"g-main\"},[_c('ul',{staticClass:\"top\"},[_c('li',[_vm._v(\"学员：\"+_vm._s(_vm.datalist.name))]),_c('li',[_vm._v(\"得分：\"+_vm._s(_vm.datalist.score))])]),_c('div',{staticClass:\"signature-c\"},[_c('p',{staticClass:\"sign-p\",on:{\"click\":_vm.signatureFn}},[_vm._v(\"此处签名\")]),_c('div',{ref:\"canvas\",attrs:{\"id\":\"canvas\"}})]),_c('div',{staticClass:\"signature-btn\"},[_c('button',{ref:\"clearCanvas\",staticStyle:{\"margin-left\":\"0.2rem\"},attrs:{\"id\":\"clearCanvas\"}},[_vm._v(\"清除签名\")])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"g-wrapper\" >\r\n        <c-header>\r\n            <div slot=\"headerLeft\">\r\n                <a class=\"header-back-btn\" @click.stop=\"back()\">\r\n                    <img src=\"../../assets/images/icon_fanhui.png\" />\r\n                </a>\r\n            </div>\r\n            签名\r\n            <div slot=\"headerRight\">\r\n                <span style=\"font-size: 0.3rem\" @click.stop=\"submit\">提交</span>\r\n            </div>\r\n        </c-header>\r\n        <iframe name=\"iframe\" style=\"display:none;\"></iframe>\r\n        <div class=\"g-main\">\r\n            <ul class=\"top\">\r\n                <li>学员：{{datalist.name}}</li>\r\n                <li>得分：{{datalist.score}}</li>\r\n            </ul>\r\n            <div class=\"signature-c\">\r\n                <p @click=\"signatureFn\" class=\"sign-p\">此处签名</p>\r\n                <div id=\"canvas\" ref=\"canvas\">\r\n\r\n                </div>\r\n            </div>\r\n            <div class=\"signature-btn\"  >\r\n                 <button id=\"clearCanvas\" ref=\"clearCanvas\" style=\"margin-left:0.2rem\">清除签名</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Vue from 'vue'\r\n    import cHeader from '@/views/header'\r\n    import methods from '@/methods'\r\n    import { mapState,mapActions } from 'vuex'\r\n    export default {\r\n        name: \"signature\",\r\n        props:{\r\n          datalist:{\r\n              defalut(){\r\n                  return {}\r\n              }\r\n          }\r\n        },\r\n        data(){\r\n          return{\r\n              isSign:false,\r\n              url:''\r\n          }\r\n        },\r\n        components:{\r\n            cHeader,\r\n        },\r\n        mounted(){\r\n            let self=this;\r\n            this.registerToNative('goBack', function (data) {\r\n                this.back()\r\n            });\r\n            this.$nextTick(()=>{\r\n                this.lineCanvas({\r\n                    el: this.$refs.canvas,//绘制canvas的父级div\r\n                    clearEl:  this.$refs.clearCanvas,//清除按钮\r\n                    saveEl:  this.$refs.saveCanvas,//保存按钮\r\n                });\r\n            })\r\n        },\r\n        watch:{\r\n            datalist(val){\r\n                console.log(val);\r\n            }\r\n        },\r\n        methods:{\r\n            ...methods,\r\n            submit(){\r\n                if(!this.isSign){\r\n                    this.$toast(\"请留下您的签名\");\r\n                    return;\r\n                }else{\r\n                    this.$emit('getsubmit', this.canvas.toDataURL())\r\n                }\r\n            },\r\n            save(){\r\n                this.url=this.canvas.toDataURL();\r\n                var formdata=new FormData();\r\n                formdata.append('file',this.url);\r\n                console.log(formdata.get('file'))\r\n                $.ajax({\r\n                    url:'/file/upload',\r\n                    type:\"post\",\r\n                    data:{formdata},\r\n                    processData: false,\r\n                    contentType:false,\r\n                    success:function (res) {\r\n                        console.log(res)\r\n                    }\r\n                })\r\n            },\r\n            //签名\r\n            lineCanvas(obj) {\r\n                this.linewidth = 1;\r\n                this.color = \"#000000\";\r\n                this.background = \"#ffffff\";\r\n                for (var i in obj) {\r\n                    this[i] = obj[i];\r\n                };\r\n                this.canvas = document.createElement(\"canvas\");\r\n                this.el.appendChild(this.canvas);\r\n                this.cxt = this.canvas.getContext(\"2d\");\r\n                this.canvas.width = this.el.clientWidth;\r\n                this.canvas.height = this.el.clientHeight;\r\n                this.cxt.fillStyle = this.background;\r\n                this.cxt.fillRect(0, 0, this.canvas.width, this.canvas.width);\r\n                this.cxt.strokeStyle = this.color;\r\n                this.cxt.lineWidth = this.linewidth;\r\n                this.cxt.lineCap = \"round\";\r\n                //开始绘制\r\n                this.canvas.addEventListener(\"touchstart\", function(e) {\r\n                    $('.sign-p').css('display','none');\r\n                    this.cxt.beginPath();\r\n                    this.cxt.moveTo(e.changedTouches[0].pageX, e.changedTouches[0].pageY-$('.signature-c').offset().top);\r\n                }.bind(this), false);\r\n                //绘制中\r\n                this.canvas.addEventListener(\"touchmove\", function(e) {\r\n                    this.cxt.lineTo(e.changedTouches[0].pageX, e.changedTouches[0].pageY-$('.signature-c').offset().top);\r\n                    this.isSign= true;\r\n                    this.cxt.stroke();\r\n                }.bind(this), false);\r\n                //结束绘制\r\n                this.canvas.addEventListener(\"touchend\", function() {\r\n                    this.cxt.closePath();\r\n                }.bind(this), false);\r\n                //清除画布\r\n                this.clearEl.addEventListener(\"click\", function() {\r\n                    this.cxt.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                    this.isSign=false;\r\n                }.bind(this), false);\r\n                //保存图片，直接转base64\r\n            },\r\n            signatureFn($event){\r\n                $(\".sign-p\").html('');\r\n\r\n\r\n            },\r\n            back(){\r\n               this.$emit('getInfo',false);\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    @import \"../../scss/mixin\";\r\n    .g-wrapper{\r\n        position: fixed;\r\n        z-index: 0;\r\n        width: 100vw;\r\n        height: 100vh;\r\n        top:0;\r\n        left:0;\r\n        z-index: 10;\r\n        .g-main{\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            background: #F8F8F8;\r\n            ul.top{\r\n                background: #fff;\r\n                li{\r\n                    height: 0.6rem;\r\n                    line-height: 0.6rem;\r\n                    padding: 0 0.2rem;\r\n                    border-bottom: 1px solid $borderColor;\r\n                }\r\n            }\r\n            .signature-c{\r\n                margin-top:0.2rem;\r\n                min-height: 5rem;\r\n                background: #fff;\r\n                display:flex;\r\n                flex-flow: column nowrap;\r\n                justify-content:center;\r\n                align-items: center;\r\n                font-size:0.5rem;\r\n                border-bottom: 1px solid $borderColor;\r\n                height: 100%;\r\n                position: relative;\r\n                .sign-p{\r\n                    position: absolute;\r\n                    margin:auto;\r\n                    z-index:10;\r\n                    opacity: 0.3;\r\n                }\r\n            }\r\n            .signature-btn{\r\n                display:flex;\r\n                justify-content: flex-end;\r\n                border:none;\r\n                margin-top:0.2rem;\r\n                padding: 0.2rem;\r\n                padding-bottom: 0.4rem;\r\n                button{\r\n                    padding: 0.1rem;\r\n                    border:1px solid $activeColor;\r\n                    text-align: center;\r\n                    display: flex;\r\n                    flex-flow: row nowrap;\r\n                    justify-content: center;\r\n                    align-items: center;\r\n                    color:$activeColor;\r\n                    border-radius: 5px;\r\n                    background:#fff;\r\n\r\n                }\r\n            }\r\n            #canvas{\r\n                width: 100%;\r\n                height:100%;\r\n                position: relative;\r\n            }\r\n            #canvas canvas{\r\n                display: block;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./signature.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./signature.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./signature.vue?vue&type=template&id=d9710f5e&scoped=true\"\nimport script from \"./signature.vue?vue&type=script&lang=js\"\nexport * from \"./signature.vue?vue&type=script&lang=js\"\nimport style0 from \"./signature.vue?vue&type=style&index=0&id=d9710f5e&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d9710f5e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header\",attrs:{\"id\":\"header\"}},[_vm._t(\"headerLeft\",function(){return [_c('a',{staticClass:\"header-back-btn\",on:{\"click\":function($event){return _vm.back()}}},[_c('img',{attrs:{\"src\":require(\"../assets/images/icon_fanhui.png\")}})])]}),_c('div',{staticClass:\"header-center-blank\"}),_c('div',{staticClass:\"header-center\"},[_vm._t(\"default\",function(){return [_vm._v(_vm._s(_vm.title))]})],2),_vm._t(\"headerRight\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"header\" class=\"header\">\r\n        <slot name=\"headerLeft\">\r\n            <a @click=\"back()\" class=\"header-back-btn\"><img src=\"../assets/images/icon_fanhui.png\"></a>\r\n        </slot>\r\n        <div class=\"header-center-blank\"></div>\r\n        <div class=\"header-center\">\r\n            <slot>{{title}}</slot>\r\n        </div>\r\n        <slot name=\"headerRight\"></slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import $ from 'jquery';\r\n    import methods from '../methods';\r\n\r\n    import { mapState, mapActions } from 'vuex';\r\n\r\n    export default {\r\n        props: ['title'],\r\n        data() {\r\n            return {\r\n                // isWeiXin: navigator.userAgent.toLowerCase().indexOf('micromessenger') !== -1\r\n            }\r\n        },\r\n        created() { },\r\n        mounted() { },\r\n        computed: mapState([\r\n            'loginUser'\r\n        ]),\r\n        methods: {\r\n            ...mapActions([\r\n                'showAlert',\r\n                'showLoading',\r\n                'hideLoading',\r\n                'toast'\r\n            ]),\r\n            ...methods,\r\n            back() {\r\n                this.$router.go(-1);\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./header.vue?vue&type=template&id=131f69dc\"\nimport script from \"./header.vue?vue&type=script&lang=js\"\nexport * from \"./header.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","on","$event","stopPropagation","back","require","_v","staticStyle","submit","apply","arguments","_s","datalist","name","score","signatureFn","ref","staticRenderFns","props","defalut","data","isSign","url","components","cHeader","mounted","registerToNative","$nextTick","lineCanvas","el","$refs","canvas","clearEl","clearCanvas","saveEl","saveCanvas","watch","val","console","log","methods","$emit","toDataURL","$toast","save","formdata","FormData","append","get","$","ajax","type","processData","contentType","success","res","obj","i","linewidth","color","background","document","createElement","appendChild","cxt","getContext","width","clientWidth","height","clientHeight","fillStyle","fillRect","strokeStyle","lineWidth","lineCap","addEventListener","e","css","beginPath","moveTo","changedTouches","pageX","pageY","offset","top","bind","lineTo","stroke","closePath","clearRect","html","component","_t","title","created","computed","mapState","mapActions","$router","go"],"sourceRoot":""}