"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[1707],{62266:function(t,e,i){i.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(i,s){return e("li",{domProps:{innerHTML:t._s(i.txt)}})})),0)])])])])},n=[],a=(i(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((i=>{if("string"===e)i.txt=i[this.config.valueKey],t.push(i);else if("function"===e){let e=this.config.valueKey(i);i.txt=e,t.push(i)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,i)=>{e==(t||this.config.defaultVal)&&(this.activeItem=i,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,i=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=i&&(this.Y=i,this.eY=i,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let s=Math.abs((this.eY-e)/45);this.activeItem=Math.round(s),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),o=a,r=i(1001),c=(0,r.Z)(o,s,n,!1,null,"e3fc68ee",null),l=c.exports},51707:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]),t._v(" 考勤 ")]),e("div",{staticClass:"g-main"},[e("p",{staticClass:"workdate"},[t._v(t._s(t._f("substr")(t.workdate,0,4))+"年"+t._s(t._f("substr")(t.workdate,5,2))+"月"+t._s(t._f("substr")(t.workdate,8,2))+"日 ")]),t._m(0),e("div",{staticClass:"info"},[e("ul",{staticClass:"getinfo"},[e("li",[e("span",{class:{active:0==t.i},on:{click:function(e){t.i=0,t.showlist=t.signinlist}}},[t._v("已签到("+t._s(t.signinlist.length)+")")])]),e("li",[e("span",{class:{active:1==t.i},on:{click:function(e){t.i=1,t.showlist=t.notsignlist}}},[t._v("未签到("+t._s(t.notsignlist.length)+")")])])]),e("ul",{staticClass:"stu-list"},[t._m(1),t._l(t.showlist,(function(i,s){return e("li",{class:{choice:1==i.editflag,noclick:0==i.editflag},on:{click:function(e){t.status.show=!0,t.id=i.id}}},[e("span",[t._v(t._s(i.name))]),e("span",[t._v(t._s(i.username))]),e("span",[t._v(t._s(i.workusername))]),e("span",[t._v(t._s(i.workattendancename))])])})),e("li",{directives:[{name:"show",rawName:"v-show",value:0==t.showlist.length,expression:"showlist.length == 0"}]},[e("span",[t._v(" 暂无内容 ")])])],2)]),e("c-picker",{attrs:{config:t.status},on:{confirm:t.changeSinginStatus}}),e("van-popup",{attrs:{"lazy-render":!1,"close-on-click-overlay":!1,position:"bottom"},model:{value:t.listShow,callback:function(e){t.listShow=e},expression:"listShow"}},[e("van-picker",{ref:"van_picker",attrs:{"show-toolbar":"",title:"3"==t.workattendanceType?"旷工":"4"==t.workattendanceType?"迟到":"5"===t.workattendanceType?"早退":"其他",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm},scopedSlots:t._u([{key:"option",fn:function(i){return[e("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[e("div",[t._v(t._s(i)+t._s("3"==t.workattendanceType?"天":"分钟"))])])]}}])})],1)],1)],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"census-content"},[e("div",{attrs:{id:"echart"}})])},function(){var t=this,e=t._self._c;return e("li",[e("span",[t._v("姓名")]),e("span",[t._v("学号")]),e("span",[t._v("带教老师")]),e("span",[t._v("出勤情况")])])}],a=(i(70560),i(68934)),o=i(63822),r=i(22760),c=i(62266),l=i(39405),d=i.n(l),h=i(88848),u=(i(63604),i(4358),i(89174),{props:["active"],data(){return{id:"",opinion:["签到","请假","旷工","迟到","早退"],opinionData:[],deptid:"",deptlist:"",signinlist:[],notsignlist:[],i:0,showlist:[],status:{show:!1,mainlist:[],valueKey:"name"},colTitle:"",listShow:!1,workattendanceType:"",columns:[],day_columns:[1,.5]}},components:{cPicker:c.Z,cHeader:r.Z},watch:{},filters:{rate:function(t){return Number(t).toFixed(2)}},computed:{...(0,o.rn)(["turninfo","systype","singindept","turnstatus"])},created(){this.workdate=this.turninfo.workdate},mounted(){let t=this;this.init(),this.getstulist(),this.initstatus(),this.registerToNative("goBack",(function(e){t.back()}))},methods:{...a.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast","setSystype","setSingindept"]),initstatus(){let t=this;this.post("/traineestudent/queryDictionaryList",{command:"traineestudent/queryDictionaryList",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"workattendancetype_pub"}).done((e=>{e&&e.errcode?0==e.errcode?t.status.mainlist=e.dic_list:t.toast(e.errdesc):t.toast("系统错误，请联系管理员~")}))},init(){let t=this;this.post("/workattendance/workattendancedayanalysis",{command:"workattendance/workattendancedayanalysis",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),systype:t.systype,deptid:t.singindept,workdate:t.workdate,stdtype:t.turnstatus}).done((e=>{e&&0==e.errcode?(t.opinionData="",t.opinionData=[{value:e.bean.signpercent,name:"签到"},{value:e.bean.leavepercent,name:"请假"},{value:e.bean.absencepercent,name:"旷工"},{value:e.bean.latepercent,name:"迟到"},{value:e.bean.earlyretreatpercent,name:"早退"}],t.$nextTick((function(){t.drawGraph("echart")}))):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},drawGraph:function(t){let e=this;e.chart=d().init(document.getElementById(t)),this.chart.showLoading(),e.chart.setOption({title:{text:"考勤分析",x:"center"},tooltip:{trigger:"item",show:!1,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:0,left:"center",data:e.opinion,itemHeight:10,itemWidth:10,itemGap:6,textStyle:{fontSize:12}},series:[{type:"pie",center:["50%","50%"],radius:["35%","50%"],data:e.opinionData,label:{normal:{formatter:"{b}：{d}%  "}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#c7f316","#38ce9b","#ebb600","#00b4f4","#f97a1c","#a550f5"]}),this.chart.hideLoading()},getstulist(){let t=this;this.post("/workattendance/getworkattendanceforsecretary",{command:"workattendance/getworkattendanceforsecretary",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),systype:t.systype,deptid:t.singindept,workdate:t.workdate,stdtype:t.turnstatus}).done((e=>{e&&0==e.errcode?(t.signinlist=e.result.signlist,t.notsignlist=e.result.notsignlist,t.showlist=0==t.i?e.result.signlist:e.result.notsignlist):e.errdesc?t.toast(e.errdesc):t.toast("服务器错误，请联系管理员。")}))},changeSinginStatus(t){let e=this;return e.workattendanceType=t.key,"3"==t.key?(e.columns=e.day_columns,void(e.listShow=!0)):"4"==t.key||"5"==t.key?(e.columns=e.generateArray(),void(e.listShow=!0)):void this.post("/workattendance/updateworkattendance",{command:"workattendance/updateworkattendance",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),id:e.id,workattendancetype:t.key}).done((t=>{t&&t.errcode?0==t.errcode?(e.status.show=!1,e.toast("修改成功~"),e.getstulist(),e.init()):e.toast(t.errdesc):e.toast("系统错误，请联系管理员~")}))},back(){this.$router.push({name:"fdAttendance_history"})},onCancel(){let t=this;t.$refs.van_picker.setIndexes([0]),t.listShow=!1},onConfirm(t){let e=this;console.log(t),console.log(e.workattendanceType),this.post("/workattendance/updateworkattendance",{command:"workattendance/updateworkattendance",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),id:e.id,workattendancetype:e.workattendanceType,timeLength:t,timeUnit:"3"==e.workattendanceType?4:2}).done((t=>{t&&t.errcode?0==t.errcode?(e.status.show=!1,e.listShow=!1,e.$refs.van_picker.setIndexes([0]),(0,h.Z)("修改成功~"),e.getstulist(),e.init()):e.toast(t.errdesc):e.toast("系统错误，请联系管理员~")}))},generateArray(){const t=[];for(let e=1;e<=120;e++)t.push(e);return t}}}),p=u,m=i(1001),g=(0,m.Z)(p,s,n,!1,null,"33ee05f1",null),f=g.exports},22760:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header",attrs:{id:"header"}},[t._t("headerLeft",(function(){return[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]})),e("div",{staticClass:"header-center-blank"}),e("div",{staticClass:"header-center"},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2),t._t("headerRight")],2)},n=[],a=(i(77387),i(68934)),o=i(63822),r={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,o.rn)(["loginUser"]),methods:{...(0,o.nv)(["showAlert","showLoading","hideLoading","toast"]),...a.Z,back(){this.$router.go(-1)}}},c=r,l=i(1001),d=(0,l.Z)(c,s,n,!1,null,null,null),h=d.exports},88579:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=1707.acccda1f.js.map