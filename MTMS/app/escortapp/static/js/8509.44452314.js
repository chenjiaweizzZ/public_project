"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[8509],{62266:function(e,t,s){s.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.config.show,expression:"config.show"}],attrs:{id:"picker"}},[t("div",{attrs:{id:"picker-main"}},[t("header",[t("span",{on:{click:e.cancle}},[e._v("取消")]),t("span",{class:{noclick:e.isdisabled},on:{click:e.sure}},[e._v("确定")])]),t("section",[t("div",{staticClass:"on"}),t("ul",{style:e.style,on:{touchstart:function(t){return t.preventDefault(),e.start.apply(null,arguments)},touchmove:function(t){return t.preventDefault(),e.move.apply(null,arguments)},touchend:function(t){return t.preventDefault(),e.end.apply(null,arguments)}}},e._l(e.list,(function(s,i){return t("li",{domProps:{innerHTML:e._s(s.txt)}})})),0)])])])])},a=[],l=(s(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(e,t){e!==t&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let e=[],t=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((e=>{e.txt=e.name}))):(this.isdisabled=!1,this.config.mainlist.map((s=>{if("string"===t)s.txt=s[this.config.valueKey],e.push(s);else if("function"===t){let t=this.config.valueKey(s);s.txt=t,e.push(s)}}))),this.curVal=e[this.activeItem],this.itemLength=e.length,e}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(e){this.list.map(((t,s)=>{t==(e||this.config.defaultVal)&&(this.activeItem=s,this.activeItemValue=t)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(e){this.sY=e.touches[0].clientY,this.touchStartTime=e.timeStamp},move(e){this.Y=this.eY+e.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(e){let t=90,s=-45*(this.itemLength-1)+t;if(this.eY=this.Y,this.touchEndTime=e.timeStamp-this.touchStartTime,this.t=.1,this.sY==e.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>t&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=s&&(this.Y=s,this.eY=s,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let i=Math.abs((this.eY-t)/45);this.activeItem=Math.round(i),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),n=l,o=s(1001),r=(0,o.Z)(n,i,a,!1,null,"e3fc68ee",null),c=r.exports},30908:function(e,t,s){s.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.btn.active,expression:"btn.active"}]},[e._t("default")],2)},a=[],l={props:{defaultCls:{type:String,default:"tab"},title:{type:String,require:!0},active:{type:Boolean,default:!1},className:{type:String,default:""},data:{},bus:{}},data(){return{btn:{title:"",active:!1}}},watch:{title:function(e){this.btn.title=e}},created(){this.btn.title=this.title,this.btn.active=!!this.active,this.btn.data=this.data},mounted(){this.bus.$emit("addtabbtn",this.btn)},computed:{}},n=l,o=s(1001),r=(0,o.Z)(n,i,a,!1,null,null,null),c=r.exports},53003:function(e,t,s){s.d(t,{Z:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabs-container",class:{"g-wrapper":"pin"===e.mode}},[t("div",{staticClass:"tabs",class:e.className},e._l(e.tabBtns,(function(s,i){return t("div",{staticClass:"tab",class:{active:s.active},attrs:{tapmode:""},on:{click:function(t){return e.activeTab(i)}}},[t("label",[e._v(e._s(s.title))]),i<=0?[t("div",{staticClass:"tab-current-bg"})]:e._e()],2)})),0),t("div",{staticClass:"tabs-content",class:e.contentclass},[e._t("default")],2)])},a=[],l=(s(70560),s(77387)),n=s.n(l),o={props:{active:{type:Number,default:0},type:{type:String,require:!0},shape:{type:String,default:""},className:{type:String,default:""},contentClassName:{type:String,default:""},bus:{},mode:{type:String,default:""}},data(){return{tabBtns:[],activeSS:this.active}},events:{},computed:{contentclass:function(){return this.contentClassName+" "+("pin"===this.mode?"g-main":"")}},components:{},created(){let e=!0;this.bus.$on("addtabbtn",(t=>{this.tabBtns.push(t);for(let e=0;e<this.tabBtns.length;e++)this.tabBtns[e].active&&(this.activeSS=e);e&&0===this.activeSS&&(e=!1,this.$emit("change-tab",this.tabBtns[0])),this.$nextTick((function(){this.moveBg(this.activeSS)}))}))},mounted(){},watch:{activeSS:function(e,t){console.log(e,789),this.moveBg(e),this.$emit("change-tab",this.tabBtns[e])}},methods:{activeTab:function(e){this.activeSS=e;for(let t=0;t<this.tabBtns.length;t++)this.tabBtns[t].active=e===t},moveBg(e){let t=n()(this.$el),s=t.find(".tabs"),i=s.find(`.tab:eq(${e})`),a=s.find(".tab-current-bg"),l=i.find("label"),o=a.closest(".tab").offset(),r=l.offset(),c=(r&&r.left||0)-(o&&o.left||0);a.css({width:l.outerWidth(),"-webkit-transform":"translate3d("+c+"px,0,0)",transform:"translate3d("+c+"px,0,0)"})}}},r=o,c=s(1001),d=(0,c.Z)(r,i,a,!1,null,null,null),h=d.exports},52629:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-wrapper new-edit-active"},[t("c-header",[t("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[t("a",{staticClass:"header-back-btn",on:{click:function(t){return e.back()}}},[t("img",{attrs:{src:s(88579)}})])]),e._v("编辑教学活动计划 "),t("div",{staticStyle:{"font-size":"0.3rem"},attrs:{slot:"headerRight"},on:{click:e.submit},slot:"headerRight"},[e._v("提交")])]),t("div",{staticClass:"g-main"},[t("div",{staticClass:"self-form-add"},[t("div",{staticClass:"whiteCol"},[t("div",{staticClass:"selectRdaio"},[t("span",[e._v("活动级别")]),t("van-radio-group",{staticClass:"selfRdaio",attrs:{disabled:e.disabled},model:{value:e.levelcode,callback:function(t){e.levelcode=t},expression:"levelcode"}},e._l(e.levellist,(function(s,i){return t("van-radio",{key:i,attrs:{name:s.levelcode,disabled:0==s.levelvalue}},[e._v(e._s(s.levelname))])})),1)],1)]),t("div",{staticClass:"afhakfa"},[t("van-cell",{class:"请选择"==e.form.dept?"":"weightCol",attrs:{title:e.levelname,value:e.form.dept,"is-link":"",size:"large"}})],1),t("div",{staticClass:"margin-gap"},[t("van-field",{attrs:{label:"活动主题",placeholder:"请输入",size:"large","input-align":"right",maxlength:"120"},model:{value:e.form.theme,callback:function(t){e.$set(e.form,"theme",t)},expression:"form.theme"}}),t("van-cell",{class:"请选择"==e.form.type?"":"weightCol",attrs:{title:"活动类型",value:e.form.type,"is-link":"",size:"large"},on:{click:function(t){e.seltype.show=!0}}})],1),e._l(e.timeArr,(function(i,a){return t("div",{key:a,staticClass:"margin-gap gap-time"},[t("van-cell",{attrs:{title:"活动时间"}},[t("img",{attrs:{src:s(54816)},on:{click:function(t){return e.deleteTime(a)}}})]),t("van-cell",{class:"请选择"==i.date?"":"weightCol",attrs:{title:"活动日期",value:i.date,"is-link":"",size:"large"},on:{click:function(t){return e.selectDate(a)}}}),t("van-cell",{class:"请选择"==i.startTime?"":"weightCol",attrs:{title:"开始时间",value:i.startTime,"is-link":"",size:"large"},on:{click:function(t){return e.selectTime(a,0)}}}),t("van-cell",{class:"请选择"==i.endTime?"":"weightCol",attrs:{title:"结束时间",value:i.endTime,"is-link":"",size:"large"},on:{click:function(t){return e.selectTime(a,1)}}})],1)})),e.showAddtime?t("div",{staticClass:"whiteCol"},[t("div",{staticClass:"addTime",on:{click:e.addTime}},[t("div",[e._v("添加活动时间")])])]):e._e(),t("div",{staticClass:"margin-gap"},[t("van-field",{attrs:{label:"活动地点",placeholder:"请输入",size:"large","input-align":"right",maxlength:"512"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("div",{staticClass:"margin-gap"},[e.periodShow?t("van-field",{attrs:{label:"学时",placeholder:"",size:"large","input-align":"right",maxlength:"512",readonly:""},model:{value:e.form.period,callback:function(t){e.$set(e.form,"period",t)},expression:"form.period"}}):e._e(),t("van-cell",{class:"请选择"==e.form.speakers?"":"weightCol",attrs:{title:"主讲人",value:e.form.speakers,"is-link":"",size:"large"},on:{click:e.initteacher}}),t("van-cell",{class:"请选择"==e.form.student?"":"weightCol",attrs:{title:"参与人员",value:e.form.student,"is-link":"",size:"large"},on:{click:e.initstudent}})],1),t("div",{staticClass:"margin-gap bottom-gap"},[e._m(0),t("van-field",{attrs:{type:"textarea",placeholder:"请输入",autosize:e.autosize,maxlength:"100"},on:{input:e.oninput},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}},[t("template",{slot:"label"},[e._v(e._s(e.form.remark.length)+"/100")])],2)],1),t("div",{staticClass:"bottom"},[t("div",{staticClass:"submitBtn",on:{click:e.submit}},[e._v("提交")])]),t("van-popup",{attrs:{position:"bottom",overlay:""},model:{value:e.showDate,callback:function(t){e.showDate=t},expression:"showDate"}},[t("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate},on:{confirm:e.closeDate,cancel:e.cancelDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("van-popup",{attrs:{position:"bottom",overlay:""},model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}},[t("van-datetime-picker",{attrs:{type:"time"},on:{confirm:e.closeTime,cancel:e.cancelTime},model:{value:e.selectTimePick,callback:function(t){e.selectTimePick=t},expression:"selectTimePick"}})],1)],2),t("c-modal",{attrs:{config:e.selectTeacher}},[t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},[t("ul",{staticClass:"doctorupdata"},e._l(e.teacher,(function(s,i){return t("li",[e._v(" "+e._s(s.name)+" "),s.username?[e._v("-"+e._s(s.username))]:e._e(),t("i",{staticClass:"deleteitem",on:{click:function(t){return e.deletedoctor(s.id,0)}}},[e._v("删 除")])],2)})),0)])])]),t("c-modal",{attrs:{config:e.selectDoctor}},[t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},[t("ul",{staticClass:"doctorupdata"},e._l(e.student,(function(s,i){return t("li",[t("span",[e._v(" "+e._s(s.name)+" "),s.username?[e._v("-"+e._s(s.username))]:e._e(),s.count?[e._v("("+e._s(s.count)+"人)")]:e._e()],2),1!==s.type?t("i",{staticClass:"deleteitem",on:{click:function(t){return e.deletedoctor(s.id,1,s.type)}}},[e._v("删 除1")]):e._e()])})),0),"office"==e.surelevel.levelcode||"hospital"==e.surelevel.levelcode?[t("ul",{staticClass:"doctorupdata"},e._l(e.student_turndoctor,(function(s,i){return t("li",[t("span",[e._v(" "+e._s(s.name)+" "),s.username?[e._v("-"+e._s(s.username))]:e._e(),s.count?[e._v("("+e._s(s.count)+"人)")]:e._e()],2),1!==s.type?t("i",{staticClass:"deleteitem",on:{click:function(t){return e.deletedoctor(s.id,1,s.type)}}},[e._v("删 除")]):e._e()])})),0),t("ul",{staticClass:"doctorupdata"},e._l(e.student_trainee,(function(s,i){return t("li",[t("span",[e._v(" "+e._s(s.name)+" "),s.username?[e._v("-"+e._s(s.username))]:e._e(),s.count?[e._v("("+e._s(s.count)+"人)")]:e._e()],2),1!==s.type?t("i",{staticClass:"deleteitem",on:{click:function(t){return e.deletedoctor(s.id,1,s.type)}}},[e._v("删 除3")]):e._e()])})),0)]:e._e()],2)])]),t("transition",{attrs:{"enter-active-class":"animated slideInRight","leave-active-class":"animated fadeOut"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.choiceteacher,expression:"choiceteacher"}],staticClass:"department g-wrapper"},[t("c-header",[t("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[t("a",{staticClass:"header-back-btn",on:{click:function(t){e.choiceteacher=!1}}},[t("img",{attrs:{src:s(88579)}})])]),e._v("选择主讲人 "),t("div",{staticStyle:{"font-size":"0.3rem"},attrs:{slot:"headerRight"},on:{click:e.closeteacher},slot:"headerRight"},[e._v("确定")])]),t("div",{staticClass:"search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchname,expression:"searchname"}],attrs:{type:"text",placeholder:"搜索"},domProps:{value:e.searchname},on:{input:function(t){t.target.composing||(e.searchname=t.target.value)}}}),t("i",{on:{click:function(t){return e.searchteacher()}}})]),t("div",{staticClass:"g-main"},[t("div",{staticClass:"flex-item class-sel-list",staticStyle:{"padding-bottom":"0.6rem"}},[t("div",{staticClass:"list info-list list-inner"},e._l(e.teacherlist,(function(s){return t("div",{staticClass:"item"},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v(e._s(s.name)+"-"+e._s(s.username))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.teacher,expression:"teacher"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:{id:s.id,name:s.name},checked:Array.isArray(e.teacher)?e._i(e.teacher,{id:s.id,name:s.name})>-1:e.teacher},on:{change:function(t){var i=e.teacher,a=t.target,l=!!a.checked;if(Array.isArray(i)){var n={id:s.id,name:s.name},o=e._i(i,n);a.checked?o<0&&(e.teacher=i.concat([n])):o>-1&&(e.teacher=i.slice(0,o).concat(i.slice(o+1)))}else e.teacher=l}}})])])})),0)])]),t("div",{staticClass:"result",on:{click:function(t){e.selectTeacher.show=!0}}},[t("p",[e._v("已选主讲人（"+e._s(e.teacher.length)+"）")])])],1)]),t("transition",{attrs:{"enter-active-class":"animated slideInRight","leave-active-class":"animated fadeOut"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.choicestudent,expression:"choicestudent"}],staticClass:"department g-wrapper"},[t("c-header",[t("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[t("a",{staticClass:"header-back-btn",on:{click:function(t){e.choicestudent=!1}}},[t("img",{attrs:{src:s(88579)}})])]),e._v("选择参与人员 "),t("div",{staticStyle:{"font-size":"0.3rem"},attrs:{slot:"headerRight"},on:{click:function(t){return e.confirmselofficetrainee1(0)}},slot:"headerRight"},[e._v("确定")])]),t("div",{staticClass:"g-main"},["base"==e.surelevel.levelcode?[t("ul",e._l(e.basechecklist,(function(s,i){return t("li",{staticClass:"checkbase",class:{"checkbase-active":s.ischecked},on:{click:function(t){return e.checkbase(s)}}},[e._v(e._s(s.name)+"("+e._s(s.count)+"人)")])})),0)]:[t("ul",[t("li",{staticClass:"choice",on:{click:function(t){return e.initstudentlist("turndoctor")}}},[e._v("护培生")])])],t("c-modal",{attrs:{config:e.selhospital}},[e._v(" -------- "),t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},e._l(e.studentlist,(function(s){return t("div",{staticClass:"item"},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v(" "+e._s(s.name)+" "),s.count?[e._v("("+e._s(s.count)+"人)")]:e._e()],2),t("input",{directives:[{name:"model",rawName:"v-model",value:e.student,expression:"student"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.student)?e._i(e.student,s)>-1:e.student},on:{change:function(t){var i=e.student,a=t.target,l=!!a.checked;if(Array.isArray(i)){var n=s,o=e._i(i,n);a.checked?o<0&&(e.student=i.concat([n])):o>-1&&(e.student=i.slice(0,o).concat(i.slice(o+1)))}else e.student=l}}})])])})),0)]),t("template",{slot:"buttons"},[t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.selhospital.show=!1}}},[e._v("确定")])])],2),t("c-modal",{attrs:{config:e.seloffice}},[t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},[t("div",{staticClass:"item",on:{click:function(t){return e.choiceall("turndoctor")}}},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v("全部")]),t("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.student_turndoctor.length==e.selofficelist.length}})])]),e._l(e.selofficelist,(function(s){return t("div",{staticClass:"item"},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v(e._s(s.name)+"-"+e._s(s.username))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.student_turndoctor,expression:"student_turndoctor"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.student_turndoctor)?e._i(e.student_turndoctor,s)>-1:e.student_turndoctor},on:{change:function(t){var i=e.student_turndoctor,a=t.target,l=!!a.checked;if(Array.isArray(i)){var n=s,o=e._i(i,n);a.checked?o<0&&(e.student_turndoctor=i.concat([n])):o>-1&&(e.student_turndoctor=i.slice(0,o).concat(i.slice(o+1)))}else e.student_turndoctor=l}}})])])}))],2)]),t("template",{slot:"buttons"},[t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.confirmselofficetrainee(0)}}},[e._v("确定")])])],2),t("c-modal",{attrs:{config:e.selofficetrainee}},[t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},[t("div",{staticClass:"item",on:{click:function(t){return e.choiceall("trainee")}}},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v("全部")]),t("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.student_trainee.length==e.selofficetraineelist.length}})])]),e._l(e.selofficetraineelist,(function(s){return t("div",{staticClass:"item"},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v(e._s(s.name)+"-"+e._s(s.username))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.student_trainee,expression:"student_trainee"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.student_trainee)?e._i(e.student_trainee,s)>-1:e.student_trainee},on:{change:function(t){var i=e.student_trainee,a=t.target,l=!!a.checked;if(Array.isArray(i)){var n=s,o=e._i(i,n);a.checked?o<0&&(e.student_trainee=i.concat([n])):o>-1&&(e.student_trainee=i.slice(0,o).concat(i.slice(o+1)))}else e.student_trainee=l}}})])])}))],2)]),t("template",{slot:"buttons"},[t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.confirmselofficetrainee(1)}}},[e._v("确定")])])],2),t("c-modal",{attrs:{config:e.searchconfig}},[t("div",{staticClass:"flex-item class-sel-list"},[t("div",{staticClass:"list info-list list-inner"},e._l(e.searchlist,(function(s){return t("div",{staticClass:"item"},[t("label",{staticClass:"flex flex-start flex-row"},[t("div",{staticClass:"fitem"},[e._v(e._s(s.name)+"-"+e._s(s.username))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchArr,expression:"searchArr"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.searchArr)?e._i(e.searchArr,s)>-1:e.searchArr},on:{change:function(t){var i=e.searchArr,a=t.target,l=!!a.checked;if(Array.isArray(i)){var n=s,o=e._i(i,n);a.checked?o<0&&(e.searchArr=i.concat([n])):o>-1&&(e.searchArr=i.slice(0,o).concat(i.slice(o+1)))}else e.searchArr=l}}})])])})),0)]),t("template",{slot:"buttons"},[t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.confirmselofficetrainee1(1)}}},[e._v("确定")])])],2)],2),"base"!=e.surelevel.levelcode?t("div",{staticClass:"result",on:{click:function(t){e.selectDoctor.show=!0}}},[t("p",[e._v(" 已选参与人 "),"base"!=e.surelevel.levelcode?[e._v(" ("+e._s(Number(e.student.length)+Number(e.student_turndoctor.length)+Number(e.student_trainee.length))+") ")]:[e._v("("+e._s(e.student.length)+")")]],2)]):e._e()],1)])],1),t("c-picker",{attrs:{config:e.seldept},on:{confirm:e.selectdept}}),t("c-picker",{attrs:{config:e.seltype},on:{confirm:e.selecttype}}),t("c-timepicker",{attrs:{config:e.getstarttime},on:{confirm:e.selectstarttime}}),t("c-timepicker",{attrs:{config:e.getendtime},on:{confirm:e.selectendtime}})],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"otherInfo"},[t("span",[e._v("备注")])])}],l=(s(70560),s(3032)),n=s(36797),o=s.n(n),r=s(68934),c=s(22760),d=s(93830),h=s(30908),u=s(53003),m=s(49931),p=s(62266),f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-wrapper"},[t("div",{staticClass:"g-main"},[[t("div",{staticClass:"cascade"},[t("div",{staticClass:"cascade_item_content"},[t("div",{staticClass:"cascade_item_wrap"},[t("p",[e._v("年级")]),t("div",{staticClass:"cascade_item gread"},[t("ul",{staticClass:"grade"},[t("li",{on:{click:e.selectAllGrade}},[t("i",{staticClass:"mk"}),e._v("全部")]),e._l(e.hos_grade_list,(function(s,i){return t("li",{class:{active:e.oneGrade[i]},attrs:{gradeItem:JSON.stringify(s)},on:{click:function(t){return e.selectGrade(i,s)}}},[t("i",{staticClass:"mk"}),e._v(e._s(s.name)+" ")])}))],2)])]),t("div",{staticClass:"cascade_item_wrap"},[t("p",[e._v("院区")]),t("div",{staticClass:"cascade_item base"},[t("ul",{staticClass:"base"},[t("li",{on:{click:e.selectAllBase}},[t("i",{staticClass:"mk"}),e._v("全部 ")]),e._l(e.hos_list,(function(s,i){return t("li",{class:{active:e.oneBase[i]},attrs:{gradeItem:JSON.stringify(s)},on:{click:function(t){return e.selectBase(i,s)}}},[t("i",{staticClass:"mk"}),e._v(" "+e._s(s.name)+" ")])}))],2)])])]),t("div",{staticClass:"operation"},[t("div",[t("button",{on:{click:e.hospitalresult}},[e._v("重置")]),t("button",{on:{click:function(t){return e.hospitalsubmit(!0)}}},[e._v("确定")])])])])]],2)])},v=[],b=s(63822);new l["default"];var g={props:{hosdata:{default(){return{}}}},components:{cModal:d.Z,cTimepicker:m.Z},data(){return{hos_grade_list:[],hos_stutype_list:[],hos_base_list:[],hos_list:[],allGrade:!1,allStutype:!1,allBase:!1,oneGrade:[],oneStutype:[],oneBase:[],gradesubmitlist:[],stutypesubmitlist:[],basesubmitlist:[],hospitalcount:"",hossubmitlist:{},resultdatalist:[]}},computed:{},watch:{teacher:function(e){0==e.length&&(this.selectTeacher.show=!1)}},created(){let e=this;e.inithospitalgradelist(),e.inithospitalstudentlist(),e.inithospitalbaselist()},mounted(){let e=this;e.resultdatalist=e.hosdata.resultdatalist,setTimeout((function(){e.inithospitalresult()}),500)},methods:{...(0,b.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),...r.Z,inithospitalgradelist(){let e=this;this.post("/traineestudent/queryDictionaryList",{command:"traineestudent/queryDictionaryList",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),code:"turngrade"}).done((t=>{t&&0==t.errcode?(e.hos_grade_list=t.dic_list,e.initGrade()):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},inithospitalstudentlist(){let e=this;this.post("/traineestudent/queryDictionaryList",{command:"traineestudent/queryDictionaryList",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),code:"stud_type"}).done((t=>{t&&0==t.errcode?(e.hos_stutype_list=t.dic_list,e.initStutype()):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},inithospitalbaselist(){let e=this;e.post("/base/dept/listHospital",{keywords:"",type:3}).done((t=>{e.hos_list=t.model})),this.post("/deptinfo/getdeptlist",{command:"deptinfo/getdeptlist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),deptcode:"base"}).done((t=>{t&&0==t.errcode?(e.hos_base_list=t.beanlist,e.initBase()):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},selectAllGrade(){this.allGrade=!this.allGrade,this.initGrade()},initGrade(){let e=[];this.hos_grade_list.map(((t,s)=>{this.allGrade?e.push(!0):e.push(!1)})),this.oneGrade=e},selectGrade(e,t){this.allGrade&&(this.allGrade=!1,this.gradesubmitlist=[]);for(let s=0;s<this.oneGrade.length;s++)s===e&&(this.oneGrade[e]?this.oneGrade.splice(e,1,!1):this.oneGrade.splice(e,1,!0))},selectAllstudenttype(){this.allStutype=!this.allStutype,this.initStutype()},initStutype(){let e=[];this.hos_stutype_list.map((t=>{this.allStutype?e.push(!0):e.push(!1)})),this.oneStutype=e},selectStutype(e,t){this.allStutype&&(this.allStutype=!1,this.stutypesubmitlist=[]);for(let s=0;s<this.oneStutype.length;s++)s===e&&(this.oneStutype[e]?this.oneStutype.splice(e,1,!1):this.oneStutype.splice(e,1,!0))},selectAllBase(){this.allBase=!this.allBase,this.initBase()},initBase(){let e=[];this.hos_list.map((t=>{this.allBase?e.push(!0):e.push(!1)})),this.oneBase=e},selectBase(e,t){this.allBase&&(this.allBase=!1,this.basesubmitlist=[]);for(let s=0;s<this.oneBase.length;s++)s===e&&(this.oneBase[e]?this.oneBase.splice(e,1,!1):this.oneBase.splice(e,1,!0))},inithospitalresult(){let e=this;e.initGrade(),e.initStutype(),e.initBase();e.hos_grade_list.map(((t,s)=>{e.hosdata.attendinfolist.map(((i,a)=>{"grade"==i.bustype&&i.id==t.id&&(e.oneGrade[s]=!0)}))})),e.hos_stutype_list.map(((t,s)=>{e.hosdata.attendinfolist.map(((i,a)=>{"type"==i.bustype&&i.id==t.id&&(e.oneStutype[s]=!0)}))})),e.hos_list.map(((t,s)=>{e.hosdata.attendinfolist.map(((i,a)=>{"base"!=i.bustype&&"grade"!=i.bustype||i.id==t.id&&(e.oneBase[s]=!0)}))}))},hospitalresult(){let e=this;e.allGrade=!1,e.allStutype=!1,e.allBase=!1;let t=[],s=[],i=[],a=[];this.hos_grade_list.map(((e,s)=>{t.push(!1)})),this.hos_stutype_list.map(((e,t)=>{s.push(!1)})),this.hos_base_list.map(((e,t)=>{i.push(!1)})),e.oneGrade=t,e.oneStutype=s,e.oneBase=i,a=e.resultdatalist,e.hos_grade_list.map(((t,s)=>{a.map(((i,a)=>{"grade"==i.bustype&&i.id==t.id&&(e.oneGrade[s]=!0)}))})),e.hos_stutype_list.map(((t,s)=>{a.map(((i,a)=>{"type"==i.bustype&&i.id==t.id&&(e.oneStutype[s]=!0)}))})),e.hos_base_list.map(((t,s)=>{a.map(((i,a)=>{"base"==i.bustype&&i.id==t.id&&(e.oneBase[s]=!0)}))})),setTimeout((function(){e.hospitalsubmit(!1)}),800)},hospitalsubmit(e){let t=this,s=[],i=[],a=[],l=[],n=[],o=[],r={};if($(".grade li.active").each(((e,t)=>{l.push(JSON.parse($(t).attr("gradeItem")))})),t.gradesubmitlist=l,$(".stutype li.active").each(((e,t)=>{n.push(JSON.parse($(t).attr("gradeItem")))})),t.stutypesubmitlist=n,$(".base li.active").each(((e,t)=>{o.push(JSON.parse($(t).attr("gradeItem")))})),t.basesubmitlist=o,0==this.gradesubmitlist.length&&0==this.stutypesubmitlist.length&&0==this.basesubmitlist.length)return r={gradelist:[],stutypelist:[],baselist:[],count:"",close:!1,editflag:!0},this.$emit("hospitalsubmitdata",r),void this.$emit("close",!1);t.gradesubmitlist.length>0&&t.gradesubmitlist.map((e=>{e.bustype="grade",s.push(e.id)})),t.stutypesubmitlist.length>0&&t.stutypesubmitlist.map((e=>{e.bustype="type",i.push(e.id)})),t.basesubmitlist.length>0&&t.basesubmitlist.map((e=>{e.bustype="base",a.push(e.id)})),t.hossubmitlist={gradelist:t.gradesubmitlist,stutypelist:t.stutypesubmitlist,baselist:t.basesubmitlist},t.post("/actionplanbase/getattender",{command:"actionplanbase/getattender",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanlevel:"hospital",starttime:t.hosdata.starttimestr,endtime:t.hosdata.endtimestr,deptid:t.hosdata.deptid,gradebean:{bustype:"grade",gradelist:s},stdtypebean:{bustype:"stdtype",stdtypelist:i},basebean:{bustype:"base",baselist:a}}).done((s=>{if(s&&0==s.errcode){let i="";i=s.result.grouplist.length>0&&s.result.grouplist[0].count?s.result.grouplist[0].count+"人":"0人",r={gradelist:t.gradesubmitlist,stutypelist:t.stutypesubmitlist,baselist:t.basesubmitlist,count:i,close:!1,editflag:!0},e?(this.$emit("hospitalsubmitdata",r),this.$emit("close",!1)):this.$emit("hospitalsubmitdata",r)}else s.errdesc?t.toast(s.errdesc):t.toast("服务器错误，请联系管理员。")}))}}},y=g,k=s(1001),_=(0,k.Z)(y,f,v,!1,null,"25634750",null),A=_.exports;let C=new l["default"];var w={components:{cHeader:c.Z,cModal:d.Z,cTab:h.Z,cTabs:u.Z,cTimepicker:m.Z,cPicker:p.Z,hospitalActplan:A},data(){return{searchConfig:{pid:0,id:0},hospitalId:0,deptId:0,date:"",searchFlag:!0,searchArr:[],levelcode:"",bus:C,data:"",detailid:"",levellist:[],levelname:"科室",surelevel:"",hospitallist:"",selectlevels:"",baselist:"",officelist:"",isstutype:"grade",status:"",getstarttime:{show:!1,istime:!0,isday:!0},getendtime:{show:!1,istime:!0,isday:!0},seldept:{show:!1,mainlist:[],valueKey:function(e){return e.deptname||e.name}},seltype:{show:!1,mainlist:[],valueKey:"name"},selhospital:{show:!1,title:"选择参与人员",hideOnClickOut:!0},isallseloffice:!1,isallselofficetrainee:!1,student_turndoctor:[],student_trainee:[],selofficelist:[],selofficetraineelist:[],seloffice:{show:!1,title:"选择住院医",hideOnClickOut:!0},selofficetrainee:{show:!1,title:"选择实习生",hideOnClickOut:!0},searchname:"",studentname:"",choiceteacher:!1,choicestudent:!1,theme:"",starttime:"",endtime:"",typename:"",placename:"",teacher:[],student:[],remark:"",teacherlist:[],studentlist:[],selectDoctor:{show:!1,title:"已选参与人员"},selectTeacher:{show:!1,title:"已选主讲人"},selectStudent:{show:!1,title:"选择参与人员"},typelist:"",technicallist:[],gradelist:[],stutypelist:[],basechecklist:[{name:"正在该基地轮转的学员",id:"",attendbusinfo:"turn",type:1,count:"",ischecked:!1},{name:"专业在该基地的学员",id:"",attendbusinfo:"base",type:1,count:"",ischecked:!1}],isCheckedAll:!1,searchconfig:{show:!1,title:"选择搜索的参与人员"},searchlist:[],hospitalbusidlist:"",hospitalattend:"",filelist:[],hosdata:{},hossubmitlist:{},hosactivecount:"",editsubmitlist:[],resultdatalist:[],newbasecount:"",timeFlag:0,showTime:!1,selectTimePick:"",currentIndex:"",minDate:new Date,showDate:!1,level:"",timeArr:[{date:"请选择",startTime:"请选择",endTime:"请选择"}],form:{dept:"请选择",theme:"",type:"请选择",address:"",speakers:"请选择",remark:"",student:"请选择",period:""},periodShow:!1,autosize:{maxHeight:60,minHeight:60},showAddtime:!1,disabled:!1,teachingActionPlanPeriodSetList:[]}},computed:{},filters:{},watch:{surelevels:function(e,t){e!==t&&(this.teacherlist=[],this.studentlist=[],this.teacher=[],this.student=[])},teacher:function(e){0==e.length&&(this.selectTeacher.show=!1)},student:function(e){0==e.length&&(this.selectDoctor.show=!1)}},created(){this.detailid=this.$route.query.id},mounted(){var e=this;this.initalldept(),this.registerToNative("goBack",(function(t){e.back()})),this.getPeriodSetList()},methods:{...(0,b.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast"]),...r.Z,oninput(e){e.length>250&&(this.form.remark=e.slice(0,250))},confirmselofficetrainee1(e){if(!this.searchFlag)return;this.searchFlag=!1;let t=[];if(1==e)if("base"==this.surelevel.levelcode)this.searchArr.forEach((e=>{let t=!0;this.student.forEach((s=>{s.id==e.id&&(t=!1)})),t&&(e.type=0,this.student.push(e))}));else{let e=this.student_trainee.concat(this.student_turndoctor);this.searchArr.forEach((t=>{let s=!0;e.forEach((e=>{e.id==t.id&&(s=!1)})),s&&(t.type=3,this.student_trainee.push(t))}))}"office"==this.surelevel.levelcode||"hospital"==this.surelevel.levelcode?(this.student_turndoctor.forEach((e=>{let s=e.name;t.push(s)})),this.student_trainee.forEach((e=>{let s=e.name;t.push(s)}))):"base"==this.surelevel.levelcode&&this.student.forEach((e=>{let s="";s=e.count?e.name+"-"+e.count+"人":e.name,t.push(s)})),this.searchFlag=!0,console.log("fhafja",this.form.student),console.log(e),1==e?this.searchconfig.show=!1:(this.form.student=0==t.length?"请选择":t.join("、"),this.choicestudent=!1)},confirmselofficetrainee(e){let t=[];"base"==this.surelevel.levelcode?this.student.forEach((e=>{let s=e.name+"-"+val.count+"人";t.push(s)})):(this.student_turndoctor.forEach((e=>{let s=e.name;t.push(s)})),this.student_trainee.forEach((e=>{let s=e.name;t.push(s)}))),console.log(t),this.form.student=0==t.length?"请选择":t.join("、"),0==e?this.seloffice.show=!1:this.selofficetrainee.show=!1},confirmStudent(){let e=[];"office"==this.surelevel.levelcode||"hospital"==this.surelevel.levelcode?(this.student_turndoctor.forEach((t=>{let s=t.name;e.push(s)})),this.student_trainee.forEach((t=>{let s=t.name;e.push(s)}))):"base"==this.surelevel.levelcode&&this.student.forEach((t=>{let s=t.name+"-"+val.count+"人";e.push(s)})),this.form.student=e.join("、"),this.selhospital.show=!1},cancelTime(){this.showTime=!1},closeTime(e){let t=this.timeArr[this.currentIndex];if(this.showTime=!1,0==this.timeFlag?t.startTime=e:t.endTime=e,"请选择"!=t.startTime&&"请选择"!=t.endTime){let e=t.startTime.split(":"),s=t.endTime.split(":");(Number(e[0])>Number(s[0])||Number(s[0])==Number(e[0])&&Number(e[1])>Number(s[1]))&&(t.endTime="",this.toast("开始时间不得大于结束时间！"))}if(""!=t.date&&void 0!=t.date){let s=t.date.replace(/-/g,"/");0==this.timeFlag&&(t.start=e?new Date(s+" "+e).getTime():""),1==this.timeFlag&&(t.end=e?new Date(s+" "+e).getTime():"")}this.timeArr.splice(this.currentIndex,1,t)},selectTime(e,t){if(this.timeArr[e].disabled)return this.toast("当前时间不可更改！"),!1;this.currentIndex=e,this.timeFlag=t,this.showTime=!0},cancelDate(){this.showDate=!1},closeDate(e){console.log(e,"----"),this.showDate=!1;let t=this.timeArr[this.currentIndex];if(t.date=o()(e.getTime()).format("YYYY-MM-DD"),void 0==e||""==e)t.start="",t.end="";else{let e=t.date.replace(/-/g,"/");""!=t.startTime&&"请选择"!=t.startTime&&(t.start=new Date(e+" "+t.startTime).getTime()),""!=t.endTime&&"请选择"!=t.endTime&&(t.end=new Date(e+" "+t.endTime).getTime())}console.log(t,"current"),this.timeArr.splice(this.currentIndex,1,t)},selectDate(e){if(this.timeArr[e].disabled)return this.toast("当前日期不可更改！"),!1;this.showDate=!0,this.currentIndex=e},deleteTime(e){return 1!=this.timeArr.length&&(this.timeArr[e].disabled?(this.toast("当前日期不可删除！"),!1):void this.timeArr.splice(e,1))},addTime(){this.timeArr.push({date:"请选择",startTime:"请选择",endTime:"请选择",start:"",end:""})},checkTime(){let e=!0,t=!0;return this.timeArr.forEach(((s,i)=>{("请选择"==s.date||"请选择"==s.startTime||"请选择"==s.endTime)&&(t=!1),t&&this.timeArr.forEach(((t,a)=>{i!=a&&(t.start>=s.end||t.end<=s.start||(e=!1))}))})),{timeFlag:e,isempty:t}},funhossubmitlist(e){this.hossubmitlist=e,this.hosdata=e.gradelist.concat(e.stutypelist).concat(e.baselist),this.hosdata.attendinfolist=e.gradelist.concat(e.stutypelist).concat(e.baselist),this.hosdata.deptid=this.selectlevels.id,this.hosdata.starttimestr=this.starttime,this.hosdata.endtimestr=this.endtime,this.hosactivecount=e.count,this.hosdata.resultdatalist=this.resultdatalist;let t=[];"hospital"==this.surelevel.levelcode&&t.push(e.count),this.form.student=t.join("、")},init(){let e=this;this.post("/actionplan/getactionplandetail",{command:"actionplan/getactionplandetail",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),actionplanid:e.detailid,clientflag:1}).done((t=>{if(t&&0==t.errcode){if(e.hosIdByDept=t.bean.hospital,e.deptId=t.bean.deptid,e.date=t.bean.createtime.slice(0,10),e.status=t.bean.status,e.hosdata=t.bean,e.levellist.map((s=>{s.levelcode==t.bean.actionplanlevel&&(s.checkflag=!0,e.surelevel=s)})),t.bean.attendinfolist&&t.bean.attendinfolist.length>0)for(let a=0;a<t.bean.attendinfolist.length;a++)if(t.bean.attendinfolist[a].bustype){e.hospitalattend=t.bean.attendinfolist[a].bustype;break}e.selectlevels={name:t.bean.deptname,id:t.bean.deptid},"hospital"==t.bean.actionplanlevel?(e.searchConfig.id=t.deptid,e.seldept.mainlist=e.officelist):"base"==t.bean.actionplanlevel?(e.newbasecount=t.bean.attendinfolist[0].attendbusinfo+"人",e.seldept.mainlist=e.baselist,t.bean.attendinfolist&&t.bean.attendinfolist.length>0&&t.bean.attendinfolist.map((t=>{1==t.type&&e.basechecklist.map((e=>{t.bustype==e.attendbusinfo&&(e.ischecked=!0)}))}))):"office"==t.bean.actionplanlevel&&(e.seldept.mainlist=e.officelist,e.searchConfig.pid=t.bean.hospital,e.searchConfig.id=t.bean.deptid),e.initteacherlist(e.selectlevels.id),0!=t.bean.status&&(e.disabled=!0),e.form.period=t.bean.period,e.periodShow=!!t.bean.period,e.form.dept=t.bean.showofficename,e.form.theme=t.bean.theme,e.form.address=t.bean.place,e.levelcode=t.bean.actionplanlevel,e.theme=t.bean.theme,e.typename={name:t.bean.typename,key:t.bean.type},e.form.type=t.bean.typename;let s=[];t.bean.speakerlist.forEach((e=>{s.push(e.uname)})),e.form.speakers=s.join("、"),e.timeArr=JSON.parse(t.bean.actiontime),e.form.remark=t.bean.remark,e.timeArr.forEach((s=>{let i=(new Date).getTime(),a=s.date.replace(/-/g,"/");s.start=new Date(a+" "+s.startTime).getTime(),s.end=new Date(a+" "+s.endTime).getTime();let l=s.startTime.split(":"),n=s.endTime.split(":");s.startTime=l[0]+":"+l[1],s.endTime=n[0]+":"+n[1],s.status=t.bean.status,0!=t.bean.status?s.start>i?(s.disabled=!1,e.showAddtime=!0):s.disabled=!0:(s.disabled=!1,e.showAddtime=!0)})),e.teacher=[],t.bean.speakerlist.map((t=>{e.teacher.push({name:t.uname,id:t.uid})})),e.student=[],t.bean.attendinfolist&&t.bean.attendinfolist.length>0?"office"==t.bean.actionplanlevel||"hospital"==t.bean.actionplanlevel?t.bean.attendinfolist.map((t=>{let s=t.attendbusinfo.split("-");2==t.type?e.student_turndoctor.push({id:t.attendbusid,type:t.type,name:s.slice(0,-1).join("-"),username:s[s.length-1]}):3==t.type?e.student_trainee.push({id:t.attendbusid,type:t.type,name:s.slice(0,-1).join("-"),username:s[s.length-1]}):0==t.type?(console.log("this is  0"),e.student_turndoctor.push({id:t.attendbusid,type:t.type,name:s.slice(0,-1).join("-"),username:s[s.length-1]})):e.student.push({id:t.attendbusid,type:t.type,name:s.slice(0,-1).join("-"),username:s[s.length-1]})})):t.bean.attendinfolist.map((t=>{t.type,e.student.push({id:t.attendbusid,type:t.type,name:arr.slice(0,-1).join("-"),username:arr[arr.length-1]})})):e.student=[];let i=[];"hospital"==t.bean.actionplanlevel?(e.student_turndoctor.forEach((e=>{let t=e.name;i.push(t)})),e.student_trainee.forEach((e=>{let t=e.name;i.push(t)}))):"office"==t.bean.actionplanlevel?(e.student_turndoctor.forEach((e=>{let t=e.name;i.push(t)})),e.student_trainee.forEach((e=>{let t=e.name;i.push(t)}))):"base"==t.bean.actionplanlevel&&e.student.forEach((e=>{let t="";t=e.count?e.name+"-"+e.count+"人":e.name,i.push(t)})),e.form.student=i.join("、"),e.placename=t.bean.place,e.remark=t.bean.remark,e.filelist=t.bean.fileuploadlist}else t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},selectstarttime(e){this.starttime=e},selectendtime(e){this.endtime=e},initalldept(){let e=this;this.post("/actionplanbase/getusermanagerdept",{command:"actionplanbase/getusermanagerdept",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),paramcode:"actionplanaddroles"}).done((t=>{t&&0==t.errcode?(e.hospitallist=t.beanlist.hospitallist,e.baselist=t.beanlist.baselist,e.officelist=t.beanlist.officelist,e.initlevellist(),e.initgrade(),e.initstutype(),e.inittypelist()):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initlevellist(){let e=this;this.post("/actionplanbase/getactionplanlevel",{command:"actionplanbase/getactionplanlevel",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid")}).done((t=>{if(t&&0==t.errcode){let s,i,a=t.actionplanlevellist;a.map((e=>{this.$set(e,"checkflag",!1),"hospital"==e.levelcode&&(s=e),"base"==e.levelcode&&(i=e)})),e.levellist=a,e.init()}else t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},inittypelist(){let e=this;this.post("/turnbaseinfo/turnbaseinfolevel",{command:"turnbaseinfo/turnbaseinfolevel",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"teachtype"}).done((t=>{t&&0==t.errcode?e.seltype.mainlist=JSON.parse(t.baseinfolevellist):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},sellevel(){this.surelevel?this.seldept.show=!0:this.toast("请先选择活动级别")},selectdept(e){this.selectlevels=e,this.teacherlist=[],this.teacher=[],this.studentlist=[],this.student=[],this.student_turndoctor=[],this.student_trainee=[],"office"==this.surelevel.levelcode?this.initteacherlist(this.selectlevels.id):"base"==this.surelevel.levelcode&&this.basechecklist.map((e=>{e.id=this.selectlevels.id})),this.seldept.show=!1,this.form.dept=this.selectlevels.deptname||this.selectlevels.name},selectlevel(e){let t=this;1!=t.status?e!=this.surelevel&&(this.teacherlist=[],this.teacher=[],this.studentlist=[],this.student=[],this.selectlevels="",this.surelevel=e,this.levellist.map((t=>{t.levelcode==e.levelcode?t.checkflag=!0:t.checkflag=!1})),"hospital"==e.levelcode?(this.levelname="院校",t.seldept.mainlist=t.hospitallist,t.selectlevels=t.hospitallist[0]):"base"==e.levelcode?(this.levelname="基地",t.seldept.mainlist=t.baselist,t.selectlevels=t.baselist[0]):(this.levelname="科室",t.seldept.mainlist=t.officelist,t.selectlevels=t.officelist[0],t.initteacherlist(t.selectlevels.id))):t.toast("进行中的教学活动计划不允许修改活动级别。")},selecttype(e){let t="";this.teachingActionPlanPeriodSetList.forEach((s=>{s.paramValue==e.key&&(t=s.param1)})),this.form.period=t,this.periodShow=!!t,this.typename=e,this.form.type=e.name,this.seltype.show=!1},initteacher(){this.selectlevels.id?this.choiceteacher=!0:this.toast("请先选择科室")},changestart(){1==this.status?this.toast("进行中的教学活动计划不允许修改开始时间。"):this.getstarttime.show=!0},closeteacher(){if(this.teacher.length<=0)this.toast("请选择主讲人");else{this.choiceteacher=!1;let e=[];console.log(this.teacher),this.teacher.forEach((t=>{e.push(t.name)})),this.form.speakers=e.join("、")}},initteacherlist(e){let t,s=this;"hospital"==this.levelcode?(t={hospitalId:s.searchConfig.id},s.searchConfig.id=e):"office"==this.levelcode&&(t={hospitalId:s.searchConfig.pid,deptId:s.searchConfig.id}),this.post("/base/teachers/listSpeaker",t).done((e=>{s.teacherlist=e.model}))},searchteacher(){let e,t=this;"hospital"==this.levelcode?(e={hospitalId:t.searchConfig.id,keyword:t.searchname},t.searchConfig.id=param):"office"==this.levelcode&&(e={hospitalId:t.searchConfig.pid,deptId:t.searchConfig.id,keyword:t.searchname}),this.post("/base/teachers/listSpeaker",e).done((e=>{t.teacherlist=e.model}))},initstudent(){var{timeFlag:e,isempty:t}=this.checkTime();this.selectlevels.id?t?e?("base"==this.surelevel.levelcode&&(this.getgradelist(this.selectlevels.id,"base","base"),this.getgradelist(this.selectlevels.id,"turn","base")),this.choicestudent=!0):this.toast("请检查活动日期是否重复!"):this.toast("请选择日期或者时间!"):this.toast("请先选择科室")},initgrade(){let e=this;this.post("/turnbaseinfo/turnbaseinfolevel",{command:"turnbaseinfo/turnbaseinfolevel",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"turngrade"}).done((t=>{if(t&&0==t.errcode){e.gradelist=[];let s=JSON.parse(t.baseinfolevellist);s.map((t=>{e.gradelist.push(t.id)}))}else t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},initstutype(){let e=this;this.post("/hr/querylevellist",{command:"hr/querylevellist",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"stud_type"}).done((t=>{if(t&&0==t.errcode){e.stutypelist=[];let s=t.levellist;s.map((t=>{e.stutypelist.push(t.key)}))}else t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")}))},getgradelist(e,t,s){let i=this;i.studentlist=[],i.hospitalattend=t,i.hospitalbusidlist=e;let a={};if("hospital"==s){if(a.hospitalbusidlist=e,a.hospitalattend=t,i.isstutype!==t&&(i.isstutype=t,i.student&&i.student.length>0))for(let l=i.student.length-1;l>=0;l--)1==i.student[l].type&&i.student.splice(l,1)}else"base"==s&&(a.deptid=e,a.baseattend=t);this.post("/actionplanbase/getattender",{command:"actionplanbase/getattender",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanlevel:s,actiontime:JSON.stringify(i.timeArr),...a}).done((e=>{e&&0==e.errcode?"hospital"==s?(i.studentlist=[],e.result.grouplist&&e.result.grouplist.length>0&&(e.result.grouplist.map((e=>{i.studentlist.push({name:e.name,id:e.id,count:e.count,type:1})})),i.selhospital.show=!0),i.student&&i.student.length>0&&i.student.map((e=>{i.studentlist.map((t=>{e.id==t.id&&(e.count=t.count)}))}))):"base"==s&&"base"==t?i.basechecklist[1].count=e.result.grouplist[0].count:"base"==s&&"turn"==t&&(i.basechecklist[0].count=e.result.grouplist[0].count):e.errdesc?i.toast(e.errdesc):i.toast("服务器错误，请联系管理员。")}))},initstudentlist(e){let t=this;"hospital"==t.surelevel.levelcode?"turndoctor"==e?this.post("/base/turnplandetail/listTurnResident?pageSize=0&pageNum=0",{hospitalId:t.hosIdByDept,actionDateList:[t.date],userId:$.cookie("uid")}).done((s=>{s&&200==s.resCode&&(t.studentlist=[],t.selofficelist=[],t.selofficetraineelist=[],s.rows?"turndoctor"==e?(s.rows.map((e=>{t.selofficelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.seloffice.show=!0):"trainee"==e&&(s.rows.map((e=>{t.selofficetraineelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.selofficetrainee.show=!0):t.toast("当前没有查询到该类型的学员。"))})):this.post("/base/traineeplandetail/listTurnTrainee?pageSize=0&pageNum=0",{hospitalId:t.hosIdByDept,actionDateList:[t.date],userId:$.cookie("uid")}).done((s=>{s&&200==s.resCode&&(t.studentlist=[],t.selofficelist=[],t.selofficetraineelist=[],s.rows?"turndoctor"==e?(s.rows.map((e=>{t.selofficelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.seloffice.show=!0):"trainee"==e&&(s.rows.map((e=>{t.selofficetraineelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.selofficetrainee.show=!0):t.toast("当前没有查询到该类型的学员。"))})):"office"==t.surelevel.levelcode&&(console.log(t.date),"turndoctor"==e?this.post("/base/turnplandetail/listTurnResident?pageSize=0&pageNum=0",{hospitalId:t.hosIdByDept,deptId:t.selectlevels.id,actionDateList:[t.date],userId:$.cookie("uid")}).done((s=>{console.log(s),console.log(e),s&&200==s.resCode&&(t.studentlist=[],t.selofficelist=[],t.selofficetraineelist=[],s.rows?"turndoctor"==e?(s.rows.map((e=>{t.selofficelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.seloffice.show=!0):"trainee"==e&&(s.rows.map((e=>{t.selofficetraineelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.selofficetrainee.show=!0):t.toast("当前没有查询到该类型的学员。"))})):this.post("/base/traineeplandetail/listTurnTrainee?pageSize=0&pageNum=0",{hospitalId:t.hosIdByDept,deptId:t.selectlevels.id,actionDateList:[t.date],userId:$.cookie("uid")}).done((s=>{s&&200==s.resCode&&(t.studentlist=[],t.selofficelist=[],t.selofficetraineelist=[],s.rows?"turndoctor"==e?(s.rows.map((e=>{t.selofficelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.seloffice.show=!0):"trainee"==e&&(s.rows.map((e=>{t.selofficetraineelist.push({type:0,id:e.id,name:e.name,username:e.username})})),t.selofficetrainee.show=!0):t.toast("当前没有查询到该类型的学员。"))})))},choiceall(e){let t=this;"turndoctor"==e?(this.isCheckedAll_a=!this.isCheckedAll_a,this.isCheckedAll_a?t.student_turndoctor=t.selofficelist:t.student_turndoctor=[]):"trainee"==e&&(this.isCheckedAll_b=!this.isCheckedAll_b,this.isCheckedAll_b?t.student_trainee=t.selofficetraineelist:t.student_trainee=[])},searchstudent(){let e=this;e.studentname?this.post("/actionplanbase/getattenderforsearch",{command:"actionplanbase/getattenderforsearch",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),actionplanlevel:e.surelevel.levelcode,attendername:e.studentname}).done((t=>{t&&0==t.errcode&&(e.studentlist=[],e.searchlist=[],t.attendlist&&t.attendlist.length>0&&t.attendlist.map((t=>{e.searchlist.push({type:0,id:t.id,name:t.name,username:t.username})})),0==e.searchlist.length?e.toast("未搜索到哟~"):e.searchconfig.show=!0)})):this.toast("请输入搜索内容")},deletedoctor(e,t,s){let i=this;t?this.showConfirm({title:"温馨提示",msg:"您是否要删除当前参与人员？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){0==s?i.student.map(((t,s)=>{t.id==e&&i.student.splice(s,1)})):2==s?i.student_turndoctor.map(((t,s)=>{t.id==e&&i.student_turndoctor.splice(s,1)})):3==s&&i.student_trainee.map(((t,s)=>{t.id==e&&i.student_trainee.splice(s,1)}))}}):this.showConfirm({title:"温馨提示",msg:"您是否要删除当前选中主讲人？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){i.teacher.map(((t,s)=>{t.id==e&&i.teacher.splice(s,1)}))}})},checkbase(e){this.student.map(((e,t)=>{1==e.type&&this.student.splice(t,1)})),this.student.push(e),this.basechecklist.map((t=>{t.attendbusinfo==e.attendbusinfo?t.ischecked=!0:t.ischecked=!1}));let t=[];this.student.forEach((e=>{let s=e.name+"-"+val.count+"人";t.push(s)})),this.form.student=t.join("、"),this.hospitalattend=e.attendbusinfo,this.newbasecount=e.name+"-"+e.count+"人"},submit(){let e=this,{timeFlag:t,isempty:s}=this.checkTime();if(!e.selectlevels.id)return void e.toast("请选择科室！");if(!e.typename)return void e.toast("请选择活动类型！");if(!this.form.theme)return void e.toast("请输入活动主题！");if(this.teacher.length<=0)return void e.toast("请选择主讲人！");if(!this.form.address)return void e.toast("请选择活动地点！");if(s){if(!t)return void this.toast("请检查活动日期是否重复!")}else this.toast("请选择日期或者时间!"),reutrn;let i=[],a=[];a="office"==e.surelevel.levelcode||"hospital"==e.surelevel.levelcode?e.student.concat(e.student_turndoctor).concat(e.student_trainee):e.student,a&&a.map((t=>{"hospital"==e.surelevel.levelcode?i.push({attendbusid:t.id,attendbusinfo:t.name+"-"+t.username,bustype:"",type:t.type}):"base"==e.surelevel.levelcode?1==t.type?i.push({attendbusid:t.id,attendbusinfo:t.name+"-"+t.count,bustype:e.hospitalattend,type:t.type}):i.push({attendbusid:t.id,attendbusinfo:t.name+"-"+t.username,bustype:e.hospitalattend,type:t.type}):i.push({attendbusid:t.id,attendbusinfo:t.name+"-"+t.username,bustype:"",type:t.type})}));let l=[];e.teacher&&e.teacher.map((e=>{l.push({uid:e.id})}));let n=[];e.filelist&&e.filelist.length>0&&e.filelist.map((e=>{1==e.type&&n.push({uid:e.uid,fileurl:e.fileurl,filename:e.filename,type:e.type})}));let o={attendinfo:{gradebean:{bustype:"",gradelist:[]},stdtypebean:{bustype:"",stdtypelist:[]},basebean:{bustype:"",baselist:[]}}};if(a.length>0)if(o.attendinfo.actionplanlevel=e.surelevel.levelcode,o.attendinfo.deptid=e.selectlevels.id,o.attendinfo.actiontime=JSON.stringify(e.timeArr),"hospital"==e.surelevel.levelcode)e.hossubmitlist&&e.hossubmitlist.gradelist&&e.hossubmitlist.gradelist.length>0?(e.hossubmitlist.gradelist.map((e=>{o.attendinfo.gradebean.gradelist.push(e.id)})),e.hossubmitlist.stutypelist.map((e=>{o.attendinfo.stdtypebean.stdtypelist.push(e.id)})),e.hossubmitlist.baselist.map((e=>{o.attendinfo.basebean.baselist.push(e.id)}))):e.editsubmitlist.map((e=>{"grade"==e.bustype?o.attendinfo.gradebean.gradelist.push(e.id):"type"==e.bustype?o.attendinfo.stdtypebean.stdtypelist.push(e.id):"base"==e.bustype&&o.attendinfo.basebean.baselist.push(e.id)})),o.attendinfo.gradebean.bustype="grade",o.attendinfo.stdtypebean.bustype="stdtype",o.attendinfo.basebean.bustype="baselist",e.student&&e.student.length>0&&(o.attendinfo.hospitalbusidlist=[],e.student.map((e=>{1==e.type&&o.attendinfo.hospitalbusidlist.push(e.id)})));else if("base"==e.surelevel.levelcode)for(let r=0;r<e.basechecklist.length;r++)if(1==e.basechecklist[r].ischecked){o.attendinfo.baseattend=e.basechecklist[r].attendbusinfo;break}this.showConfirm({title:"温馨提示",msg:"您是否确认提交？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){e.post("/actionplan/updateactionplan",{command:"actionplan/updateactionplan",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:$.cookie("uid"),id:e.detailid,actionplanlevel:e.surelevel.levelcode,theme:e.form.theme,type:e.typename.key,deptid:e.selectlevels.id,place:e.form.address,actiontime:JSON.stringify(e.timeArr),attendinfolist:i,speakerlist:l,remark:e.form.remark,filelist:n,period:e.form.period?Number(e.form.period):null,...o}).done((function(t){t&&0==t.errcode?(e.toast("修改成功~"),setTimeout((()=>{e.$route.query.isOverseer?e.$router.push({name:"activity_detail",query:{id:e.$route.query.id,ishistory:!1,isOverseer:!0,grade:e.$route.query.grade}}):e.$router.push({name:"fdAction_detail",query:{id:e.detailid}})}),500)):t.errdesc?e.toast(t.errdesc):e.toast("服务器错误，请联系管理员。")})).fail((function(e){}))}})},textareaFocus(){$(".g-main").css("padding-bottom","6rem")},textareaBlur(){$(".g-main").css("padding-bottom","0")},back(){let e=this;this.showConfirm({title:"温馨提示",msg:"你当前操作尚未提交保存，是否确认返回？",theme:"modal-confirm modal-white",cancel:function(){},ok:function(){e.$route.query.isOverseer?e.$router.push({name:"activity_detail",query:{id:e.$route.query.id,ishistory:!1,isOverseer:!0,grade:e.$route.query.grade}}):e.$router.push({name:"fdAction_list"})}})},getPeriodSetList(){let e=this;e.get("/base/commpara/getListByCode?code=teachingActionPlanPeriodSet_4").done((t=>{0!=t.resCode&&200!=t.resCode||(e.teachingActionPlanPeriodSetList=t.model)}))}}},x=w,T=(0,k.Z)(x,i,a,!1,null,"ca2c6efa",null),S=T.exports},54816:function(e){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=8509.44452314.js.map