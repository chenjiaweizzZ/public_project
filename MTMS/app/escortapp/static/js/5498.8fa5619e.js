"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[5498],{85965:function(t,e,i){i.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"addcontent"},[e("i",{staticClass:"shade",on:{click:t.close}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],staticClass:"select",staticStyle:{"animation-duration":".1s"},style:{top:t.config.fixedtop,right:t.config.fixedright},attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},t._l(t.list,(function(i,s){return 1==i.isused?e("li",{on:{click:function(e){return t.select(i)}}},[t._v(" "+t._s(i.name)+" ")]):t._e()})),0)])},n=[],a={name:"addselect",props:{showAdd:{type:Boolean,default:!1},config:{default:function(){return{show:!1,label:"",fixedright:0,fixedtop:0}}},dataList:{type:Array,default:function(){return[]}}},data(){return{addButton:!1}},mounted:function(){this.addButton=this.showAdd},methods:{close(){this.config.show=!1},select(t){this.$emit("confirm",t)}},watch:{showAdd(t,e){this.addButton=t}},computed:{list(){let t=this.config.label||"";return this.dataList.length>0?(this.stopclick=!1,this.dataList.map((e=>{e.name=e[t],e.isused="fdAction_add"==e.router?this.addButton:e.isused})),this.dataList):(this.stopclick=!0,[{name:"当前暂无数据"}])}}},o=a,r=i(1001),c=(0,r.Z)(o,s,n,!1,null,"04a28040",null),l=c.exports},62266:function(t,e,i){i.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.config.show,expression:"config.show"}],attrs:{id:"picker"}},[e("div",{attrs:{id:"picker-main"}},[e("header",[e("span",{on:{click:t.cancle}},[t._v("取消")]),e("span",{class:{noclick:t.isdisabled},on:{click:t.sure}},[t._v("确定")])]),e("section",[e("div",{staticClass:"on"}),e("ul",{style:t.style,on:{touchstart:function(e){return e.preventDefault(),t.start.apply(null,arguments)},touchmove:function(e){return e.preventDefault(),t.move.apply(null,arguments)},touchend:function(e){return e.preventDefault(),t.end.apply(null,arguments)}}},t._l(t.list,(function(i,s){return e("li",{domProps:{innerHTML:t._s(i.txt)}})})),0)])])])])},n=[],a=(i(70560),{name:"picker",props:{config:{default:function(){return{show:!1,mainlist:{type:Array,default:[]},defaultVal:[String,Number],valueKey:{type:[Function,String],default:"name"}}}}},data(){return{isdisabled:!1,activeItem:0,itemLength:0,activeItemValue:0,curVal:"",style:{},Y:0,t:.1,touchStartTime:0,touchEndTime:0,eY:45,sY:90,itemHeight:45}},watch:{"config.mainlist":function(t,e){t!==e&&(this.activeItem=0,this.Y=0,this.eY=45,this.sY=90,this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"})}},filters:{},computed:{list(){let t=[],e=typeof this.config.valueKey;return 0==this.config.mainlist.length?(this.isdisabled=!0,this.config.mainlist=[{name:"暂无数据"}],this.config.mainlist.map((t=>{t.txt=t.name}))):(this.isdisabled=!1,this.config.mainlist.map((i=>{if("string"===e)i.txt=i[this.config.valueKey],t.push(i);else if("function"===e){let e=this.config.valueKey(i);i.txt=e,t.push(i)}}))),this.curVal=t[this.activeItem],this.itemLength=t.length,t}},mounted(){this.config.defaultVal?this.moveTo():this.style={transform:"translate3d(0px, "+this.sY+"px, 0px)",transition:"all ease "+this.t+"s"}},methods:{moveTo(t){this.list.map(((e,i)=>{e==(t||this.config.defaultVal)&&(this.activeItem=i,this.activeItemValue=e)})),this.Y=45*this.activeItem,this.eY=45*this.activeItem,this.style={transform:"translate3d(0px, "+this.Y+"px, 0px)",transition:"all ease "+this.t+"s"}},start(t){this.sY=t.touches[0].clientY,this.touchStartTime=t.timeStamp},move(t){this.Y=this.eY+t.touches[0].clientY-this.sY,this.t=.1,this.style={transform:"translate3d(0, "+this.Y+"px, 0)",transition:"all ease "+this.t+"s"}},end(t){let e=90,i=-45*(this.itemLength-1)+e;if(this.eY=this.Y,this.touchEndTime=t.timeStamp-this.touchStartTime,this.t=.1,this.sY==t.changedTouches[0].clientY)return;Math.abs(this.eY%45)<=22.5?this.eY=45*parseInt(this.eY/45):this.eY>0?this.eY=45*parseInt(this.eY/45)+45:this.eY=45*parseInt(this.eY/45)-45,this.eY>e&&(this.Y=0,this.eY=90,this.activeItem=0),this.eY<=i&&(this.Y=i,this.eY=i,this.activeItem=this.itemLength-1),this.style={transform:"translate3d(0, "+this.eY+"px, 0)",transition:"all ease "+this.t+"s"};let s=Math.abs((this.eY-e)/45);this.activeItem=Math.round(s),this.curVal=this.list[this.activeItem],this.$emit("changeCurVal",this.type,this.curVal)},cancle(){this.config.show=!1},sure(){this.$emit("confirm",this.curVal)}}}),o=a,r=i(1001),c=(0,r.Z)(o,s,n,!1,null,"e3fc68ee",null),l=c.exports},22760:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header",attrs:{id:"header"}},[t._t("headerLeft",(function(){return[e("a",{staticClass:"header-back-btn",on:{click:function(e){return t.back()}}},[e("img",{attrs:{src:i(88579)}})])]})),e("div",{staticClass:"header-center-blank"}),e("div",{staticClass:"header-center"},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2),t._t("headerRight")],2)},n=[],a=(i(77387),i(68934)),o=i(63822),r={props:["title"],data(){return{}},created(){},mounted(){},computed:(0,o.rn)(["loginUser"]),methods:{...(0,o.nv)(["showAlert","showLoading","hideLoading","toast"]),...a.Z,back(){this.$router.go(-1)}}},c=r,l=i(1001),d=(0,l.Z)(c,s,n,!1,null,null,null),h=d.exports},84622:function(t,e,i){i.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"no_content"}},[e("img",{attrs:{src:i(10745),alt:""}}),e("span",{domProps:{textContent:t._s(t.txtdescription||"当前没有内容哦~")}})])},n=[],a={props:["txtdescription"]},o=a,r=i(1001),c=(0,r.Z)(o,s,n,!1,null,null,null),l=c.exports},85498:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-wrapper"},[e("c-header",[e("div",{attrs:{slot:"headerLeft"},slot:"headerLeft"},[e("router-link",{staticClass:"header-back-btn",attrs:{to:{name:"fdRotation_teacher"}}},[e("img",{attrs:{src:i(88579)}})])],1),t._v(" 考勤 "),e("div",{attrs:{slot:"headerRight"},slot:"headerRight"},[e("router-link",{staticClass:"header-back-btn",attrs:{to:{name:"fdRotation_doctor_analysis"}}},[e("img",{attrs:{src:i(13892)}})])],1)]),e("div",{staticClass:"header-date",on:{click:function(e){t.timeconfig.show=!0}}},[e("span",[t._v(t._s(t.checkdDate))]),e("span",[t._v("日期")])]),e("div",{staticClass:"g-main"},t._l(t.list,(function(i,s){return e("ul",{directives:[{name:"show",rawName:"v-show",value:!t.noContent,expression:"!noContent"}],key:s},[e("li",{staticClass:"date-flag"},[e("p",[t._v(" "+t._s(t._f("substr")(t.now,0,4))+"年"+t._s(t._f("substr")(t.now,5,2))+"月 "+t._s(t.turninfo.stuname)+" ")]),e("span",[t._v("平均签到率"+t._s(t._f("rate")(i.averagerate)))])]),t._l(i.beanlist,(function(i,s){return e("li",{key:s,class:{noclick:0==i.editflag},on:{click:function(e){t.status.show=!0,t.id=i.id}}},[e("span",[t._v(t._s(t._f("substr")(i.workdatestr,0,4))+"年"+t._s(t._f("substr")(i.workdatestr,5,2))+"月"+t._s(t._f("substr")(i.workdatestr,8,2))+"日")]),e("span",{class:{choice:1==i.editflag}},[t._v(t._s(i.workattendancename))])])}))],2)})),0),e("add-group",{attrs:{config:t.timeconfig,"data-list":t.timelist},on:{confirm:t.timeselect}}),e("c-picker",{attrs:{config:t.status},on:{confirm:t.changeSinginStatus}}),t.noContent?e("no-content"):t._e(),e("van-popup",{attrs:{"lazy-render":!1,"close-on-click-overlay":!1,position:"bottom"},model:{value:t.listShow,callback:function(e){t.listShow=e},expression:"listShow"}},[e("van-picker",{ref:"van_picker",attrs:{"show-toolbar":"",title:"3"==t.workattendanceType?"旷工":"4"==t.workattendanceType?"迟到":"5"===t.workattendanceType?"早退":"其他",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm},scopedSlots:t._u([{key:"option",fn:function(i){return[e("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[e("div",[t._v(t._s(i)+t._s("3"==t.workattendanceType?"天":"分钟"))])])]}}])})],1)],1)},n=[],a=(i(70560),i(68934)),o=i(63822),r=i(22760),c=i(62266),l=i(85965),d=i(84622),h=i(88848),u={props:["active"],data(){return{id:"",stuid:"",plandetailid:"",list:"",checkdDate:"选择日期",now:"",status:{show:!1,mainlist:[],valueKey:"name"},timeconfig:{show:!1,label:"name",fixedtop:"1.5rem",fixedright:".1rem"},timelist:[],noContent:!1,colTitle:"",listShow:!1,workattendanceType:"",columns:[],day_columns:[1,.5]}},components:{cPicker:c.Z,addGroup:l.Z,noContent:d.Z,cHeader:r.Z},watch:{now:function(t,e){t!==e&&this.setTurninfo({k:"signindata",v:this.now})}},filters:{rate:function(t){return Number(t).toFixed(2)+"%"}},computed:{...(0,o.rn)(["turninfo"])},created(){let t=this,e="",i=(new Date).getFullYear(),s=(new Date).getMonth()+1,n=s<10?"0"+s:s;this.now=(new Date).getFullYear()+"-"+n;for(let a=0;a<n;a++)e=Number(n)-a<10?"0"+(Number(n)-a):(Number(n),Number(n)-a),t.timelist.push({name:i+"年"+e+"月",value:i+"-"+e,isused:1})},mounted(){let t=this;this.initstatus(),this.registerToNative("goBack",(function(e){t.$router.push({name:"fdRotation_teacher"})}))},methods:{...a.Z,...(0,o.nv)(["showAlert","showConfirm","showLoading","hideLoading","toast","setTurninfo"]),generateArray(){const t=[];for(let e=1;e<=120;e++)t.push(e);return t},init(){let t=this;this.post("/workattendance/getuserworkattendance",{command:"workattendance/getuserworkattendance",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),uid:this.turninfo.stuid,businessid:this.turninfo.actionplanid,yearmonth:t.now}).done((e=>{e&&e.errcode?0==e.errcode?(t.list=e.list,t.timeconfig.show=!1,0==e.list[0].beanlist.length?t.noContent=!0:t.noContent=!1):t.toast(e.errdesc):t.toast("系统错误，请联系管理员~")}))},initstatus(){let t=this;this.post("/traineestudent/queryDictionaryList",{command:"traineestudent/queryDictionaryList",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),code:"workattendancetype_pub"}).done((e=>{e&&e.errcode?0==e.errcode?(t.status.mainlist=e.dic_list,t.init()):t.toast(e.errdesc):t.toast("系统错误，请联系管理员~")}))},onCancel(){let t=this;t.$refs.van_picker.setIndexes([0]),t.listShow=!1},onConfirm(t){let e=this;console.log(t),console.log(e.workattendanceType),this.post("/workattendance/updateworkattendance",{command:"workattendance/updateworkattendance",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),id:e.id,workattendancetype:e.workattendanceType,timeLength:t,timeUnit:"3"==e.workattendanceType?4:2}).done((t=>{t&&t.errcode?0==t.errcode?(e.status.show=!1,e.listShow=!1,e.$refs.van_picker.setIndexes([0]),(0,h.Z)("修改成功~"),e.init()):e.toast(t.errdesc):e.toast("系统错误，请联系管理员~")}))},changeSinginStatus(t){console.log(t);let e=this;return e.workattendanceType=t.key,"3"==t.key?(e.columns=e.day_columns,void(e.listShow=!0)):"4"==t.key||"5"==t.key?(e.columns=e.generateArray(),void(e.listShow=!0)):void this.post("/workattendance/updateworkattendance",{command:"workattendance/updateworkattendance",sessionid:$.cookie("sid"),loginid:$.cookie("uid"),id:e.id,workattendancetype:t.key}).done((t=>{t&&t.errcode?0==t.errcode?(e.status.show=!1,e.toast("修改成功~"),e.init()):e.toast(t.errdesc):e.toast("系统错误，请联系管理员~")}))},timeselect(t){this.now=t.value,this.init()}}},m=u,p=i(1001),f=(0,p.Z)(m,s,n,!1,null,"7ecdda94",null),g=f.exports},13892:function(t,e,i){t.exports=i.p+"static/img/analysis.a0fd67e0.png"},10745:function(t,e,i){t.exports=i.p+"static/img/icon-renwu.b85b73a3.png"},88579:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzcxQUNDRDA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzcxQUNDRTA2RTQxMUU3OUMwRERCODQ1NkU4NTc5NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NzFBQ0NCMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NzFBQ0NDMDZFNDExRTc5QzBEREI4NDU2RTg1Nzk1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XL81twAAAT5JREFUeNpi+P//PwOFmBGIK4D4AhCHUGoYMxDP+Y8AlygxjBOIN/5HBXnkGiYIxIeRDPoDxGkgOXIMkwbiy0iGfQfiQJg8qYZpAfEjJMPeA7E9shpSDLME4rdIhj0DYj10dcQa5gPEX5EMuw7E8tjUEmNYAhD/RjLsBBAL41JPyLByIP6HZNg2IObGpweXBBMQ96OlsUVAzErIR9gE2YB4BZphPdAsxkCqgbxAvAfJIJB3i0lJWsgccSA+g2TYTyCOJjXhwxhKQHwbybDPQOxGTrYEEQZA/BzJsFdAbEpuoQEi7iEZdh+I1Sgp0pgYGMCYeoAWXqZ6pOBLNlGUGIgrYRdQYiCurNdJbtajSeFAk+KLZgUsTaoAXJXUEyDWocRAbNXoOyC2ocRAqlf0NGmK0KSxRJPmHNYGJ0CAAQCI5DhjJbDsxgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=5498.8fa5619e.js.map